# 角色权限配置说明文档

> 最后更新时间：2025年12月13日
> 
> 本文档详细说明了系统中各角色的权限配置，包括菜单访问权限、数据范围权限和操作权限。

---

## 一、角色概览

| 角色ID | 角色名称 | 说明 |
|--------|----------|------|
| `super_admin` | 超级管理员 | 拥有系统所有权限，可以管理所有功能和数据 |
| `admin` | 管理员 | 拥有系统所有权限，可以管理所有功能和数据 |
| `department_manager` | 部门经理 | 管理本部门业务和团队，查看部门数据 |
| `sales_staff` | 销售员 | 专注于客户开发和订单管理，查看个人数据 |
| `customer_service` | 客服 | 处理订单审核、物流和售后服务 |

---

## 二、禁止权限清单

### 部门经理和销售员禁止的权限

| 功能模块 | 权限标识 | 说明 |
|----------|----------|------|
| 客户分组 | `customer.groups` | 仅管理员可用 |
| 客户标签 | `customer.tags` | 仅管理员可用 |
| 短信管理 | `service.sms` | 仅管理员、客服可用 |
| 发货列表 | `logistics.shipping` | 仅管理员、客服可用 |
| 状态更新 | `logistics.status` | 仅管理员、客服可用 |
| 回收站 | `data.recycle` | 仅管理员可用 |

---

## 三、各角色详细权限

### 1. 超级管理员 (super_admin)

**权限标识**：`*`（所有权限）

| 一级菜单 | 二级菜单 | 查看 | 新增 | 编辑 | 删除 | 其他操作 |
|----------|----------|:----:|:----:|:----:|:----:|----------|
| 数据看板 | - | ✅ | - | - | - | 查看全部数据 |
| 客户管理 | 客户列表 | ✅ | ✅ | ✅ | ✅ | 导入、导出 |
| 客户管理 | 新增客户 | - | ✅ | - | - | - |
| 客户管理 | 客户分组 | ✅ | ✅ | ✅ | ✅ | - |
| 客户管理 | 客户标签 | ✅ | ✅ | ✅ | ✅ | - |
| 订单管理 | 订单列表 | ✅ | ✅ | ✅ | ✅ | - |
| 订单管理 | 新增订单 | - | ✅ | - | - | - |
| 订单管理 | 订单审核 | ✅ | - | - | - | 审核通过、拒绝 |
| 服务管理 | 通话管理 | ✅ | ✅ | ✅ | ✅ | - |
| 服务管理 | 短信管理 | ✅ | ✅ | ✅ | ✅ | - |
| 业绩统计 | 个人业绩 | ✅ | - | - | - | - |
| 业绩统计 | 团队业绩 | ✅ | - | - | - | 查看所有成员 |
| 业绩统计 | 业绩分析 | ✅ | - | - | - | - |
| 业绩统计 | 业绩分享 | ✅ | ✅ | ✅ | ✅ | - |
| 物流管理 | 发货列表 | ✅ | ✅ | ✅ | - | - |
| 物流管理 | 物流列表 | ✅ | - | - | - | - |
| 物流管理 | 物流跟踪 | ✅ | - | ✅ | - | - |
| 物流管理 | 状态更新 | ✅ | - | ✅ | - | - |
| 物流管理 | 物流公司 | ✅ | ✅ | ✅ | ✅ | - |
| 售后管理 | 售后订单 | ✅ | ✅ | ✅ | ✅ | - |
| 售后管理 | 新建售后 | - | ✅ | - | - | - |
| 售后管理 | 售后数据 | ✅ | - | - | - | 数据分析 |
| 资料管理 | 资料列表 | ✅ | - | - | - | 分配、封存、回收 |
| 资料管理 | 客户查询 | ✅ | - | - | - | 高级搜索 |
| 资料管理 | 回收站 | ✅ | - | - | ✅ | 恢复 |
| 商品管理 | 商品列表 | ✅ | ✅ | ✅ | ✅ | - |
| 商品管理 | 新增商品 | - | ✅ | - | - | - |
| 商品管理 | 库存管理 | ✅ | - | ✅ | - | - |
| 商品管理 | 商品分类 | ✅ | ✅ | ✅ | ✅ | - |
| 商品管理 | 商品分析 | ✅ | - | - | - | - |
| 系统管理 | 部门管理 | ✅ | ✅ | ✅ | ✅ | - |
| 系统管理 | 用户管理 | ✅ | ✅ | ✅ | ✅ | 重置密码 |
| 系统管理 | 角色权限 | ✅ | ✅ | ✅ | ✅ | 分配权限 |
| 系统管理 | 权限管理 | ✅ | - | ✅ | - | - |
| 系统管理 | 超管面板 | ✅ | - | - | - | 系统配置 |
| 系统管理 | 客服管理 | ✅ | ✅ | ✅ | ✅ | - |
| 系统管理 | 消息管理 | ✅ | ✅ | ✅ | ✅ | - |
| 系统管理 | 系统设置 | ✅ | - | ✅ | - | - |

---

### 2. 管理员 (admin)

**权限**：与超级管理员相同，除了"超管面板"

| 一级菜单 | 二级菜单 | 查看 | 新增 | 编辑 | 删除 | 其他操作 |
|----------|----------|:----:|:----:|:----:|:----:|----------|
| 系统管理 | 超管面板 | ❌ | ❌ | ❌ | ❌ | 不可访问 |
| 其他 | 同超级管理员 | ✅ | ✅ | ✅ | ✅ | - |

---

### 3. 部门经理 (department_manager)

**数据范围**：本部门数据

| 一级菜单 | 二级菜单 | 查看 | 新增 | 编辑 | 删除 | 数据范围 | 备注 |
|----------|----------|:----:|:----:|:----:|:----:|----------|------|
| 数据看板 | - | ✅ | - | - | - | 部门 | 查看部门汇总数据 |
| 客户管理 | 客户列表 | ✅ | - | ✅ | - | 部门 | 导入、导出 |
| 客户管理 | 新增客户 | - | ✅ | - | - | - | - |
| 客户管理 | 客户分组 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 客户管理 | 客户标签 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 订单管理 | 订单列表 | ✅ | - | ✅ | - | 部门 | - |
| 订单管理 | 新增订单 | - | ✅ | - | - | - | - |
| 订单管理 | 订单审核 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 服务管理 | 通话管理 | ✅ | ✅ | ✅ | - | 部门 | - |
| 服务管理 | 短信管理 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 业绩统计 | 个人业绩 | ✅ | - | - | - | 个人 | - |
| 业绩统计 | 团队业绩 | ✅ | - | - | - | 部门 | 可查看部门所有成员，可点击详情 |
| 业绩统计 | 业绩分析 | ✅ | - | - | - | 部门 | - |
| 业绩统计 | 业绩分享 | ✅ | ✅ | ✅ | - | 部门 | - |
| 物流管理 | 发货列表 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 物流管理 | 物流列表 | ✅ | - | - | - | 部门 | - |
| 物流管理 | 物流跟踪 | ✅ | - | - | - | 部门 | - |
| 物流管理 | 状态更新 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 物流管理 | 物流公司 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 售后管理 | 售后订单 | ✅ | - | - | - | 部门 | - |
| 售后管理 | 新建售后 | - | ✅ | - | - | - | - |
| 售后管理 | 售后数据 | ✅ | - | - | - | 部门 | 数据分析 |
| 资料管理 | 资料列表 | ✅ | - | - | - | 仅分配给自己的 | 可再分配给部门成员 |
| 资料管理 | 客户查询 | ✅ | - | - | - | 全部 | 基础+高级搜索 |
| 资料管理 | 回收站 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 商品管理 | - | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 系统管理 | - | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |

---

### 4. 销售员 (sales_staff)

**数据范围**：个人数据

| 一级菜单 | 二级菜单 | 查看 | 新增 | 编辑 | 删除 | 数据范围 | 备注 |
|----------|----------|:----:|:----:|:----:|:----:|----------|------|
| 数据看板 | - | ✅ | - | - | - | 个人 | 查看个人汇总数据 |
| 客户管理 | 客户列表 | ✅ | - | - | - | 个人 | 仅查看自己的客户 |
| 客户管理 | 新增客户 | - | ✅ | - | - | - | - |
| 客户管理 | 客户分组 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 客户管理 | 客户标签 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 订单管理 | 订单列表 | ✅ | - | ✅ | - | 部门 | 可查看同部门订单 |
| 订单管理 | 新增订单 | - | ✅ | - | - | - | - |
| 订单管理 | 订单审核 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 服务管理 | 通话管理 | ✅ | ✅ | ✅ | - | 个人 | - |
| 服务管理 | 短信管理 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 业绩统计 | 个人业绩 | ✅ | - | - | - | 个人 | - |
| 业绩统计 | 团队业绩 | ✅ | - | - | - | 部门 | 可查看部门成员，仅自己行可点击 |
| 业绩统计 | 业绩分析 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 业绩统计 | 业绩分享 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 物流管理 | 发货列表 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 物流管理 | 物流列表 | ✅ | - | - | - | 部门 | - |
| 物流管理 | 物流跟踪 | ✅ | - | - | - | 部门 | - |
| 物流管理 | 状态更新 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 物流管理 | 物流公司 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 售后管理 | 售后订单 | ✅ | - | - | - | 个人 | - |
| 售后管理 | 新建售后 | - | ✅ | - | - | - | - |
| 售后管理 | 售后数据 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 资料管理 | 资料列表 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 资料管理 | 客户查询 | ✅ | - | - | - | 全部 | 仅基础搜索 |
| 资料管理 | 回收站 | ❌ | ❌ | ❌ | ❌ | - | **禁止访问** |
| 商品管理 | - | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 系统管理 | - | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |

---

### 5. 客服 (customer_service)

**数据范围**：全公司数据（根据客服类型）

| 一级菜单 | 二级菜单 | 查看 | 新增 | 编辑 | 删除 | 数据范围 | 备注 |
|----------|----------|:----:|:----:|:----:|:----:|----------|------|
| 数据看板 | - | ✅ | - | - | - | 个人 | - |
| 客户管理 | - | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 订单管理 | 订单列表 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 订单管理 | 订单审核 | ✅ | - | - | - | 全部 | 审核通过、拒绝 |
| 服务管理 | 通话管理 | ✅ | - | - | - | 全部 | - |
| 服务管理 | 短信管理 | ✅ | ✅ | - | - | 全部 | - |
| 业绩统计 | - | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 物流管理 | 发货列表 | ✅ | ✅ | ✅ | - | 全部 | - |
| 物流管理 | 物流列表 | ✅ | - | - | - | 全部 | - |
| 物流管理 | 物流跟踪 | ✅ | - | ✅ | - | 全部 | - |
| 物流管理 | 状态更新 | ✅ | - | ✅ | - | 全部 | - |
| 物流管理 | 物流公司 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 售后管理 | 售后订单 | ✅ | - | - | - | 全部 | - |
| 售后管理 | 新建售后 | - | ✅ | - | - | - | - |
| 售后管理 | 售后数据 | ✅ | - | - | - | 全部 | 数据分析 |
| 资料管理 | 资料列表 | ✅ | - | - | - | 全部 | 分配资料 |
| 资料管理 | 客户查询 | ✅ | - | - | - | 全部 | 基础+高级搜索 |
| 资料管理 | 回收站 | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 商品管理 | - | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |
| 系统管理 | - | ❌ | ❌ | ❌ | ❌ | - | 不可访问 |

---

## 四、特殊权限说明

### 1. 团队业绩页面权限

| 角色 | 可查看数据 | 单量超链接 | 查看详情按钮 |
|------|-----------|:----------:|:------------:|
| 超级管理员/管理员 | 所有成员 | ✅ 全部可点 | ✅ 全部可点 |
| 部门经理 | 本部门成员 | ✅ 全部可点 | ✅ 全部可点 |
| 销售员 | 本部门成员 | ⚠️ 仅自己行 | ⚠️ 仅自己行 |

### 2. 资料列表页面权限

| 角色 | 可查看资料 | 分配权限 |
|------|-----------|----------|
| 超级管理员/管理员 | 所有资料 | 可分配给任何人 |
| 部门经理 | 仅被分配给自己的资料 | 可再分配给部门成员 |
| 销售员 | 无 | 无 |
| 客服 | 所有资料 | 可分配资料 |

### 3. 订单数据权限

| 角色 | 可查看订单 |
|------|-----------|
| 超级管理员/管理员 | 所有订单 |
| 部门经理 | 本部门所有成员的订单 |
| 销售员 | 本部门所有成员的订单（用于团队业绩统计） |
| 客服 | 根据客服类型配置 |

---

## 五、配置文件位置

| 文件路径 | 说明 |
|----------|------|
| `src/config/defaultRolePermissions.ts` | 角色默认权限配置 |
| `src/config/menu.ts` | 菜单权限配置 |
| `src/stores/data.ts` | 资料列表数据过滤逻辑 |
| `src/views/Performance/Team.vue` | 团队业绩权限控制 |
| `backend/src/routes/orders.ts` | 订单API权限过滤 |
| `backend/src/routes/users.ts` | 用户API权限过滤 |

---

## 六、权限修改注意事项

1. **修改菜单权限**：编辑 `src/config/menu.ts` 中对应菜单的 `roles` 数组
2. **修改数据权限**：编辑对应 store 或后端 API 的过滤逻辑
3. **修改按钮权限**：编辑对应 Vue 组件中的 `v-if` 条件
4. **新增角色**：在 `src/config/defaultRolePermissions.ts` 中添加角色配置

---

> 文档版本：v1.0
> 
> 维护人员：系统管理员
