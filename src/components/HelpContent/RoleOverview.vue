<template>
  <div class="help-content">
    <h1>è§’è‰²æƒé™æ¦‚è¿°</h1>

    <section>
      <h2>è§’è‰²ä½“ç³»</h2>
      <p>
        äº‘å®¢CRMç³»ç»Ÿé‡‡ç”¨åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰æ¨¡å‹ï¼Œé€šè¿‡è§’è‰²æ¥ç®¡ç†ç”¨æˆ·æƒé™ã€‚æ¯ä¸ªç”¨æˆ·åˆ†é…ä¸€ä¸ªè§’è‰²ï¼Œè§’è‰²å†³å®šäº†ç”¨æˆ·å¯ä»¥è®¿é—®çš„åŠŸèƒ½å’Œæ•°æ®èŒƒå›´ã€‚
      </p>
    </section>

    <section>
      <h2>ç³»ç»Ÿè§’è‰²</h2>
      <div class="role-cards">
        <div class="role-card super-admin">
          <div class="role-header">
            <span class="role-icon">ğŸ‘‘</span>
            <h3>è¶…çº§ç®¡ç†å‘˜</h3>
          </div>
          <div class="role-body">
            <p class="role-desc">ç³»ç»Ÿæœ€é«˜æƒé™è§’è‰²ï¼Œæ‹¥æœ‰å…¨éƒ¨åŠŸèƒ½å’Œæ•°æ®è®¿é—®æƒé™</p>
            <div class="role-features">
              <h4>æƒé™èŒƒå›´</h4>
              <ul>
                <li>âœ… æ‰€æœ‰åŠŸèƒ½æ¨¡å—</li>
                <li>âœ… æ‰€æœ‰æ•°æ®è®¿é—®</li>
                <li>âœ… ç³»ç»Ÿé…ç½®ç®¡ç†</li>
                <li>âœ… ç”¨æˆ·æƒé™ç®¡ç†</li>
              </ul>
            </div>
            <div class="role-data">
              <span class="data-scope">æ•°æ®èŒƒå›´ï¼šå…¨éƒ¨æ•°æ®</span>
            </div>
          </div>
        </div>

        <div class="role-card admin">
          <div class="role-header">
            <span class="role-icon">ğŸ”§</span>
            <h3>ç®¡ç†å‘˜</h3>
          </div>
          <div class="role-body">
            <p class="role-desc">ä¼ä¸šç®¡ç†è§’è‰²ï¼Œè´Ÿè´£æ—¥å¸¸ä¸šåŠ¡ç®¡ç†å’Œç”¨æˆ·ç®¡ç†</p>
            <div class="role-features">
              <h4>æƒé™èŒƒå›´</h4>
              <ul>
                <li>âœ… ä¸šåŠ¡åŠŸèƒ½æ¨¡å—</li>
                <li>âœ… ç”¨æˆ·ç®¡ç†</li>
                <li>âœ… éƒ¨é—¨ç®¡ç†</li>
                <li>âœ… ç³»ç»Ÿè®¾ç½®</li>
                <li>âŒ è¶…ç®¡ä¸“å±åŠŸèƒ½</li>
              </ul>
            </div>
            <div class="role-data">
              <span class="data-scope">æ•°æ®èŒƒå›´ï¼šå…¨éƒ¨æ•°æ®</span>
            </div>
          </div>
        </div>

        <div class="role-card dept-manager">
          <div class="role-header">
            <span class="role-icon">ğŸ‘”</span>
            <h3>éƒ¨é—¨ç»ç†</h3>
          </div>
          <div class="role-body">
            <p class="role-desc">éƒ¨é—¨ç®¡ç†è§’è‰²ï¼Œè´Ÿè´£æœ¬éƒ¨é—¨çš„ä¸šåŠ¡å’Œå›¢é˜Ÿç®¡ç†</p>
            <div class="role-features">
              <h4>æƒé™èŒƒå›´</h4>
              <ul>
                <li>âœ… å®¢æˆ·ç®¡ç†</li>
                <li>âœ… è®¢å•ç®¡ç†</li>
                <li>âœ… ä¸šç»©ç»Ÿè®¡</li>
                <li>âœ… å›¢é˜Ÿæ•°æ®æŸ¥çœ‹</li>
                <li>âŒ ç³»ç»Ÿç®¡ç†</li>
              </ul>
            </div>
            <div class="role-data">
              <span class="data-scope">æ•°æ®èŒƒå›´ï¼šæœ¬éƒ¨é—¨æ•°æ®</span>
            </div>
          </div>
        </div>

        <div class="role-card sales">
          <div class="role-header">
            <span class="role-icon">ğŸ’¼</span>
            <h3>é”€å”®å‘˜</h3>
          </div>
          <div class="role-body">
            <p class="role-desc">ä¸€çº¿é”€å”®è§’è‰²ï¼Œè´Ÿè´£å®¢æˆ·å¼€å‘å’Œè®¢å•å¤„ç†</p>
            <div class="role-features">
              <h4>æƒé™èŒƒå›´</h4>
              <ul>
                <li>âœ… ä¸ªäººå®¢æˆ·ç®¡ç†</li>
                <li>âœ… ä¸ªäººè®¢å•ç®¡ç†</li>
                <li>âœ… ä¸ªäººä¸šç»©æŸ¥çœ‹</li>
                <li>âœ… é€šè¯è®°å½•</li>
                <li>âŒ å®¢æˆ·åˆ†ç»„/æ ‡ç­¾</li>
              </ul>
            </div>
            <div class="role-data">
              <span class="data-scope">æ•°æ®èŒƒå›´ï¼šä¸ªäººæ•°æ®</span>
            </div>
          </div>
        </div>

        <div class="role-card customer-service">
          <div class="role-header">
            <span class="role-icon">ğŸ§</span>
            <h3>å®¢æœ</h3>
          </div>
          <div class="role-body">
            <p class="role-desc">å®¢æˆ·æœåŠ¡è§’è‰²ï¼Œè´Ÿè´£è®¢å•å®¡æ ¸ã€å‘è´§ã€å”®åç­‰å·¥ä½œ</p>
            <div class="role-features">
              <h4>æƒé™èŒƒå›´</h4>
              <ul>
                <li>âœ… è®¢å•å®¡æ ¸</li>
                <li>âœ… ç‰©æµå‘è´§</li>
                <li>âœ… å”®åå¤„ç†</li>
                <li>âœ… å®¢æˆ·æŸ¥è¯¢</li>
                <li>âŒ å®¢æˆ·ç¼–è¾‘</li>
              </ul>
            </div>
            <div class="role-data">
              <span class="data-scope">æ•°æ®èŒƒå›´ï¼šå…¨éƒ¨æ•°æ®ï¼ˆåªè¯»ä¸ºä¸»ï¼‰</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2>æƒé™ç±»å‹</h2>
      <h3>èœå•æƒé™</h3>
      <p>æ§åˆ¶ç”¨æˆ·å¯ä»¥çœ‹åˆ°å’Œè®¿é—®çš„èœå•é¡¹ï¼š</p>
      <ul>
        <li>ä¸€çº§èœå•ï¼šå¦‚å®¢æˆ·ç®¡ç†ã€è®¢å•ç®¡ç†ã€ç³»ç»Ÿç®¡ç†ç­‰</li>
        <li>äºŒçº§èœå•ï¼šå¦‚å®¢æˆ·åˆ—è¡¨ã€æ–°å¢å®¢æˆ·ã€å®¢æˆ·åˆ†ç»„ç­‰</li>
      </ul>

      <h3>æ“ä½œæƒé™</h3>
      <p>æ§åˆ¶ç”¨æˆ·å¯ä»¥æ‰§è¡Œçš„æ“ä½œï¼š</p>
      <ul>
        <li>æŸ¥çœ‹ï¼šæŸ¥çœ‹æ•°æ®è¯¦æƒ…</li>
        <li>æ–°å¢ï¼šåˆ›å»ºæ–°æ•°æ®</li>
        <li>ç¼–è¾‘ï¼šä¿®æ”¹ç°æœ‰æ•°æ®</li>
        <li>åˆ é™¤ï¼šåˆ é™¤æ•°æ®</li>
        <li>å¯¼å…¥ï¼šæ‰¹é‡å¯¼å…¥æ•°æ®</li>
        <li>å¯¼å‡ºï¼šå¯¼å‡ºæ•°æ®</li>
        <li>å®¡æ ¸ï¼šå®¡æ ¸è®¢å•ç­‰</li>
      </ul>

      <h3>æ•°æ®æƒé™</h3>
      <p>æ§åˆ¶ç”¨æˆ·å¯ä»¥è®¿é—®çš„æ•°æ®èŒƒå›´ï¼š</p>
      <el-table :data="dataScopeData" stripe style="width: 100%">
        <el-table-column prop="scope" label="æ•°æ®èŒƒå›´" width="150" />
        <el-table-column prop="description" label="è¯´æ˜" />
        <el-table-column prop="roles" label="é€‚ç”¨è§’è‰²" />
      </el-table>
    </section>

    <section>
      <h2>æƒé™çŸ©é˜µ</h2>
      <p>å„è§’è‰²çš„åŠŸèƒ½æƒé™å¯¹ç…§è¡¨ï¼š</p>
      <el-table :data="permissionMatrix" stripe style="width: 100%" :row-class-name="tableRowClassName">
        <el-table-column prop="module" label="åŠŸèƒ½æ¨¡å—" width="150" fixed />
        <el-table-column prop="superAdmin" label="è¶…çº§ç®¡ç†å‘˜" width="120" align="center">
          <template #default="{ row }">
            <el-icon v-if="row.superAdmin" color="#67c23a"><Check /></el-icon>
            <el-icon v-else color="#f56c6c"><Close /></el-icon>
          </template>
        </el-table-column>
        <el-table-column prop="admin" label="ç®¡ç†å‘˜" width="100" align="center">
          <template #default="{ row }">
            <el-icon v-if="row.admin" color="#67c23a"><Check /></el-icon>
            <el-icon v-else color="#f56c6c"><Close /></el-icon>
          </template>
        </el-table-column>
        <el-table-column prop="deptManager" label="éƒ¨é—¨ç»ç†" width="100" align="center">
          <template #default="{ row }">
            <el-icon v-if="row.deptManager" color="#67c23a"><Check /></el-icon>
            <el-icon v-else color="#f56c6c"><Close /></el-icon>
          </template>
        </el-table-column>
        <el-table-column prop="sales" label="é”€å”®å‘˜" width="100" align="center">
          <template #default="{ row }">
            <el-icon v-if="row.sales" color="#67c23a"><Check /></el-icon>
            <el-icon v-else color="#f56c6c"><Close /></el-icon>
          </template>
        </el-table-column>
        <el-table-column prop="customerService" label="å®¢æœ" width="100" align="center">
          <template #default="{ row }">
            <el-icon v-if="row.customerService" color="#67c23a"><Check /></el-icon>
            <el-icon v-else color="#f56c6c"><Close /></el-icon>
          </template>
        </el-table-column>
      </el-table>
    </section>

    <section>
      <h2>å®¢æœç±»å‹</h2>
      <p>å®¢æœè§’è‰²å¯ä»¥ç»†åˆ†ä¸ºä¸åŒç±»å‹ï¼Œæ‹¥æœ‰ä¸åŒçš„æƒé™ï¼š</p>
      <el-table :data="customerServiceTypes" stripe style="width: 100%">
        <el-table-column prop="type" label="å®¢æœç±»å‹" width="120" />
        <el-table-column prop="permissions" label="ä¸»è¦æƒé™" />
        <el-table-column prop="description" label="è¯´æ˜" />
      </el-table>
    </section>

    <section>
      <h2>æƒé™é…ç½®è¯´æ˜</h2>
      <el-alert type="info" :closable="false" show-icon>
        <template #title>
          æƒé™é…ç½®ç”±ç®¡ç†å‘˜åœ¨"ç³»ç»Ÿç®¡ç† â†’ è§’è‰²æƒé™"ä¸­è¿›è¡Œ
        </template>
      </el-alert>

      <h3>é…ç½®æ­¥éª¤</h3>
      <ol>
        <li>è¿›å…¥"ç³»ç»Ÿç®¡ç†" â†’ "è§’è‰²æƒé™"</li>
        <li>é€‰æ‹©è¦é…ç½®çš„è§’è‰²</li>
        <li>åœ¨æƒé™æ ‘ä¸­å‹¾é€‰éœ€è¦çš„æƒé™</li>
        <li>ç‚¹å‡»"ä¿å­˜"åº”ç”¨é…ç½®</li>
      </ol>

      <h3>æ³¨æ„äº‹é¡¹</h3>
      <ul>
        <li>è¶…çº§ç®¡ç†å‘˜æƒé™ä¸å¯ä¿®æ”¹</li>
        <li>ä¿®æ”¹è§’è‰²æƒé™ä¼šç«‹å³å½±å“è¯¥è§’è‰²çš„æ‰€æœ‰ç”¨æˆ·</li>
        <li>å»ºè®®å…ˆåœ¨æµ‹è¯•è´¦å·ä¸ŠéªŒè¯æƒé™é…ç½®</li>
        <li>æ•æ„Ÿæƒé™ï¼ˆå¦‚åˆ é™¤ã€å¯¼å‡ºï¼‰éœ€è°¨æ…åˆ†é…</li>
      </ul>
    </section>
  </div>
</template>

<script setup lang="ts">
import { Check, Close } from '@element-plus/icons-vue'

const dataScopeData = [
  { scope: 'å…¨éƒ¨æ•°æ®', description: 'å¯è®¿é—®ç³»ç»Ÿä¸­æ‰€æœ‰æ•°æ®', roles: 'è¶…çº§ç®¡ç†å‘˜ã€ç®¡ç†å‘˜' },
  { scope: 'æœ¬éƒ¨é—¨æ•°æ®', description: 'åªèƒ½è®¿é—®æœ¬éƒ¨é—¨åŠä¸‹çº§éƒ¨é—¨çš„æ•°æ®', roles: 'éƒ¨é—¨ç»ç†' },
  { scope: 'ä¸ªäººæ•°æ®', description: 'åªèƒ½è®¿é—®è‡ªå·±åˆ›å»ºæˆ–è´Ÿè´£çš„æ•°æ®', roles: 'é”€å”®å‘˜' },
  { scope: 'å…¨éƒ¨æ•°æ®ï¼ˆåªè¯»ï¼‰', description: 'å¯æŸ¥çœ‹å…¨éƒ¨æ•°æ®ä½†æ“ä½œå—é™', roles: 'å®¢æœ' }
]

const permissionMatrix = [
  { module: 'æ•°æ®çœ‹æ¿', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: false },
  { module: 'å®¢æˆ·åˆ—è¡¨', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: true },
  { module: 'æ–°å¢å®¢æˆ·', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: false },
  { module: 'å®¢æˆ·åˆ†ç»„', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: false },
  { module: 'å®¢æˆ·æ ‡ç­¾', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: false },
  { module: 'è®¢å•åˆ—è¡¨', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: true },
  { module: 'æ–°å¢è®¢å•', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: false },
  { module: 'è®¢å•å®¡æ ¸', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: true },
  { module: 'é€šè¯ç®¡ç†', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: false },
  { module: 'çŸ­ä¿¡ç®¡ç†', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: false },
  { module: 'ä¸ªäººä¸šç»©', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: false },
  { module: 'å›¢é˜Ÿä¸šç»©', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: false },
  { module: 'ä¸šç»©åˆ†æ', superAdmin: true, admin: true, deptManager: true, sales: false, customerService: false },
  { module: 'å‘è´§åˆ—è¡¨', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: true },
  { module: 'ç‰©æµåˆ—è¡¨', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: true },
  { module: 'ç‰©æµè·Ÿè¸ª', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: true },
  { module: 'çŠ¶æ€æ›´æ–°', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: true },
  { module: 'ç‰©æµå…¬å¸', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: false },
  { module: 'å”®åè®¢å•', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: true },
  { module: 'èµ„æ–™åˆ—è¡¨', superAdmin: true, admin: true, deptManager: true, sales: false, customerService: true },
  { module: 'å®¢æˆ·æŸ¥è¯¢', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: true },
  { module: 'å›æ”¶ç«™', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: false },
  { module: 'ç»©æ•ˆæ•°æ®', superAdmin: true, admin: true, deptManager: true, sales: true, customerService: false },
  { module: 'ç»©æ•ˆç®¡ç†', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: false },
  { module: 'å•†å“ç®¡ç†', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: false },
  { module: 'ç³»ç»Ÿç®¡ç†', superAdmin: true, admin: true, deptManager: false, sales: false, customerService: false }
]

const customerServiceTypes = [
  { type: 'å®¡æ ¸å®¢æœ', permissions: 'è®¢å•å®¡æ ¸ã€è®¢å•æŸ¥çœ‹', description: 'ä¸“é—¨è´Ÿè´£è®¢å•å®¡æ ¸å·¥ä½œ' },
  { type: 'ç‰©æµå®¢æœ', permissions: 'å‘è´§ç®¡ç†ã€ç‰©æµè·Ÿè¸ªã€çŠ¶æ€æ›´æ–°', description: 'ä¸“é—¨è´Ÿè´£ç‰©æµå‘è´§å·¥ä½œ' },
  { type: 'å”®åå®¢æœ', permissions: 'å”®åå·¥å•ã€é€€æ¢è´§å¤„ç†', description: 'ä¸“é—¨è´Ÿè´£å”®åæœåŠ¡å·¥ä½œ' },
  { type: 'ç»¼åˆå®¢æœ', permissions: 'ä»¥ä¸Šæ‰€æœ‰æƒé™', description: 'æ‹¥æœ‰å…¨éƒ¨å®¢æœæƒé™' }
]

const tableRowClassName = ({ rowIndex }: { rowIndex: number }) => {
  if (rowIndex % 2 === 0) {
    return 'even-row'
  }
  return 'odd-row'
}
</script>

<style scoped>
.help-content {
  line-height: 1.8;
  color: #333;
}

.help-content h1 {
  font-size: 28px;
  color: #1a1a1a;
  margin-bottom: 30px;
  padding-bottom: 15px;
  border-bottom: 2px solid #409eff;
}

.help-content h2 {
  font-size: 20px;
  color: #303133;
  margin: 30px 0 15px;
}

.help-content h3 {
  font-size: 16px;
  color: #409eff;
  margin: 20px 0 10px;
}

.help-content h4 {
  font-size: 14px;
  color: #303133;
  margin: 10px 0;
}

.help-content p {
  margin: 10px 0;
  color: #606266;
}

.help-content ul, .help-content ol {
  margin: 10px 0;
  padding-left: 20px;
}

.help-content li {
  margin: 8px 0;
  color: #606266;
}

section {
  margin-bottom: 40px;
}

.role-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.role-card {
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.role-header {
  padding: 20px;
  display: flex;
  align-items: center;
  gap: 12px;
}

.role-icon {
  font-size: 32px;
}

.role-header h3 {
  margin: 0;
  color: white;
  font-size: 18px;
}

.role-body {
  padding: 20px;
  background: white;
}

.role-desc {
  color: #606266;
  font-size: 14px;
  margin-bottom: 15px;
}

.role-features h4 {
  color: #303133;
  margin-bottom: 10px;
}

.role-features ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.role-features li {
  padding: 5px 0;
  font-size: 13px;
}

.role-data {
  margin-top: 15px;
  padding-top: 15px;
  border-top: 1px solid #ebeef5;
}

.data-scope {
  font-size: 12px;
  color: #909399;
  background: #f5f7fa;
  padding: 4px 10px;
  border-radius: 4px;
}

/* è§’è‰²å¡ç‰‡é¢œè‰² */
.role-card.super-admin .role-header {
  background: linear-gradient(135deg, #f56c6c 0%, #e6a23c 100%);
}

.role-card.admin .role-header {
  background: linear-gradient(135deg, #409eff 0%, #67c23a 100%);
}

.role-card.dept-manager .role-header {
  background: linear-gradient(135deg, #67c23a 0%, #e6a23c 100%);
}

.role-card.sales .role-header {
  background: linear-gradient(135deg, #409eff 0%, #909399 100%);
}

.role-card.customer-service .role-header {
  background: linear-gradient(135deg, #909399 0%, #606266 100%);
}
</style>
