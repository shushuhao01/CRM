# 云客CRM官网购买与开通方案

## 一、产品版本定位

### 1.1 版本对比

| 特性 | SaaS云端版 | 私有部署版 |
|------|-----------|-----------|
| 部署方式 | 云端托管，即开即用 | 客户自有服务器部署 |
| 数据存储 | 云端（多租户隔离） | 客户本地服务器 |
| 付费模式 | 按月/年订阅 | 一次性买断 |
| 适合客户 | 中小企业、快速启动 | 大企业、数据敏感行业 |
| 维护责任 | 平台负责 | 客户自行或购买服务 |
| 定制开发 | 不支持 | 支持（额外付费） |

### 1.2 SaaS云端版套餐

| 套餐 | 价格 | 用户数 | 存储 | 功能 |
|------|------|--------|------|------|
| 基础版 | ¥99/月 | 10人 | 5GB | 客户管理、订单管理、基础报表 |
| 专业版 | ¥299/月 | 50人 | 50GB | +物流管理、高级报表、API接口 |
| 企业版 | ¥599/月 | 200人 | 200GB | +全部功能、专属客服、优先支持 |

### 1.3 私有部署版套餐

| 套餐 | 价格 | 授权 | 服务 |
|------|------|------|------|
| 标准版 | ¥9,800 | 永久授权，50用户 | 部署文档、1年免费升级 |
| 专业版 | ¥19,800 | 永久授权，200用户 | +远程部署协助、1年技术支持 |
| 企业版 | ¥39,800 | 永久授权，不限用户 | +定制开发、专属技术顾问 |

---

## 二、官网页面规划

### 2.1 页面结构

```
官网 (www.yunke-crm.com)
├── 首页
│   ├── 产品亮点展示
│   ├── 客户案例
│   └── 立即体验入口
│
├── 产品介绍
│   ├── 功能特性
│   ├── 版本对比
│   └── 演示视频
│
├── 价格方案
│   ├── SaaS云端版套餐
│   ├── 私有部署版套餐
│   └── 在线购买入口
│
├── 解决方案
│   ├── 电销行业
│   ├── 电商行业
│   └── 服务行业
│
├── 帮助中心
│   ├── 使用文档
│   ├── 常见问题
│   ├── 部署指南（私有部署）
│   └── API文档
│
├── 关于我们
│   ├── 公司介绍
│   ├── 联系方式
│   └── 加入我们
│
└── 用户入口
    ├── 登录（SaaS用户）
    ├── 注册/购买
    └── 客户中心（已购用户）
```

### 2.2 核心页面设计

#### 首页
- Hero区：一句话价值主张 + 立即体验按钮
- 功能亮点：4-6个核心功能卡片
- 客户评价：真实客户案例
- 数据展示：服务客户数、处理订单数等
- CTA区：免费试用 / 立即购买

#### 价格页面
- 套餐对比表格
- 功能清单勾选
- 常见问题FAQ
- 在线咨询入口

---

## 三、购买流程设计

### 3.1 SaaS云端版购买流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         SaaS云端版购买流程                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ① 选择套餐                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  [基础版 ¥99/月]  [专业版 ¥299/月 推荐]  [企业版 ¥599/月]           │   │
│  │                                                                     │   │
│  │  购买时长：[1个月] [3个月 9折] [6个月 8.5折] [1年 8折]              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    ↓                                        │
│  ② 填写注册信息                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  企业名称：[                    ] *                                  │   │
│  │  联 系 人：[                    ] *                                  │   │
│  │  手 机 号：[           ] [获取验证码] *                              │   │
│  │  验 证 码：[      ] *                                                │   │
│  │  邮    箱：[                    ]                                    │   │
│  │  □ 我已阅读并同意《服务协议》和《隐私政策》                          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    ↓                                        │
│  ③ 确认订单                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  订单信息                                                            │   │
│  │  ├─ 套餐：专业版                                                     │   │
│  │  ├─ 时长：1年                                                        │   │
│  │  ├─ 原价：¥3,588                                                     │   │
│  │  ├─ 折扣：8折                                                        │   │
│  │  └─ 实付：¥2,870                                                     │   │
│  │                                                                     │   │
│  │  [微信支付]  [支付宝]                                                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    ↓                                        │
│  ④ 支付完成                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  🎉 购买成功！                                                       │   │
│  │                                                                     │   │
│  │  您的租户授权码：TENANT-A1B2-C3D4-E5F6-G7H8                         │   │
│  │  （已发送至您的手机 138****8000）                                    │   │
│  │                                                                     │   │
│  │  [复制授权码]  [登录CRM系统]                                         │   │
│  │                                                                     │   │
│  │  首次登录说明：                                                      │   │
│  │  1. 点击"登录CRM系统"跳转到登录页                                   │   │
│  │  2. 点击授权码图标，选择"SaaS租户"                                  │   │
│  │  3. 输入您的租户授权码                                               │   │
│  │  4. 使用默认管理员账号登录（admin/admin123）                         │   │
│  │  5. 登录后请立即修改密码                                             │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 私有部署版购买流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         私有部署版购买流程                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ① 选择套餐                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  [标准版 ¥9,800]  [专业版 ¥19,800 推荐]  [企业版 ¥39,800]           │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    ↓                                        │
│  ② 填写信息（同SaaS）                                                       │
│                                    ↓                                        │
│  ③ 支付完成                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  🎉 购买成功！                                                       │   │
│  │                                                                     │   │
│  │  您的系统授权码：PRIV-X1Y2-Z3A4-B5C6-D7E8                           │   │
│  │  （已发送至您的手机和邮箱）                                          │   │
│  │                                                                     │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  接下来您需要：                                              │   │   │
│  │  │                                                              │   │   │
│  │  │  1️⃣ 下载安装包                                               │   │   │
│  │  │     [下载 Linux版] [下载 Windows版] [下载 Docker版]          │   │   │
│  │  │                                                              │   │   │
│  │  │  2️⃣ 查看部署文档                                             │   │   │
│  │  │     [部署指南] [环境要求] [常见问题]                          │   │   │
│  │  │                                                              │   │   │
│  │  │  3️⃣ 部署完成后                                               │   │   │
│  │  │     访问您的系统地址，输入授权码激活                          │   │   │
│  │  │                                                              │   │   │
│  │  │  4️⃣ 需要帮助？                                               │   │   │
│  │  │     [在线客服] [提交工单] [预约远程协助]                      │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  │                                                                     │   │
│  │  [进入客户中心]  [查看部署文档]                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 四、客户中心设计

购买成功后，客户可以登录"客户中心"管理自己的订阅和服务：

### 4.1 客户中心功能

```
客户中心 (my.yunke-crm.com)
├── 概览
│   ├── 当前套餐信息
│   ├── 到期时间提醒
│   └── 快捷操作入口
│
├── 我的订阅（SaaS用户）
│   ├── 当前套餐详情
│   ├── 续费/升级
│   ├── 用户数扩容
│   └── 发票申请
│
├── 我的授权（私有部署用户）
│   ├── 授权码信息
│   ├── 授权状态
│   ├── 续费维护服务
│   └── 下载安装包
│
├── 订单记录
│   ├── 购买记录
│   ├── 支付凭证
│   └── 发票管理
│
├── 技术支持
│   ├── 提交工单
│   ├── 工单记录
│   ├── 在线客服
│   └── 预约远程协助
│
├── 文档中心
│   ├── 使用手册
│   ├── 部署指南
│   ├── API文档
│   └── 视频教程
│
└── 账号设置
    ├── 基本信息
    ├── 修改密码
    └── 通知设置
```

### 4.2 SaaS用户专属功能

- **一键登录**：直接跳转到CRM系统，自动带上租户信息
- **续费提醒**：到期前30/15/7/3/1天提醒
- **套餐升级**：在线升级到更高套餐，差价补齐
- **用户扩容**：临时增加用户数

### 4.3 私有部署用户专属功能

- **安装包下载**：各版本安装包、升级包
- **部署文档**：详细的部署指南
- **远程协助**：预约技术人员远程协助部署
- **维护服务**：购买/续费年度维护服务

---

## 五、技术支持服务

### 5.1 支持渠道

| 渠道 | 响应时间 | 适用场景 |
|------|---------|---------|
| 在线文档 | 即时 | 自助查询、常见问题 |
| 在线客服 | 5分钟内 | 售前咨询、简单问题 |
| 工单系统 | 24小时内 | 技术问题、Bug反馈 |
| 电话支持 | 即时 | 紧急问题（企业版专享） |
| 远程协助 | 预约 | 部署协助、复杂问题 |

### 5.2 服务等级

| 服务 | 基础版 | 专业版 | 企业版 |
|------|--------|--------|--------|
| 在线文档 | ✅ | ✅ | ✅ |
| 在线客服 | ✅ | ✅ | ✅ |
| 工单支持 | 48小时响应 | 24小时响应 | 4小时响应 |
| 电话支持 | ❌ | 工作日 | 7×24小时 |
| 远程协助 | ❌ | 2次/年 | 不限次数 |
| 专属客服 | ❌ | ❌ | ✅ |

---

## 六、后台管理同步

### 6.1 数据流转

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           数据流转示意图                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   官网注册                     支付回调                    管理后台          │
│  ┌─────────┐               ┌─────────┐               ┌─────────────┐       │
│  │ 客户填写 │──创建客户──→│ 支付成功 │──自动创建──→│ 客户管理     │       │
│  │ 注册信息 │              │ 回调处理 │              │ ├─ 客户列表  │       │
│  └─────────┘              └─────────┘              │ └─ 客户详情  │       │
│                                │                    └─────────────┘       │
│                                │                                           │
│                                ├──创建订单──→ 订单管理                      │
│                                │              ├─ 订单列表                   │
│                                │              └─ 支付记录                   │
│                                │                                           │
│                    ┌──────────┴──────────┐                                │
│                    │                      │                                │
│               SaaS版本              私有部署版本                            │
│                    │                      │                                │
│                    ↓                      ↓                                │
│            ┌─────────────┐        ┌─────────────┐                         │
│            │ 自动创建租户 │        │ 自动创建授权 │                         │
│            │ 生成租户授权码│        │ 生成系统授权码│                         │
│            └─────────────┘        └─────────────┘                         │
│                    │                      │                                │
│                    ↓                      ↓                                │
│            ┌─────────────┐        ┌─────────────┐                         │
│            │ 租户管理     │        │ 授权管理     │                         │
│            │ ├─ 租户列表  │        │ ├─ 授权列表  │                         │
│            │ └─ 授权状态  │        │ └─ 激活状态  │                         │
│            └─────────────┘        └─────────────┘                         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6.2 管理后台新增功能

#### 客户管理
- 客户列表：所有注册客户
- 客户详情：联系信息、购买记录、服务记录
- 客户标签：按来源、套餐、状态分类

#### 订单管理
- 订单列表：所有购买订单
- 订单详情：套餐、金额、支付状态
- 退款处理：退款申请审核

#### 工单管理
- 工单列表：客户提交的技术支持工单
- 工单处理：分配、回复、关闭
- 工单统计：响应时间、满意度

---

## 七、数据库设计

### 7.1 新增表

```sql
-- 官网注册客户表
CREATE TABLE website_customers (
  id VARCHAR(36) PRIMARY KEY,
  company_name VARCHAR(200) NOT NULL,      -- 企业名称
  contact_name VARCHAR(100) NOT NULL,      -- 联系人
  phone VARCHAR(20) NOT NULL,              -- 手机号
  email VARCHAR(100),                      -- 邮箱
  password VARCHAR(255),                   -- 客户中心密码
  source VARCHAR(50) DEFAULT 'website',    -- 来源：website/referral/sales
  status VARCHAR(20) DEFAULT 'active',     -- 状态
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 购买订单表
CREATE TABLE purchase_orders (
  id VARCHAR(36) PRIMARY KEY,
  order_no VARCHAR(50) NOT NULL UNIQUE,    -- 订单号
  customer_id VARCHAR(36) NOT NULL,        -- 客户ID
  product_type VARCHAR(20) NOT NULL,       -- 产品类型：saas/private
  package_id VARCHAR(36),                  -- 套餐ID
  package_name VARCHAR(100),               -- 套餐名称
  duration_months INT DEFAULT 1,           -- 购买时长（月）
  original_price DECIMAL(10,2),            -- 原价
  discount_rate DECIMAL(5,2) DEFAULT 1.00, -- 折扣率
  actual_price DECIMAL(10,2) NOT NULL,     -- 实付金额
  status VARCHAR(20) DEFAULT 'pending',    -- 状态：pending/paid/cancelled/refunded
  paid_at DATETIME,                        -- 支付时间
  expire_at DATE,                          -- 到期时间
  tenant_id VARCHAR(36),                   -- 关联租户ID（SaaS）
  license_id VARCHAR(36),                  -- 关联授权ID（私有部署）
  remark TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 支付流水表
CREATE TABLE payment_transactions (
  id VARCHAR(36) PRIMARY KEY,
  order_id VARCHAR(36) NOT NULL,           -- 订单ID
  transaction_no VARCHAR(100),             -- 支付平台交易号
  pay_type VARCHAR(20) NOT NULL,           -- 支付方式：wechat/alipay
  amount DECIMAL(10,2) NOT NULL,           -- 金额
  status VARCHAR(20) DEFAULT 'pending',    -- 状态：pending/success/failed/refunded
  pay_time DATETIME,                       -- 支付时间
  refund_time DATETIME,                    -- 退款时间
  refund_amount DECIMAL(10,2),             -- 退款金额
  raw_data TEXT,                           -- 原始回调数据
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 技术支持工单表
CREATE TABLE support_tickets (
  id VARCHAR(36) PRIMARY KEY,
  ticket_no VARCHAR(50) NOT NULL UNIQUE,   -- 工单号
  customer_id VARCHAR(36) NOT NULL,        -- 客户ID
  title VARCHAR(200) NOT NULL,             -- 标题
  content TEXT NOT NULL,                   -- 内容
  category VARCHAR(50),                    -- 分类：bug/question/feature/other
  priority VARCHAR(20) DEFAULT 'normal',   -- 优先级：low/normal/high/urgent
  status VARCHAR(20) DEFAULT 'open',       -- 状态：open/processing/resolved/closed
  assignee_id VARCHAR(36),                 -- 处理人ID
  resolved_at DATETIME,                    -- 解决时间
  closed_at DATETIME,                      -- 关闭时间
  satisfaction INT,                        -- 满意度评分 1-5
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 工单回复表
CREATE TABLE ticket_replies (
  id VARCHAR(36) PRIMARY KEY,
  ticket_id VARCHAR(36) NOT NULL,
  reply_type VARCHAR(20) DEFAULT 'staff',  -- 回复类型：customer/staff
  content TEXT NOT NULL,
  attachments TEXT,                        -- 附件JSON
  created_by VARCHAR(36),
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

---

## 八、支付集成

### 8.1 支持的支付方式

| 支付方式 | 场景 | 接入方式 |
|---------|------|---------|
| 微信支付 | PC扫码、H5 | Native支付、JSAPI |
| 支付宝 | PC扫码、H5 | 电脑网站支付、手机网站支付 |

### 8.2 支付流程

```
1. 创建订单 → 生成订单号
2. 调用支付接口 → 获取支付二维码/链接
3. 用户支付 → 支付平台回调
4. 验证签名 → 更新订单状态
5. 自动开通 → 创建租户/授权
6. 发送通知 → 短信/邮件
```

### 8.3 回调处理

```javascript
// 支付成功回调处理
async function handlePaymentSuccess(order) {
  // 1. 更新订单状态
  order.status = 'paid'
  order.paid_at = new Date()
  
  // 2. 根据产品类型创建资源
  if (order.product_type === 'saas') {
    // 创建租户
    const tenant = await createTenant({
      name: order.customer.company_name,
      packageId: order.package_id,
      maxUsers: order.package.max_users,
      expireDate: order.expire_at
    })
    order.tenant_id = tenant.id
    
    // 创建默认管理员
    await createDefaultAdmin(tenant.id)
    
  } else {
    // 创建私有部署授权
    const license = await createLicense({
      customerName: order.customer.company_name,
      licenseType: 'perpetual',
      maxUsers: order.package.max_users
    })
    order.license_id = license.id
  }
  
  // 3. 发送通知
  await sendSMS(order.customer.phone, {
    template: 'PURCHASE_SUCCESS',
    params: {
      licenseKey: order.tenant?.license_key || order.license?.license_key
    }
  })
  
  await sendEmail(order.customer.email, {
    template: 'purchase_success',
    data: order
  })
}
```

---

## 九、开发计划

### 第一阶段：基础框架（1周）
- [ ] 官网项目初始化（Vue3 + Vite）
- [ ] 页面路由和布局
- [ ] 首页、产品介绍页
- [ ] 价格页面

### 第二阶段：注册购买（1周）
- [ ] 注册页面和API
- [ ] 短信验证码
- [ ] 订单创建
- [ ] 支付集成（微信、支付宝）

### 第三阶段：自动开通（3天）
- [ ] 支付回调处理
- [ ] 自动创建租户/授权
- [ ] 通知发送（短信、邮件）

### 第四阶段：客户中心（1周）
- [ ] 客户登录
- [ ] 订阅管理
- [ ] 订单记录
- [ ] 工单系统

### 第五阶段：管理后台（3天）
- [ ] 客户管理页面
- [ ] 订单管理页面
- [ ] 工单管理页面

---

## 十、技术栈建议

### 官网前端
- Vue 3 + TypeScript
- Vite
- TailwindCSS（适合营销页面）
- GSAP（动画效果）

### 客户中心
- 可复用管理后台代码
- Element Plus

### 后端API
- 复用现有后端框架
- 新增官网相关路由模块

---

## 十一、域名规划

| 域名 | 用途 |
|------|------|
| www.yunke-crm.com | 官网 |
| app.yunke-crm.com | SaaS版CRM系统 |
| my.yunke-crm.com | 客户中心 |
| admin.yunke-crm.com | 平台管理后台 |
| api.yunke-crm.com | API服务 |
| docs.yunke-crm.com | 文档中心 |
