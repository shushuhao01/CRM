# 图片预览功能说明

## 功能特性

### 1. 打开预览
- 点击缩略图即可放大查看
- 图片居中显示，最大90%屏幕尺寸
- 黑色半透明背景（90%透明度）

### 2. 关闭预览（3种方式）

#### 方式1：点击关闭按钮
- 右上角有一个圆形关闭按钮（✕）
- 鼠标悬停时会放大并高亮
- 点击即可关闭预览

#### 方式2：点击背景
- 点击图片外的黑色背景区域
- 自动关闭预览返回表单

#### 方式3：按ESC键
- 按键盘上的 `Escape` 键
- 快速关闭预览

### 3. 视觉效果
- 淡入淡出动画（300ms）
- 图片带圆角和阴影
- 关闭按钮悬停效果
- 流畅的交互体验

## 使用场景

### 申请页面
1. 上传尾款凭证后
2. 点击缩略图查看大图
3. 确认图片清晰度
4. 关闭返回继续填写表单

### 审核页面
1. 查看申请详情
2. 点击尾款凭证查看大图
3. 仔细核对转账信息
4. 关闭返回审核

## 技术实现

### 关闭按钮样式
```css
- 位置：右上角 (top: 20px, right: 20px)
- 尺寸：40x40px
- 背景：半透明白色
- 图标：✕ (24px)
- 悬停：放大1.1倍 + 背景变亮
```

### 交互逻辑
```typescript
1. 创建全屏遮罩层
2. 添加关闭按钮和图片
3. 绑定3种关闭方式的事件
4. 淡入显示
5. 关闭时淡出并移除DOM
```

### 键盘事件
- 监听 `Escape` 键
- 关闭后自动移除事件监听
- 避免内存泄漏

## 优化细节

1. **动画流畅**：使用CSS transition实现淡入淡出
2. **防止误触**：点击图片本身不会关闭
3. **视觉反馈**：关闭按钮有悬停效果
4. **键盘友好**：支持ESC键快速关闭
5. **内存管理**：关闭后清理事件监听器

## 测试步骤

### 测试1：点击关闭按钮
1. 上传图片
2. 点击缩略图
3. 点击右上角的 ✕ 按钮
4. ✅ 预览关闭，返回表单

### 测试2：点击背景关闭
1. 打开图片预览
2. 点击图片外的黑色区域
3. ✅ 预览关闭

### 测试3：ESC键关闭
1. 打开图片预览
2. 按键盘 `Escape` 键
3. ✅ 预览关闭

### 测试4：悬停效果
1. 打开图片预览
2. 鼠标移到关闭按钮上
3. ✅ 按钮放大并变亮

### 测试5：点击图片
1. 打开图片预览
2. 点击图片本身
3. ✅ 预览不关闭（只有点击背景才关闭）

## 浏览器兼容性

- ✅ Chrome/Edge (推荐)
- ✅ Firefox
- ✅ Safari
- ✅ 移动端浏览器

## 相关文件

- `src/views/Finance/MyCodApplication.vue` - 申请页面（已更新）
- `src/views/Finance/CodApplicationReview.vue` - 审核页面（使用Element Plus的图片预览）

## 注意事项

1. **审核页面**：审核页面使用的是Element Plus的 `<el-image>` 组件，已经内置了预览功能
2. **申请页面**：申请页面使用自定义预览，提供更好的控制和体验
3. **图片加载**：大图加载时会有短暂延迟，这是正常现象

## 未来优化方向

1. 添加图片缩放功能（放大/缩小）
2. 支持左右切换查看多张图片
3. 添加图片旋转功能
4. 显示图片序号（1/5）
5. 添加下载按钮
