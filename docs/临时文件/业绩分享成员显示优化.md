# 业绩分享成员显示优化

## 优化时间
2026-02-27

## 优化内容

### 1. 分享成员显示添加金额
**问题**: 分享成员只显示姓名和百分比,不够直观

**修改**: 在百分比前添加分享金额显示

**显示格式**:
- 修改前: `张三 (30%)`
- 修改后: `张三 ¥450 (30%)`

**代码实现**:
```vue
<el-tag
  v-for="member in row.shareMembers"
  :key="member.userId"
  size="small"
  :type="member.userId === userStore.currentUser?.id ? 'success' : 'info'"
  style="margin-right: 5px; margin-bottom: 4px"
>
  {{ member.userName }} ¥{{ (member.shareAmount || 0).toLocaleString() }} ({{ member.percentage }}%)
</el-tag>
```

**列宽调整**:
- 从 `min-width="250"` 增加到 `min-width="300"`
- 添加 `margin-bottom: 4px` 以支持多行显示

### 2. 统一容器背景色
**问题**: 页面背景使用渐变色,与其他页面不统一

**修改**: 将背景改为统一的浅灰色

```css
/* 修改前 */
.performance-share {
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
}

/* 修改后 */
.performance-share {
  background: #f5f7fa;
}
```

### 3. 翻页控件始终显示
**问题**: 翻页控件在某些情况下不显示

**修改**: 移除显示条件,始终显示翻页控件

```vue
<!-- 修改前 -->
<div class="pagination-wrapper" v-if="totalRecords > 0 || !loading">
  <el-pagination ... />
</div>

<!-- 修改后 -->
<div class="pagination-wrapper">
  <el-pagination ... />
</div>
```

**说明**: 即使没有数据,翻页控件也会显示"共 0 条",这样用户可以清楚地知道当前没有记录。

## 数据来源

### 后端API返回的成员数据结构
```json
{
  "id": "member_id",
  "userId": "user_id",
  "userName": "张三",
  "department": "销售部",
  "percentage": 30,
  "shareAmount": 450,
  "status": "active"
}
```

### 金额计算
- `shareAmount` 字段由后端计算并返回
- 计算公式: `shareAmount = orderAmount * (percentage / 100)`
- 前端使用 `toLocaleString()` 格式化显示,添加千分位分隔符

## 视觉效果

### 分享成员标签示例
```
张三 ¥450 (30%)  李四 ¥300 (20%)  王五 ¥750 (50%)
```

### 标签颜色
- 当前用户: 绿色 (success)
- 其他成员: 灰色 (info)

### 标签间距
- 水平间距: 5px
- 垂直间距: 4px (支持多行换行)

## 文件修改
- `src/views/Performance/Share.vue`

## 测试建议
1. 验证分享成员是否显示金额
2. 检查金额格式是否正确(千分位分隔符)
3. 确认百分比显示在金额后面
4. 验证当前用户的标签是否为绿色
5. 检查页面背景色是否为统一的浅灰色
6. 确认翻页控件始终显示
7. 测试没有数据时翻页控件显示"共 0 条"
8. 验证多个成员时标签是否正确换行
