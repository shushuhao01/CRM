# 业绩分享页面交互优化

## 优化时间
2026-02-27

## 优化内容

### 1. 清除表格背景淡绿色
**问题**: 表格行 hover 时显示淡绿色背景 (#f0f9ff)

**修改**: 将 hover 背景色改为中性灰色
```css
:deep(.table-row-even:hover),
:deep(.table-row-odd:hover) {
  background-color: #f5f7fa !important;  /* 从 #f0f9ff 改为 #f5f7fa */
  transform: scale(1.002);  /* 从 1.005 改为 1.002，减少缩放效果 */
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);  /* 减弱阴影效果 */
  cursor: pointer;
}
```

### 2. 移除点击记录提示
**问题**: 点击表格行时弹出提示"点击了分享记录: XXX"

**修改**: 移除 ElMessage 提示
```typescript
const handleRowClick = (row: unknown) => {
  // 移除点击提示,保持静默
  // 如果需要跳转到详情页,可以在这里添加逻辑
}
```

### 3. 调整分页默认设置
**问题**: 默认每页显示20条记录

**修改**: 改为默认每页10条
```typescript
const pageSize = ref(10)  // 从 20 改为 10
```

### 4. 确保分页控件显示
**问题**: 当没有数据时分页控件可能不显示

**修改**: 添加显示条件
```vue
<div class="pagination-wrapper" v-if="totalRecords > 0 || !loading">
  <el-pagination ... />
</div>
```

## 分页功能说明

### 前端实现
- 默认每页: 10条
- 可选每页: 10, 20, 50, 100条
- 支持功能:
  - 总记录数显示
  - 每页条数切换
  - 上一页/下一页
  - 页码跳转
  - 快速跳转输入框

### 后端API支持
后端 `/api/v1/performance/shares` 已支持分页参数:
- `page`: 页码 (默认1)
- `limit`: 每页条数 (默认10)
- `status`: 状态筛选
- `userId`: 用户ID筛选
- `orderId`: 订单ID筛选

返回数据结构:
```json
{
  "success": true,
  "data": {
    "shares": [...],
    "total": 100,
    "page": 1,
    "limit": 10
  }
}
```

### 分页交互流程
1. 用户切换页码 → 触发 `handleCurrentChange` → 调用 `loadShareRecords()`
2. 用户切换每页条数 → 触发 `handleSizeChange` → 重置到第1页 → 调用 `loadShareRecords()`
3. 用户筛选状态/日期 → 监听器触发 → 重置到第1页 → 调用 `loadShareRecords()`
4. 用户搜索订单号 → 重置到第1页 → 调用 `loadShareRecords()`

## 文件修改
- `src/views/Performance/Share.vue`

## 测试建议
1. 验证表格 hover 效果是否为中性灰色
2. 点击表格行确认不再弹出提示
3. 确认分页控件显示且默认为10条/页
4. 测试切换每页条数功能
5. 测试页码跳转功能
6. 验证筛选条件改变时是否重置到第1页
7. 确认后端API正确返回分页数据
