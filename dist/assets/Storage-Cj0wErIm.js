import{l,r as e,b as s,m as t,q as a,p as o,T as r,F as n,a9 as c}from"./vendor-BtukhyiH.js";import{_ as u}from"./index-DkAJPKqn.js";import"./elementPlus-DxaqjplL.js";import"./utils-DfI7e5Rl.js";const i={class:"storage-debug"},g={class:"section"},m={class:"storage-info"},v={class:"section"},d={class:"storage-info"},p={class:"section"},S=u(l({__name:"Storage",setup(l){const u=e([]),S=e([]),_=e([]),f=()=>{try{const l=localStorage.getItem("crm_customers_unified");if(l){const e=JSON.parse(l);u.value=e.customers||[]}else u.value=[]}catch(l){console.error("解析统一存储数据失败:",l),u.value=[]}try{const l=localStorage.getItem("crm_store_customer");S.value=l?JSON.parse(l):[]}catch(l){console.error("解析旧版存储数据失败:",l),S.value=[]}_.value=[];for(let e=0;e<localStorage.length;e++){const l=localStorage.key(e);l&&_.value.push(l)}},h=()=>{confirm("确定要清空所有localStorage数据吗？")&&(localStorage.clear(),f())};return s(()=>{f()}),(l,e)=>(a(),t("div",i,[e[4]||(e[4]=o("h2",null,"存储调试页面",-1)),o("div",{class:"section"},[e[0]||(e[0]=o("h3",null,"localStorage 数据检查",-1)),o("button",{onClick:f,class:"btn"},"刷新存储数据"),o("button",{onClick:h,class:"btn btn-danger"},"清空所有存储")]),o("div",g,[e[1]||(e[1]=o("h4",null,"统一客户存储 (crm_customers_unified)",-1)),o("div",m,[o("p",null,"客户数量: "+r(u.value.length),1),o("pre",null,r(JSON.stringify(u.value,null,2)),1)])]),o("div",v,[e[2]||(e[2]=o("h4",null,"旧版客户存储 (crm_store_customer)",-1)),o("div",d,[o("p",null,"客户数量: "+r(S.value.length),1),o("pre",null,r(JSON.stringify(S.value,null,2)),1)])]),o("div",p,[e[3]||(e[3]=o("h4",null,"所有 localStorage 键",-1)),o("ul",null,[(a(!0),t(n,null,c(_.value,l=>(a(),t("li",{key:l},r(l)+" ("+r((l=>{const e=localStorage.getItem(l);return e?new Blob([e]).size:0})(l))+" bytes) ",1))),128))])])]))}}),[["__scopeId","data-v-543d22ca"]]);export{S as default};
