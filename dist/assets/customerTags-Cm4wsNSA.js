var m=Object.defineProperty,y=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var f=(e,s,t)=>s in e?m(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,d=(e,s)=>{for(var t in s||(s={}))I.call(s,t)&&f(e,t,s[t]);if(i)for(var t of i(s))N.call(s,t)&&f(e,t,s[t]);return e},S=(e,s)=>y(e,T(s));var n=(e,s,t)=>new Promise((c,a)=>{var r=o=>{try{u(t.next(o))}catch(g){a(g)}},l=o=>{try{u(t.throw(o))}catch(g){a(g)}},u=o=>o.done?c(o.value):Promise.resolve(o.value).then(r,l);u((t=t.apply(e,s)).next())});import"./settings-CuxbDWOu.js";const O={getList:e=>n(void 0,null,function*(){try{const s=localStorage.getItem("customer_tags");let c=s?JSON.parse(s):[];e!=null&&e.name&&(c=c.filter(g=>g.name.toLowerCase().includes(e.name.toLowerCase()))),e!=null&&e.status&&(c=c.filter(g=>g.status===e.status));const a=(e==null?void 0:e.page)||1,r=(e==null?void 0:e.pageSize)||20,l=(a-1)*r,u=l+r;return{data:{list:c.slice(l,u),total:c.length,page:a,pageSize:r},code:200,message:"success",success:!0}}catch(s){return console.error("获取标签列表失败:",s),{data:{list:[],total:0,page:1,pageSize:20},code:500,message:"获取标签列表失败",success:!1}}}),create:e=>n(void 0,null,function*(){try{const s=localStorage.getItem("customer_tags"),t=s?JSON.parse(s):[],c=S(d({},e),{id:Date.now().toString(),createTime:new Date().toLocaleString("zh-CN"),customerCount:0});return t.unshift(c),localStorage.setItem("customer_tags",JSON.stringify(t)),{data:c,code:200,message:"success",success:!0}}catch(s){return console.error("创建标签失败:",s),{data:null,code:500,message:"创建标签失败",success:!1}}}),update:(e,s)=>n(void 0,null,function*(){try{const t=localStorage.getItem("customer_tags"),c=t?JSON.parse(t):[],a=c.findIndex(r=>r.id===e);return a===-1?{data:null,code:404,message:"标签不存在",success:!1}:(c[a]=d(d({},c[a]),s),localStorage.setItem("customer_tags",JSON.stringify(c)),{data:c[a],code:200,message:"success",success:!0})}catch(t){return console.error("更新标签失败:",t),{data:null,code:500,message:"更新标签失败",success:!1}}}),delete:e=>n(void 0,null,function*(){try{const s=localStorage.getItem("customer_tags"),c=(s?JSON.parse(s):[]).filter(a=>a.id!==e);return localStorage.setItem("customer_tags",JSON.stringify(c)),{data:null,code:200,message:"success",success:!0}}catch(s){return console.error("删除标签失败:",s),{data:null,code:500,message:"删除标签失败",success:!1}}}),getDetail:e=>n(void 0,null,function*(){try{const s=localStorage.getItem("customer_tags"),c=(s?JSON.parse(s):[]).find(a=>a.id===e);return c?{data:c,code:200,message:"success",success:!0}:{data:null,code:404,message:"标签不存在",success:!1}}catch(s){return console.error("获取标签详情失败:",s),{data:null,code:500,message:"获取标签详情失败",success:!1}}}),getActiveList:()=>n(void 0,null,function*(){try{const e=localStorage.getItem("customer_tags");return{data:(e?JSON.parse(e):[]).filter(c=>c.status==="active"),code:200,message:"success",success:!0}}catch(e){return console.error("获取启用标签列表失败:",e),{data:[],code:500,message:"获取启用标签列表失败",success:!1}}})};export{O as c};
