var Xe=Object.defineProperty,el=Object.defineProperties;var ll=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var tl=Object.prototype.hasOwnProperty,al=Object.prototype.propertyIsEnumerable;var pe=(C,c,_)=>c in C?Xe(C,c,{enumerable:!0,configurable:!0,writable:!0,value:_}):C[c]=_,H=(C,c)=>{for(var _ in c||(c={}))tl.call(c,_)&&pe(C,_,c[_]);if(ve)for(var _ of ve(c))al.call(c,_)&&pe(C,_,c[_]);return C},Q=(C,c)=>el(C,ll(c));var S=(C,c,_)=>new Promise((j,M)=>{var I=b=>{try{P(_.next(b))}catch(D){M(D)}},N=b=>{try{P(_.throw(b))}catch(D){M(D)}},P=b=>b.done?j(b.value):Promise.resolve(b.value).then(I,N);P((_=_.apply(C,c)).next())});import{u as ol}from"./call-C9NCWzRc.js";import{l as sl,az as nl,r as w,Z as X,c as il,ag as p,aq as dl,m as L,p as U,q as a,Q as fe,U as e,S as i,O as t,u as r,T as u,P as rl,M as ul,J as cl}from"./vendor-D8Vxqhr-.js";import{c as vl,_ as pl}from"./settings-CuxbDWOu.js";import{m as fl}from"./phone-DsAzMHsn.js";import{j as ee,n as le,C as ml,r as _l,aK as gl,al as bl,ai as yl,I as wl,s as hl,a9 as me,p as Cl,f as kl,t as _e,T as Vl,aE as xl,a7 as zl,d as Rl,K as Sl,aL as ql,a8 as Ml,E as m,b as ge}from"./elementPlus-Bmwh7Rh8.js";import"./utils-ywHRn0uI.js";const Dl={class:"recording-management"},Tl={class:"page-header"},$l={class:"header-content"},Pl={class:"page-title"},Ul={class:"header-actions"},Il={class:"overview-section"},Nl={class:"overview-content"},El={class:"overview-icon total"},Bl={class:"overview-info"},Fl={class:"overview-value"},Ll={class:"overview-change"},Yl={class:"change-text"},Hl={class:"overview-content"},Ql={class:"overview-icon today"},jl={class:"overview-info"},Wl={class:"overview-value"},Al={class:"overview-change"},Ol={class:"change-text positive"},Kl={class:"overview-content"},Gl={class:"overview-icon duration"},Jl={class:"overview-info"},Zl={class:"overview-value"},Xl={class:"overview-change"},et={class:"change-text"},lt={class:"overview-content"},tt={class:"overview-icon quality"},at={class:"overview-info"},ot={class:"overview-value"},st={class:"overview-change"},nt={class:"change-text"},it={class:"search-section"},dt={key:0,class:"player-section"},rt={class:"player-header"},ut={class:"audio-player"},ct=["src"],vt={class:"player-info"},pt={class:"player-details"},ft={class:"detail-item"},mt={class:"detail-value"},_t={class:"detail-item"},gt={class:"detail-value"},bt={class:"detail-item"},yt={class:"detail-value"},wt={class:"detail-item"},ht={class:"player-actions"},Ct={class:"table-section"},kt={class:"table-header"},Vt={class:"table-actions"},xt={key:0,class:"quality-info"},zt={class:"quality-text"},Rt={key:1,style:{color:"#C0C4CC"}},St={class:"pagination-wrapper"},qt={key:0,class:"waveform-container"},Mt={class:"waveform-header"},Dt={class:"waveform-controls"},Tt={class:"waveform-placeholder"},$t={class:"waveform-info"},Pt={class:"info-item"},Ut={class:"info-value"},It={class:"info-item"},Nt={class:"info-value"},Et={class:"info-item"},Bt={class:"info-value"},Ft=sl({__name:"RecordingManagement",setup(C){const c=ol(),_=nl(),j=vl(_),M=w(!1),I=w(!1),N=w(!1),P=w([]),b=w([]),D=w(0),h=w(null),x=w(null),W=w(!1),E=w(!1),A=w(),O=w(),z=w({totalRecordings:0,todayRecordings:0,todayIncrease:0,totalSize:0,totalDuration:0,avgDuration:0,avgQuality:0,highQualityCount:0}),f=X({status:"",quality:"",customerInfo:"",dateRange:[],userId:"",durationRange:""}),R=X({page:1,size:20}),g=X({title:"",description:"",tags:[],qualityScore:0,isPublic:!1}),K=w(),be={title:[{required:!0,message:"请输入录音标题",trigger:"blur"}]},G=o=>new Date(o).toLocaleString("zh-CN"),Y=o=>{if(o<60)return`${o}秒`;const l=Math.floor(o/3600),n=Math.floor(o%3600/60),d=o%60;return l>0?`${l}小时${n}分${d}秒`:`${n}分${d}秒`},te=o=>{if(o===0)return"0 B";const l=1024,n=["B","KB","MB","GB"],d=Math.floor(Math.log(o)/Math.log(l));return parseFloat((o/Math.pow(l,d)).toFixed(2))+" "+n[d]},ye=o=>o<30?"short-duration":o<300?"medium-duration":"long-duration",we=o=>({normal:"success",processing:"warning",corrupted:"danger",deleted:"info"})[o]||"info",he=o=>({normal:"正常",processing:"处理中",corrupted:"损坏",deleted:"已删除"})[o]||"未知",Ce=o=>o>=4?"高质量":o>=3?"中等质量":"低质量",q=()=>S(this,null,function*(){try{M.value=!0;const o=Q(H({page:R.page,size:R.size},f),{startTime:f.dateRange[0],endTime:f.dateRange[1]}),l=yield c.fetchRecordings(o);P.value=l.recordings,D.value=l.total}catch(o){console.error("加载录音列表失败:",o),m.error("加载数据失败")}finally{M.value=!1}}),ae=()=>S(this,null,function*(){try{const o=yield c.fetchRecordingStatistics();z.value=o}catch(o){console.error("加载概览数据失败:",o)}}),oe=()=>{R.page=1,q()},ke=()=>{Object.assign(f,{status:"",quality:"",customerInfo:"",dateRange:[],userId:"",durationRange:""}),oe()},Ve=()=>{q(),ae()},xe=o=>{b.value=o},ze=o=>{R.size=o,q()},Re=o=>{R.page=o,q()},Se=o=>{h.value=o,setTimeout(()=>{const l=document.querySelector(".player-section");l&&l.scrollIntoView({behavior:"smooth"})},100)},qe=()=>{h.value=null,A.value&&A.value.pause()},Me=()=>{console.log("音频加载完成")},De=()=>{},Te=()=>{console.log("音频播放结束")},se=o=>S(this,null,function*(){try{yield c.downloadRecording(o.id),m.success("录音下载成功")}catch(l){console.error("下载录音失败:",l),m.error("下载失败")}}),ne=o=>{m.info("分享功能开发中")},$e=o=>{m.success("已添加到播放列表")},Pe=o=>{x.value=o,W.value=!0,setTimeout(()=>{O.value&&(O.value.innerHTML='<div style="height: 200px; background: linear-gradient(90deg, #409EFF 0%, #67C23A 100%); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white;">波形图显示区域</div>')},1e3)},Ue=()=>{m.info("波形播放功能开发中")},Ie=()=>{m.info("波形暂停功能开发中")},Ne=()=>{m.info("波形重置功能开发中")},Ee=o=>{var l;x.value=o,Object.assign(g,{title:o.title||"",description:o.description||"",tags:o.tags||[],qualityScore:((l=o.quality)==null?void 0:l.score)||0,isPublic:o.isPublic||!1}),E.value=!0},Be=()=>S(this,null,function*(){if(!(!K.value||!x.value))try{yield K.value.validate(),I.value=!0,yield c.updateRecording(x.value.id,{title:g.title,description:g.description,tags:g.tags,quality:Q(H({},x.value.quality),{score:g.qualityScore}),isPublic:g.isPublic}),m.success("录音信息已更新"),E.value=!1,q()}catch(o){console.error("更新录音信息失败:",o),m.error("更新失败")}finally{I.value=!1}}),Fe=o=>{m.info("格式转换功能开发中")},Le=o=>{m.info("质量分析功能开发中")},Ye=o=>S(this,null,function*(){try{yield ge.confirm("确定要删除这个录音吗？删除后无法恢复！","确认删除",{type:"warning"}),yield c.deleteRecording(o.id),m.success("删除成功"),q()}catch(l){l!=="cancel"&&(console.error("删除录音失败:",l),m.error("删除失败"))}}),ie=()=>S(this,null,function*(){try{const o=b.value.map(l=>l.id);yield c.batchDownloadRecordings(o),m.success("批量下载成功")}catch(o){console.error("批量下载失败:",o),m.error("批量下载失败")}}),He=()=>S(this,null,function*(){try{yield ge.confirm(`确定要删除选中的 ${b.value.length} 个录音吗？删除后无法恢复！`,"批量删除",{type:"warning"});const o=b.value.map(l=>l.id);yield c.batchDeleteRecordings(o),m.success("批量删除成功"),q()}catch(o){o!=="cancel"&&(console.error("批量删除失败:",o),m.error("批量删除失败"))}}),Qe=()=>S(this,null,function*(){try{N.value=!0;const o=Q(H({},f),{startTime:f.dateRange[0],endTime:f.dateRange[1]});yield c.exportRecordingList(o),m.success("导出成功")}catch(o){console.error("导出失败:",o),m.error("导出失败")}finally{N.value=!1}}),je=o=>{j.push(`/customer-management/detail/${o}`)};return il(()=>{q(),ae()}),(o,l)=>{const n=p("el-icon"),d=p("el-button"),T=p("el-card"),$=p("el-col"),de=p("el-row"),v=p("el-option"),B=p("el-select"),k=p("el-form-item"),J=p("el-input"),We=p("el-date-picker"),re=p("el-form"),Z=p("el-rate"),V=p("el-table-column"),ue=p("el-tag"),F=p("el-dropdown-item"),Ae=p("el-dropdown-menu"),Oe=p("el-dropdown"),Ke=p("el-table"),Ge=p("el-pagination"),ce=p("el-dialog"),Je=p("el-switch"),Ze=dl("loading");return U(),L("div",Dl,[a("div",Tl,[a("div",$l,[a("h1",Pl,[e(n,null,{default:t(()=>[e(r(ee))]),_:1}),l[19]||(l[19]=i(" 录音管理 ",-1))]),l[20]||(l[20]=a("p",{class:"page-description"},"管理和播放通话录音，支持在线播放、下载和分享",-1))]),a("div",Ul,[e(d,{onClick:ie,disabled:!b.value.length},{default:t(()=>[e(n,null,{default:t(()=>[e(r(le))]),_:1}),l[21]||(l[21]=i(" 批量下载 ",-1))]),_:1},8,["disabled"]),e(d,{onClick:Qe,loading:N.value},{default:t(()=>[e(n,null,{default:t(()=>[e(r(ml))]),_:1}),l[22]||(l[22]=i(" 导出列表 ",-1))]),_:1},8,["loading"]),e(d,{onClick:Ve,loading:M.value},{default:t(()=>[e(n,null,{default:t(()=>[e(r(_l))]),_:1}),l[23]||(l[23]=i(" 刷新 ",-1))]),_:1},8,["loading"])])]),a("div",Il,[e(de,{gutter:20},{default:t(()=>[e($,{span:6},{default:t(()=>[e(T,{class:"overview-card"},{default:t(()=>[a("div",Nl,[a("div",El,[e(n,null,{default:t(()=>[e(r(gl))]),_:1})]),a("div",Bl,[a("div",Fl,u(z.value.totalRecordings||0),1),l[25]||(l[25]=a("div",{class:"overview-label"},"总录音数",-1)),a("div",Ll,[a("span",Yl,u(te(z.value.totalSize||0)),1),l[24]||(l[24]=a("span",{class:"change-label"},"总大小",-1))])])])]),_:1})]),_:1}),e($,{span:6},{default:t(()=>[e(T,{class:"overview-card"},{default:t(()=>[a("div",Hl,[a("div",Ql,[e(n,null,{default:t(()=>[e(r(bl))]),_:1})]),a("div",jl,[a("div",Wl,u(z.value.todayRecordings||0),1),l[27]||(l[27]=a("div",{class:"overview-label"},"今日录音",-1)),a("div",Al,[a("span",Ol,"+"+u(z.value.todayIncrease||0),1),l[26]||(l[26]=a("span",{class:"change-label"},"较昨日",-1))])])])]),_:1})]),_:1}),e($,{span:6},{default:t(()=>[e(T,{class:"overview-card"},{default:t(()=>[a("div",Kl,[a("div",Gl,[e(n,null,{default:t(()=>[e(r(yl))]),_:1})]),a("div",Jl,[a("div",Zl,u(Y(z.value.totalDuration||0)),1),l[29]||(l[29]=a("div",{class:"overview-label"},"总时长",-1)),a("div",Xl,[a("span",et,u(Y(z.value.avgDuration||0)),1),l[28]||(l[28]=a("span",{class:"change-label"},"平均时长",-1))])])])]),_:1})]),_:1}),e($,{span:6},{default:t(()=>[e(T,{class:"overview-card"},{default:t(()=>[a("div",lt,[a("div",tt,[e(n,null,{default:t(()=>[e(r(wl))]),_:1})]),a("div",at,[a("div",ot,u(z.value.avgQuality||0)+"%",1),l[31]||(l[31]=a("div",{class:"overview-label"},"平均质量",-1)),a("div",st,[a("span",nt,u(z.value.highQualityCount||0),1),l[30]||(l[30]=a("span",{class:"change-label"},"高质量录音",-1))])])])]),_:1})]),_:1})]),_:1})]),a("div",it,[e(T,null,{default:t(()=>[e(re,{model:f,inline:""},{default:t(()=>[e(k,{label:"录音状态"},{default:t(()=>[e(B,{modelValue:f.status,"onUpdate:modelValue":l[0]||(l[0]=s=>f.status=s),placeholder:"请选择状态",clearable:"",style:{width:"150px"}},{default:t(()=>[e(v,{label:"全部",value:""}),e(v,{label:"正常",value:"normal"}),e(v,{label:"处理中",value:"processing"}),e(v,{label:"损坏",value:"corrupted"}),e(v,{label:"已删除",value:"deleted"})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"录音质量"},{default:t(()=>[e(B,{modelValue:f.quality,"onUpdate:modelValue":l[1]||(l[1]=s=>f.quality=s),placeholder:"请选择质量",clearable:"",style:{width:"150px"}},{default:t(()=>[e(v,{label:"全部",value:""}),e(v,{label:"高质量",value:"high"}),e(v,{label:"中等质量",value:"medium"}),e(v,{label:"低质量",value:"low"})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"客户信息"},{default:t(()=>[e(J,{modelValue:f.customerInfo,"onUpdate:modelValue":l[2]||(l[2]=s=>f.customerInfo=s),placeholder:"客户姓名/电话",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(k,{label:"录音时间"},{default:t(()=>[e(We,{modelValue:f.dateRange,"onUpdate:modelValue":l[3]||(l[3]=s=>f.dateRange=s),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"320px"}},null,8,["modelValue"])]),_:1}),e(k,{label:"录音人员"},{default:t(()=>[e(B,{modelValue:f.userId,"onUpdate:modelValue":l[4]||(l[4]=s=>f.userId=s),placeholder:"请选择人员",clearable:"",style:{width:"150px"}},{default:t(()=>[e(v,{label:"全部",value:""}),e(v,{label:"张三",value:"1"}),e(v,{label:"李四",value:"2"}),e(v,{label:"王五",value:"3"})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"时长筛选"},{default:t(()=>[e(B,{modelValue:f.durationRange,"onUpdate:modelValue":l[5]||(l[5]=s=>f.durationRange=s),placeholder:"请选择时长",clearable:"",style:{width:"150px"}},{default:t(()=>[e(v,{label:"全部",value:""}),e(v,{label:"30秒以下",value:"0-30"}),e(v,{label:"30秒-2分钟",value:"30-120"}),e(v,{label:"2-5分钟",value:"120-300"}),e(v,{label:"5分钟以上",value:"300+"})]),_:1},8,["modelValue"])]),_:1}),e(k,null,{default:t(()=>[e(d,{type:"primary",onClick:oe},{default:t(()=>[e(n,null,{default:t(()=>[e(r(hl))]),_:1}),l[32]||(l[32]=i(" 搜索 ",-1))]),_:1}),e(d,{onClick:ke},{default:t(()=>[...l[33]||(l[33]=[i("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),h.value?(U(),L("div",dt,[e(T,null,{header:t(()=>[a("div",rt,[a("span",null,"正在播放："+u(h.value.customerName)+" - "+u(G(h.value.startTime)),1),e(d,{text:"",onClick:qe},{default:t(()=>[e(n,null,{default:t(()=>[e(r(kl))]),_:1})]),_:1})])]),default:t(()=>{var s;return[a("div",ut,[a("audio",{ref_key:"audioPlayer",ref:A,controls:"",autoplay:"",style:{width:"100%"},src:h.value.recordingUrl,onLoadedmetadata:Me,onTimeupdate:De,onEnded:Te}," 您的浏览器不支持音频播放 ",40,ct),a("div",vt,[a("div",pt,[a("div",ft,[l[34]||(l[34]=a("span",{class:"detail-label"},"客户：",-1)),a("span",mt,u(h.value.customerName),1)]),a("div",_t,[l[35]||(l[35]=a("span",{class:"detail-label"},"电话：",-1)),a("span",gt,u(h.value.customerPhone),1)]),a("div",bt,[l[36]||(l[36]=a("span",{class:"detail-label"},"时长：",-1)),a("span",yt,u(Y(h.value.duration)),1)]),a("div",wt,[l[37]||(l[37]=a("span",{class:"detail-label"},"质量：",-1)),e(Z,{"model-value":((s=h.value.quality)==null?void 0:s.score)||0,disabled:"",size:"small"},null,8,["model-value"])])]),a("div",ht,[e(d,{size:"small",onClick:l[6]||(l[6]=y=>se(h.value))},{default:t(()=>[e(n,null,{default:t(()=>[e(r(le))]),_:1}),l[38]||(l[38]=i(" 下载 ",-1))]),_:1}),e(d,{size:"small",onClick:l[7]||(l[7]=y=>ne(h.value))},{default:t(()=>[e(n,null,{default:t(()=>[e(r(me))]),_:1}),l[39]||(l[39]=i(" 分享 ",-1))]),_:1}),e(d,{size:"small",onClick:l[8]||(l[8]=y=>$e(h.value))},{default:t(()=>[e(n,null,{default:t(()=>[e(r(Cl))]),_:1}),l[40]||(l[40]=i(" 添加到播放列表 ",-1))]),_:1})])])])]}),_:1})])):fe("",!0),a("div",Ct,[e(T,null,{header:t(()=>[a("div",kt,[a("span",null,"录音列表 (共 "+u(D.value)+" 条)",1),a("div",Vt,[e(d,{size:"small",disabled:!b.value.length,onClick:ie},{default:t(()=>[...l[41]||(l[41]=[i(" 批量下载 ",-1)])]),_:1},8,["disabled"]),e(d,{size:"small",disabled:!b.value.length,onClick:He},{default:t(()=>[...l[42]||(l[42]=[i(" 批量删除 ",-1)])]),_:1},8,["disabled"])])])]),default:t(()=>[rl((U(),ul(Ke,{data:P.value,onSelectionChange:xe,style:{width:"100%"},"row-key":"id"},{default:t(()=>[e(V,{type:"selection",width:"55"}),e(V,{prop:"customerName",label:"客户姓名",width:"120"},{default:t(({row:s})=>[e(d,{text:"",onClick:y=>je(s.customerId)},{default:t(()=>[i(u(s.customerName||"未知客户"),1)]),_:2},1032,["onClick"])]),_:1}),e(V,{prop:"customerPhone",label:"客户电话",width:"140"},{default:t(({row:s})=>[i(u(r(fl)(s.customerPhone)),1)]),_:1}),e(V,{prop:"userName",label:"录音人员",width:"100"}),e(V,{prop:"startTime",label:"录音时间",width:"160"},{default:t(({row:s})=>[i(u(G(s.startTime)),1)]),_:1}),e(V,{prop:"duration",label:"录音时长",width:"100",sortable:""},{default:t(({row:s})=>[a("span",{class:cl(ye(s.duration))},u(Y(s.duration)),3)]),_:1}),e(V,{prop:"fileSize",label:"文件大小",width:"100",sortable:""},{default:t(({row:s})=>[i(u(te(s.fileSize)),1)]),_:1}),e(V,{prop:"quality",label:"录音质量",width:"120"},{default:t(({row:s})=>[s.quality?(U(),L("div",xt,[e(Z,{"model-value":s.quality.score,disabled:"",size:"small"},null,8,["model-value"]),a("span",zt,u(Ce(s.quality.score)),1)])):(U(),L("span",Rt,"未评分"))]),_:1}),e(V,{prop:"status",label:"状态",width:"100"},{default:t(({row:s})=>[e(ue,{type:we(s.status),size:"small"},{default:t(()=>[i(u(he(s.status)),1)]),_:2},1032,["type"])]),_:1}),e(V,{prop:"format",label:"格式",width:"80"},{default:t(({row:s})=>[e(ue,{size:"small",effect:"plain"},{default:t(()=>{var y;return[i(u(((y=s.format)==null?void 0:y.toUpperCase())||"MP3"),1)]}),_:2},1024)]),_:1}),e(V,{prop:"downloadCount",label:"下载次数",width:"100",sortable:""}),e(V,{label:"操作",width:"250",fixed:"right"},{default:t(({row:s})=>[e(d,{text:"",size:"small",onClick:y=>Se(s),disabled:s.status!=="normal"},{default:t(()=>[e(n,null,{default:t(()=>[e(r(ee))]),_:1}),l[43]||(l[43]=i(" 播放 ",-1))]),_:1},8,["onClick","disabled"]),e(d,{text:"",size:"small",onClick:y=>se(s)},{default:t(()=>[e(n,null,{default:t(()=>[e(r(le))]),_:1}),l[44]||(l[44]=i(" 下载 ",-1))]),_:1},8,["onClick"]),e(d,{text:"",size:"small",onClick:y=>Pe(s)},{default:t(()=>[e(n,null,{default:t(()=>[e(r(_e))]),_:1}),l[45]||(l[45]=i(" 波形 ",-1))]),_:1},8,["onClick"]),e(Oe,null,{dropdown:t(()=>[e(Ae,null,{default:t(()=>[e(F,{onClick:y=>ne(s)},{default:t(()=>[e(n,null,{default:t(()=>[e(r(me))]),_:1}),l[47]||(l[47]=i(" 分享录音 ",-1))]),_:1},8,["onClick"]),e(F,{onClick:y=>Fe(s)},{default:t(()=>[e(n,null,{default:t(()=>[e(r(xl))]),_:1}),l[48]||(l[48]=i(" 格式转换 ",-1))]),_:1},8,["onClick"]),e(F,{onClick:y=>Ee(s)},{default:t(()=>[e(n,null,{default:t(()=>[e(r(zl))]),_:1}),l[49]||(l[49]=i(" 编辑信息 ",-1))]),_:1},8,["onClick"]),e(F,{onClick:y=>Le(s)},{default:t(()=>[e(n,null,{default:t(()=>[e(r(Rl))]),_:1}),l[50]||(l[50]=i(" 质量分析 ",-1))]),_:1},8,["onClick"]),e(F,{onClick:y=>Ye(s),divided:""},{default:t(()=>[e(n,null,{default:t(()=>[e(r(Sl))]),_:1}),l[51]||(l[51]=i(" 删除录音 ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),default:t(()=>[e(d,{text:"",size:"small"},{default:t(()=>[l[46]||(l[46]=i(" 更多",-1)),e(n,null,{default:t(()=>[e(r(Vl))]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Ze,M.value]]),a("div",St,[e(Ge,{"current-page":R.page,"onUpdate:currentPage":l[9]||(l[9]=s=>R.page=s),"page-size":R.size,"onUpdate:pageSize":l[10]||(l[10]=s=>R.size=s),"page-sizes":[10,20,50,100],total:D.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ze,onCurrentChange:Re},null,8,["current-page","page-size","total"])])]),_:1})]),e(ce,{modelValue:W.value,"onUpdate:modelValue":l[11]||(l[11]=s=>W.value=s),title:"录音波形分析",width:"900px"},{default:t(()=>[x.value?(U(),L("div",qt,[a("div",Mt,[a("h3",null,u(x.value.customerName)+" - "+u(G(x.value.startTime)),1),a("div",Dt,[e(d,{size:"small",onClick:Ue},{default:t(()=>[e(n,null,{default:t(()=>[e(r(ee))]),_:1}),l[52]||(l[52]=i(" 播放 ",-1))]),_:1}),e(d,{size:"small",onClick:Ie},{default:t(()=>[e(n,null,{default:t(()=>[e(r(ql))]),_:1}),l[53]||(l[53]=i(" 暂停 ",-1))]),_:1}),e(d,{size:"small",onClick:Ne},{default:t(()=>[e(n,null,{default:t(()=>[e(r(Ml))]),_:1}),l[54]||(l[54]=i(" 重置 ",-1))]),_:1})])]),a("div",{class:"waveform-display",ref_key:"waveformContainer",ref:O},[a("div",Tt,[e(n,{size:"48"},{default:t(()=>[e(r(_e))]),_:1}),l[55]||(l[55]=a("p",null,"波形图加载中...",-1))])],512),a("div",$t,[e(de,{gutter:20},{default:t(()=>[e($,{span:8},{default:t(()=>[a("div",Pt,[l[56]||(l[56]=a("span",{class:"info-label"},"采样率：",-1)),a("span",Ut,u(x.value.sampleRate||"44.1kHz"),1)])]),_:1}),e($,{span:8},{default:t(()=>[a("div",It,[l[57]||(l[57]=a("span",{class:"info-label"},"比特率：",-1)),a("span",Nt,u(x.value.bitRate||"128kbps"),1)])]),_:1}),e($,{span:8},{default:t(()=>[a("div",Et,[l[58]||(l[58]=a("span",{class:"info-label"},"声道：",-1)),a("span",Bt,u(x.value.channels||"单声道"),1)])]),_:1})]),_:1})])])):fe("",!0)]),_:1},8,["modelValue"]),e(ce,{modelValue:E.value,"onUpdate:modelValue":l[18]||(l[18]=s=>E.value=s),title:"编辑录音信息",width:"600px","close-on-click-modal":!1},{footer:t(()=>[e(d,{onClick:l[17]||(l[17]=s=>E.value=!1)},{default:t(()=>[...l[60]||(l[60]=[i("取消",-1)])]),_:1}),e(d,{type:"primary",onClick:Be,loading:I.value},{default:t(()=>[...l[61]||(l[61]=[i(" 保存 ",-1)])]),_:1},8,["loading"])]),default:t(()=>[e(re,{model:g,rules:be,ref_key:"editFormRef",ref:K,"label-width":"100px"},{default:t(()=>[e(k,{label:"录音标题",prop:"title"},{default:t(()=>[e(J,{modelValue:g.title,"onUpdate:modelValue":l[12]||(l[12]=s=>g.title=s),placeholder:"请输入录音标题"},null,8,["modelValue"])]),_:1}),e(k,{label:"录音描述",prop:"description"},{default:t(()=>[e(J,{modelValue:g.description,"onUpdate:modelValue":l[13]||(l[13]=s=>g.description=s),type:"textarea",rows:3,placeholder:"请输入录音描述"},null,8,["modelValue"])]),_:1}),e(k,{label:"录音标签"},{default:t(()=>[e(B,{modelValue:g.tags,"onUpdate:modelValue":l[14]||(l[14]=s=>g.tags=s),multiple:"",filterable:"","allow-create":"",placeholder:"请选择或输入标签",style:{width:"100%"}},{default:t(()=>[e(v,{label:"重要",value:"important"}),e(v,{label:"投诉",value:"complaint"}),e(v,{label:"咨询",value:"inquiry"}),e(v,{label:"销售",value:"sales"}),e(v,{label:"售后",value:"support"})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"录音质量"},{default:t(()=>[e(Z,{modelValue:g.qualityScore,"onUpdate:modelValue":l[15]||(l[15]=s=>g.qualityScore=s),"show-text":""},null,8,["modelValue"])]),_:1}),e(k,{label:"是否公开"},{default:t(()=>[e(Je,{modelValue:g.isPublic,"onUpdate:modelValue":l[16]||(l[16]=s=>g.isPublic=s)},null,8,["modelValue"]),l[59]||(l[59]=a("span",{style:{"margin-left":"8px",color:"#909399","font-size":"12px"}}," 公开后其他人员可以查看此录音 ",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Ot=pl(Ft,[["__scopeId","data-v-e485cf0b"]]);export{Ot as default};
