import{l as e,aA as s,aC as a,r as i,Z as t,b as r,z as n,ag as l,aq as c,m as o,q as d,p,U as u,u as m,T as v,O as f,S as g,P as _,F as y,a9 as h,M as w,Q as k,J as b}from"./vendor-BtukhyiH.js";import{L as T,r as x,V as N,ag as A,J as C,E as D}from"./elementPlus-DxaqjplL.js";import{d as O,_ as S}from"./index-BGtT17ll.js";import"./utils-DfI7e5Rl.js";const H={class:"track-detail"},P={class:"page-header"},j={class:"header-left"},F={class:"header-info"},E={class:"header-meta"},M={class:"tracking-no"},$={class:"header-actions"},z={class:"info-grid"},Y={class:"info-item"},q={class:"value"},J={class:"info-item"},Z={class:"value"},K={class:"info-item"},U={class:"value"},B={class:"info-item"},I={class:"value"},L={class:"info-item"},Q={class:"value"},V={class:"info-item"},G={class:"value"},R={class:"info-item"},W={class:"value"},X={class:"info-item"},ee={class:"value"},se={class:"card-header"},ae={class:"track-count"},ie={class:"track-timeline"},te={class:"track-item"},re={class:"track-description"},ne={key:0,class:"track-location"},le={key:1,class:"track-operator"},ce={class:"progress-info"},oe={class:"progress-text"},de={class:"time-info"},pe={class:"time-item"},ue={class:"value"},me={key:0,class:"time-item"},ve={class:"value"},fe={class:"time-item"},ge={class:"value"},_e={class:"contact-info"},ye={class:"contact-item"},he={class:"value"},we={class:"contact-item"},ke={class:"value"},be={class:"contact-item"},Te=S(e({__name:"TrackDetail",setup(e){const S=s(),Te=a(),xe=O(),Ne=i(!1),Ae=new Set,Ce=i(!1),De=t({trackingNo:"",companyName:"",companyCode:"",senderName:"",senderAddress:"",receiverName:"",receiverAddress:"",shipTime:"",estimatedTime:"",status:"",serviceType:"",servicePhone:"",complaintPhone:"",website:""}),Oe=i([]),Se=e=>({pending:"待发货",picked_up:"已揽收",in_transit:"运输中",out_for_delivery:"派送中",delivered:"已签收",exception:"异常",returned:"已退回"}[e]||"未知状态"),He=()=>{if(!De.shipTime)return"-";const e=new Date(De.shipTime),s=(new Date).getTime()-e.getTime(),a=Math.floor(s/864e5),i=Math.floor(s%864e5/36e5);return a>0?`${a}天${i}小时`:`${i}小时`},Pe=()=>{if(!De.estimatedTime)return"-";const e=new Date(De.estimatedTime),s=new Date,a=e.getTime()-s.getTime();if(a<=0)return"已超时";const i=Math.floor(a/864e5),t=Math.floor(a%864e5/36e5);return i>0?`${i}天${t}小时`:`${t}小时`},je=()=>{S.back()},Fe=()=>{ze()},Ee=()=>{const e=window.location.href;navigator.clipboard.writeText(e).then(()=>{D.success("链接已复制到剪贴板")}).catch(()=>{D.error("复制失败，请手动复制链接")})},Me=()=>{window.print()},$e=e=>({SF:"顺丰速运",YTO:"圆通速递",ZTO:"中通快递",STO:"申通快递",YD:"韵达速递",HTKY:"百世快递",JD:"京东物流",EMS:"中国邮政",DBKD:"德邦快递",UC:"优速快递"}[e]||e),ze=async()=>{if(!Ce.value){Ne.value=!0;try{const e=Te.params.trackingNo||Te.query.trackingNo,s=Te.query.company,a=xe.getOrders().find(s=>s.trackingNumber===e||s.expressNo===e);if(!a)return D.error("未找到对应的订单信息"),void(Ce.value||(Ne.value=!1));if(Ce.value)return;const i=a.expressCompany||s||"SF",t={SF:{service:"95338",complaint:"400-889-5338",website:"https://www.sf-express.com"},YTO:{service:"95554",complaint:"400-500-6666",website:"https://www.yto.net.cn"},ZTO:{service:"95311",complaint:"400-827-0270",website:"https://www.zto.com"},STO:{service:"95543",complaint:"400-889-5543",website:"https://www.sto.cn"},YD:{service:"95546",complaint:"400-821-6789",website:"https://www.yundaex.com"}}[i]||{service:"400-800-8888",complaint:"400-800-9999",website:"https://www.express.com"};if(Object.assign(De,{trackingNo:a.trackingNumber||a.expressNo||e||"",companyName:$e(i),companyCode:i,senderName:"发货方",senderAddress:"",receiverName:a.receiverName||"",receiverAddress:a.receiverAddress||"",shipTime:a.shippingTime||a.shipTime||"",estimatedTime:a.estimatedDeliveryTime||"",status:a.logisticsStatus||Je(a.status),serviceType:"标准快递",servicePhone:t.service,complaintPhone:t.complaint,website:t.website}),a.logisticsHistory&&Array.isArray(a.logisticsHistory)&&a.logisticsHistory.length>0)Oe.value=a.logisticsHistory.map(e=>({time:e.time||"",status:Ye(e.status),description:e.description||"",location:e.location||"",operator:e.operator||"",type:qe(e.status)})).reverse();else if(a.statusHistory&&Array.isArray(a.statusHistory)){const e=["shipped","delivered","in_transit","out_for_delivery","picked_up"],s=a.statusHistory.filter(s=>e.includes(s.status)).map(e=>({time:e.time||"",status:Ye(e.status),description:e.description||e.remark||"",location:"",operator:e.operator||"",type:qe(e.status)}));Oe.value=s.reverse()}else Oe.value=[]}catch(e){console.error("加载物流信息失败:",e),Ce.value||D.error("加载物流信息失败")}finally{Ce.value||(Ne.value=!1)}}},Ye=e=>({pending:"待发货",picked_up:"已揽收",shipped:"已发货",in_transit:"运输中",out_for_delivery:"派送中",delivered:"已签收",exception:"异常",rejected:"拒收",returned:"已退回"}[e]||e),qe=e=>({delivered:"success",out_for_delivery:"warning",shipped:"primary",in_transit:"info",picked_up:"info",exception:"danger",rejected:"danger",returned:"info",pending:"warning"}[e]||"info"),Je=e=>({pending_shipment:"pending",shipped:"shipped",delivered:"delivered",in_transit:"in_transit",out_for_delivery:"out_for_delivery",package_exception:"exception"}[e]||"pending");return r(()=>{ze()}),n(()=>{Ce.value=!0,Ae.forEach(e=>clearTimeout(e)),Ae.clear()}),(e,s)=>{const a=l("el-button"),i=l("el-tag"),t=l("el-card"),r=l("el-icon"),n=l("el-timeline-item"),D=l("el-timeline"),O=l("el-col"),S=l("el-progress"),Te=l("el-link"),xe=l("el-row"),Ae=c("loading");return d(),o("div",H,[p("div",P,[p("div",j,[u(a,{onClick:je,icon:m(T),circle:""},null,8,["icon"]),p("div",F,[s[0]||(s[0]=p("h2",null,"物流跟踪详情",-1)),p("div",E,[p("span",M,v(De.trackingNo),1),u(i,{type:(Ce=De.status,{pending:"info",picked_up:"warning",in_transit:"primary",out_for_delivery:"warning",delivered:"success",exception:"danger",returned:"info"}[Ce]||"info"),size:"large"},{default:f(()=>[g(v(Se(De.status)),1)]),_:1},8,["type"])])])]),p("div",$,[u(a,{onClick:Fe,icon:m(x),loading:Ne.value},{default:f(()=>[...s[1]||(s[1]=[g(" 刷新轨迹 ",-1)])]),_:1},8,["icon","loading"]),u(a,{onClick:Ee,icon:m(N)},{default:f(()=>[...s[2]||(s[2]=[g(" 分享 ",-1)])]),_:1},8,["icon"]),u(a,{onClick:Me,icon:m(A)},{default:f(()=>[...s[3]||(s[3]=[g(" 打印 ",-1)])]),_:1},8,["icon"])])]),u(xe,{gutter:20},{default:f(()=>[u(O,{span:16},{default:f(()=>[u(t,{class:"info-card"},{header:f(()=>[...s[4]||(s[4]=[p("div",{class:"card-header"},[p("span",null,"基本信息")],-1)])]),default:f(()=>[p("div",z,[p("div",Y,[s[5]||(s[5]=p("span",{class:"label"},"物流单号：",-1)),p("span",q,v(De.trackingNo),1)]),p("div",J,[s[6]||(s[6]=p("span",{class:"label"},"物流公司：",-1)),p("span",Z,v(De.companyName),1)]),p("div",K,[s[7]||(s[7]=p("span",{class:"label"},"发件人：",-1)),p("span",U,v(De.senderName),1)]),p("div",B,[s[8]||(s[8]=p("span",{class:"label"},"收件人：",-1)),p("span",I,v(De.receiverName),1)]),p("div",L,[s[9]||(s[9]=p("span",{class:"label"},"发件地址：",-1)),p("span",Q,v(De.senderAddress),1)]),p("div",V,[s[10]||(s[10]=p("span",{class:"label"},"收件地址：",-1)),p("span",G,v(De.receiverAddress),1)]),p("div",R,[s[11]||(s[11]=p("span",{class:"label"},"发货时间：",-1)),p("span",W,v(De.shipTime),1)]),p("div",X,[s[12]||(s[12]=p("span",{class:"label"},"预计送达：",-1)),p("span",ee,v(De.estimatedTime),1)])])]),_:1}),u(t,{class:"track-card"},{header:f(()=>[p("div",se,[s[13]||(s[13]=p("span",null,"物流轨迹",-1)),p("span",ae,"共 "+v(Oe.value.length)+" 条记录",1)])]),default:f(()=>[_((d(),o("div",ie,[u(D,null,{default:f(()=>[(d(!0),o(y,null,h(Oe.value,(e,s)=>{return d(),w(n,{key:s,timestamp:e.time,type:(a=e.type,{success:"success",warning:"warning",danger:"danger",info:"primary"}[a]||"primary"),size:0===s?"large":"normal",placement:"top"},{default:f(()=>[p("div",te,[p("div",{class:b(["track-status",e.type])},v(e.status),3),p("div",re,v(e.description),1),e.location?(d(),o("div",ne,[u(r,null,{default:f(()=>[u(m(C))]),_:1}),g(" "+v(e.location),1)])):k("",!0),e.operator?(d(),o("div",le," 操作员："+v(e.operator),1)):k("",!0)])]),_:2},1032,["timestamp","type","size"]);var a}),128))]),_:1})])),[[Ae,Ne.value]])]),_:1})]),_:1}),u(O,{span:8},{default:f(()=>[u(t,{class:"status-card"},{header:f(()=>[...s[14]||(s[14]=[p("div",{class:"card-header"},[p("span",null,"配送进度")],-1)])]),default:f(()=>[p("div",ce,[u(S,{percentage:{pending:0,picked_up:20,in_transit:60,out_for_delivery:80,delivered:100,exception:50,returned:0}[De.status]||0,color:{pending:"#909399",picked_up:"#E6A23C",in_transit:"#409EFF",out_for_delivery:"#E6A23C",delivered:"#67C23A",exception:"#F56C6C",returned:"#909399"}[De.status]||"#909399","stroke-width":8,"text-inside":""},null,8,["percentage","color"]),p("div",oe,v(Se(De.status)),1)])]),_:1}),u(t,{class:"time-card"},{header:f(()=>[...s[15]||(s[15]=[p("div",{class:"card-header"},[p("span",null,"时效信息")],-1)])]),default:f(()=>[p("div",de,[p("div",pe,[s[16]||(s[16]=p("span",{class:"label"},"已用时长：",-1)),p("span",ue,v(He()),1)]),"delivered"!==De.status?(d(),o("div",me,[s[17]||(s[17]=p("span",{class:"label"},"预计剩余：",-1)),p("span",ve,v(Pe()),1)])):k("",!0),p("div",fe,[s[18]||(s[18]=p("span",{class:"label"},"服务标准：",-1)),p("span",ge,v(De.serviceType||"标准快递"),1)])])]),_:1}),u(t,{class:"contact-card"},{header:f(()=>[...s[19]||(s[19]=[p("div",{class:"card-header"},[p("span",null,"联系信息")],-1)])]),default:f(()=>[p("div",_e,[p("div",ye,[s[20]||(s[20]=p("span",{class:"label"},"客服电话：",-1)),p("span",he,v(De.servicePhone||"400-800-8888"),1)]),p("div",we,[s[21]||(s[21]=p("span",{class:"label"},"投诉电话：",-1)),p("span",ke,v(De.complaintPhone||"400-800-9999"),1)]),p("div",be,[s[22]||(s[22]=p("span",{class:"label"},"官方网站：",-1)),u(Te,{href:De.website,target:"_blank",type:"primary"},{default:f(()=>[g(v(De.website||"www.express.com"),1)]),_:1},8,["href"])])])]),_:1})]),_:1})]),_:1})]);var Ce}}}),[["__scopeId","data-v-fc22f269"]]);export{Te as default};
