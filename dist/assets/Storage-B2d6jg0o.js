import{l as _,r as i,c as p,m as u,p as d,q as t,T as s,F as v,a9 as f}from"./vendor-D8Vxqhr-.js";import{_ as S}from"./settings-CuxbDWOu.js";import"./elementPlus-Bmwh7Rh8.js";import"./utils-ywHRn0uI.js";const h={class:"storage-debug"},b={class:"section"},y={class:"storage-info"},k={class:"section"},C={class:"storage-info"},N={class:"section"},B=_({__name:"Storage",setup(I){const l=i([]),r=i([]),a=i([]),n=()=>{try{const o=localStorage.getItem("crm_customers_unified");if(o){const e=JSON.parse(o);l.value=e.customers||[]}else l.value=[]}catch(o){console.error("解析统一存储数据失败:",o),l.value=[]}try{const o=localStorage.getItem("crm_store_customer");o?r.value=JSON.parse(o):r.value=[]}catch(o){console.error("解析旧版存储数据失败:",o),r.value=[]}a.value=[];for(let o=0;o<localStorage.length;o++){const e=localStorage.key(o);e&&a.value.push(e)}},g=()=>{confirm("确定要清空所有localStorage数据吗？")&&(localStorage.clear(),n())},m=o=>{const e=localStorage.getItem(o);return e?new Blob([e]).size:0};return p(()=>{n()}),(o,e)=>(d(),u("div",h,[e[4]||(e[4]=t("h2",null,"存储调试页面",-1)),t("div",{class:"section"},[e[0]||(e[0]=t("h3",null,"localStorage 数据检查",-1)),t("button",{onClick:n,class:"btn"},"刷新存储数据"),t("button",{onClick:g,class:"btn btn-danger"},"清空所有存储")]),t("div",b,[e[1]||(e[1]=t("h4",null,"统一客户存储 (crm_customers_unified)",-1)),t("div",y,[t("p",null,"客户数量: "+s(l.value.length),1),t("pre",null,s(JSON.stringify(l.value,null,2)),1)])]),t("div",k,[e[2]||(e[2]=t("h4",null,"旧版客户存储 (crm_store_customer)",-1)),t("div",C,[t("p",null,"客户数量: "+s(r.value.length),1),t("pre",null,s(JSON.stringify(r.value,null,2)),1)])]),t("div",N,[e[3]||(e[3]=t("h4",null,"所有 localStorage 键",-1)),t("ul",null,[(d(!0),u(v,null,f(a.value,c=>(d(),u("li",{key:c},s(c)+" ("+s(m(c))+" bytes) ",1))),128))])])]))}}),z=S(B,[["__scopeId","data-v-543d22ca"]]);export{z as default};
