var H=(R,p,w)=>new Promise((g,f)=>{var k=_=>{try{v(w.next(_))}catch(N){f(N)}},m=_=>{try{v(w.throw(_))}catch(N){f(N)}},v=_=>_.done?g(_.value):Promise.resolve(_.value).then(k,m);v((w=w.apply(R,p)).next())});import{l as $,e as D,r as B,Z as I,ag as S,m as d,p as u,q as e,Q as x,U as t,S as y,O as r,u as i,a7 as K,T as c,F as P,a9 as T}from"./vendor-D8Vxqhr-.js";import{s as b,a8 as z,F as M,a0 as U,aD as W,K as q,c as Q,E as O}from"./elementPlus-Bmwh7Rh8.js";import{u as Y}from"./data-D5rIftf7.js";import{a as V}from"./sensitiveInfo-BWt1a88R.js";import{S as A,_ as j}from"./settings-CuxbDWOu.js";import"./utils-ywHRn0uI.js";const G={class:"customer-search-container"},J={class:"page-header"},X={class:"header-content"},ee={class:"page-title"},se={class:"search-section"},te={class:"search-form"},oe={class:"search-input-group"},ne={class:"input-item"},ae={class:"search-actions"},re={key:0,class:"result-section"},le={class:"result-header"},ie={class:"result-stats"},ce={key:0},de={key:1,class:"no-result"},ue={key:0,class:"result-list"},_e={class:"result-card"},me={class:"customer-info"},he={class:"customer-avatar"},pe={class:"customer-details"},fe={class:"customer-name"},ve={class:"customer-phone"},ye={class:"order-info"},we={class:"info-item"},ge={class:"info-value"},Ne={class:"info-item"},ke={class:"info-value amount"},Se={class:"info-item"},Ce={class:"info-value"},De={key:0,class:"info-item"},xe={class:"info-value"},be={class:"owner-info"},Oe={class:"owner-card"},Re={class:"owner-header"},He={class:"owner-details"},Pe={class:"owner-name"},Te={class:"owner-department"},Ve={class:"owner-contact"},Ae={class:"owner-status"},Ee={key:1,class:"no-result-state"},Fe={class:"no-result-icon"},Le={key:1,class:"history-section"},Ze={class:"history-header"},$e={class:"history-list"},Be=["onClick"],Ie={class:"history-content"},Ke={class:"history-text"},ze={class:"history-time"},Me=$({__name:"Search",setup(R){const p=Y(),w=D(()=>p.searchLoading),g=B(!1),f=D(()=>p.searchResults),k=D(()=>p.searchHistory),m=I({keyword:""}),v=()=>H(this,null,function*(){if(!m.keyword.trim()){O.warning("请输入搜索关键词");return}g.value=!0;try{const o=m.keyword.trim(),s={};/^1[3-9]\d{9}$/.test(o)?s.phone=o:/^[A-Z]{2}\d{12}$/.test(o)?s.customerCode=o:/^[A-Z0-9]{10,20}$/.test(o)?(s.orderNo=o,s.trackingNo=o):(s.customerName=o,s.orderNo=o,s.trackingNo=o);const a=[{customerName:"张三",phone:"13812345678",customerCode:"ZS202401151102",orderNo:"ORD2024010001",orderAmount:1299,orderDate:"2024-01-15",trackingNo:"SF1234567890",ownerName:"李销售",ownerPhone:"13987654321",ownerDepartment:"销售一部",ownerStatus:"active"},{customerName:"李四",phone:"13923456789",customerCode:"LS202401161203",orderNo:"ORD2024010002",orderAmount:2599,orderDate:"2024-01-16",trackingNo:"YTO9876543210",ownerName:"王经理",ownerPhone:"13876543210",ownerDepartment:"销售二部",ownerStatus:"active"},{customerName:"王五",phone:"13734567890",customerCode:"WW202401171304",orderNo:"ORD2024010003",orderAmount:899,orderDate:"2024-01-17",trackingNo:"ZTO5678901234",ownerName:"赵主管",ownerPhone:"13765432109",ownerDepartment:"销售三部",ownerStatus:"inactive"}];let h=[];s.phone?h=a.filter(l=>l.phone===s.phone):s.customerCode?h=a.filter(l=>l.customerCode===s.customerCode):s.orderNo?h=a.filter(l=>l.orderNo===s.orderNo):s.trackingNo?h=a.filter(l=>l.trackingNo===s.trackingNo):s.customerName&&(h=a.filter(l=>l.customerName===s.customerName)),p.$patch({searchResults:h,searchLoading:!1})}catch(o){O.error("搜索失败，请重试")}}),_=()=>{m.keyword="",g.value=!1},N=o=>{_(),m.keyword=o.text,v()},E=()=>{p.clearSearchHistory(),O.success("搜索历史已清空")},F=o=>({active:"success",inactive:"warning",offline:"info"})[o]||"",L=o=>({active:"在线",inactive:"忙碌",offline:"离线"})[o]||o;return(o,s)=>{const a=S("el-icon"),h=S("el-input"),l=S("el-button"),Z=S("el-tag");return u(),d("div",G,[e("div",J,[e("div",X,[e("h1",ee,[t(a,{class:"title-icon"},{default:r(()=>[t(i(b))]),_:1}),s[1]||(s[1]=y(" 客户查询 ",-1))]),s[2]||(s[2]=e("p",{class:"page-description"},"通过客户姓名、手机号、客户编码、订单号、物流单号等信息快速查询客户归属人",-1))])]),e("div",se,[s[5]||(s[5]=e("div",{class:"search-header"},[e("h3",null,"查询条件"),e("p",{class:"search-tip"},"支持精确匹配和模糊搜索，输入关键信息即可快速定位客户")],-1)),e("div",te,[e("div",oe,[e("div",ne,[t(h,{modelValue:m.keyword,"onUpdate:modelValue":s[0]||(s[0]=n=>m.keyword=n),placeholder:"请输入客户姓名、电话、编码、订单号或物流单号",clearable:"",onKeyup:K(v,["enter"]),class:"search-input"},{prefix:r(()=>[t(a,null,{default:r(()=>[t(i(b))]),_:1})]),_:1},8,["modelValue"])])]),e("div",ae,[t(l,{type:"primary",onClick:v,loading:w.value,size:"large",class:"search-btn"},{default:r(()=>[t(a,null,{default:r(()=>[t(i(b))]),_:1}),s[3]||(s[3]=y(" 搜索 ",-1))]),_:1},8,["loading"]),t(l,{onClick:_,size:"large",class:"reset-btn"},{default:r(()=>[t(a,null,{default:r(()=>[t(i(z))]),_:1}),s[4]||(s[4]=y(" 重置 ",-1))]),_:1})])])]),g.value?(u(),d("div",re,[e("div",le,[s[8]||(s[8]=e("h3",null,"查询结果",-1)),e("div",ie,[f.value.length>0?(u(),d("span",ce,[s[6]||(s[6]=y(" 找到 ",-1)),e("strong",null,c(f.value.length),1),s[7]||(s[7]=y(" 条匹配记录 ",-1))])):(u(),d("span",de," 未找到匹配的客户信息 "))])]),f.value.length>0?(u(),d("div",ue,[(u(!0),d(P,null,T(f.value,(n,C)=>(u(),d("div",{key:C,class:"result-item"},[e("div",_e,[e("div",me,[e("div",he,[t(a,null,{default:r(()=>[t(i(M))]),_:1})]),e("div",pe,[e("h4",fe,c(n.customerName),1),e("p",ve,c(i(V)(n.phone,i(A).PHONE)),1)])]),e("div",ye,[e("div",we,[s[9]||(s[9]=e("span",{class:"info-label"},"订单号",-1)),e("span",ge,c(n.orderNo),1)]),e("div",Ne,[s[10]||(s[10]=e("span",{class:"info-label"},"订单金额",-1)),e("span",ke,"¥"+c(n.orderAmount.toLocaleString()),1)]),e("div",Se,[s[11]||(s[11]=e("span",{class:"info-label"},"下单时间",-1)),e("span",Ce,c(n.orderDate),1)]),n.trackingNo?(u(),d("div",De,[s[12]||(s[12]=e("span",{class:"info-label"},"物流单号",-1)),e("span",xe,c(n.trackingNo),1)])):x("",!0)]),e("div",be,[e("div",Oe,[e("div",Re,[t(a,{class:"owner-icon"},{default:r(()=>[t(i(U))]),_:1}),s[13]||(s[13]=e("span",{class:"owner-title"},"当前归属人",-1))]),e("div",He,[e("div",Pe,c(n.ownerName),1),e("div",Te,c(n.ownerDepartment),1),e("div",Ve,c(i(V)(n.ownerPhone,i(A).PHONE)),1)]),e("div",Ae,[t(Z,{type:F(n.ownerStatus)},{default:r(()=>[y(c(L(n.ownerStatus)),1)]),_:2},1032,["type"])])])])])]))),128))])):(u(),d("div",Ee,[e("div",Fe,[t(a,null,{default:r(()=>[t(i(W))]),_:1})]),s[14]||(s[14]=e("h3",null,"未找到匹配的客户信息",-1)),s[15]||(s[15]=e("p",null,"请检查输入的信息是否正确，或尝试其他搜索条件",-1)),s[16]||(s[16]=e("div",{class:"search-suggestions"},[e("h4",null,"搜索建议："),e("ul",null,[e("li",null,"确认手机号码格式正确（11位数字）"),e("li",null,"检查订单号是否完整"),e("li",null,"物流单号是否输入正确"),e("li",null,"客户姓名支持模糊搜索")])],-1))]))])):x("",!0),k.value.length>0&&!g.value?(u(),d("div",Le,[e("div",Ze,[s[18]||(s[18]=e("h3",null,"最近搜索",-1)),t(l,{type:"text",onClick:E,class:"clear-history"},{default:r(()=>[t(a,null,{default:r(()=>[t(i(q))]),_:1}),s[17]||(s[17]=y(" 清空历史 ",-1))]),_:1})]),e("div",$e,[(u(!0),d(P,null,T(k.value,(n,C)=>(u(),d("div",{key:C,class:"history-item",onClick:Ue=>N(n)},[e("div",Ie,[t(a,{class:"history-icon"},{default:r(()=>[t(i(Q))]),_:1}),e("span",Ke,c(n.text),1)]),e("div",ze,c(n.time),1)],8,Be))),128))])])):x("",!0)])}}}),Xe=j(Me,[["__scopeId","data-v-bb25d99b"]]);export{Xe as default};
