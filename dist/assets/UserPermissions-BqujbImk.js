import{u as M,V as c,_ as E}from"./settings-CuxbDWOu.js";import{l as N,az as P,ag as U,m as k,p as D,q as e,U as i,O as o,S as r,T as l,u as t}from"./vendor-D8Vxqhr-.js";import{E as p}from"./elementPlus-Bmwh7Rh8.js";import"./utils-ywHRn0uI.js";const C={class:"debug-container"},x={class:"debug-info"},L={class:"info-item"},V={class:"info-item"},B={class:"info-item"},T={class:"info-item"},q={class:"info-item"},w={class:"info-item"},z={class:"debug-info"},O={class:"info-item"},j={class:"info-item"},F={class:"info-item"},G={class:"info-item"},H={class:"info-item"},J={class:"debug-info"},K={class:"info-item"},Q={class:"info-item"},W={class:"info-item"},X={class:"debug-actions"},Y=N({__name:"UserPermissions",setup(Z){const n=M(),y=P(),R=()=>{console.log("当前用户信息:",n.currentUser),console.log("isSuperAdmin:",n.isSuperAdmin),p.success("用户信息已刷新，请查看控制台")},b=()=>{n.isSuperAdmin?p.success("超级管理员权限验证通过"):p.error("超级管理员权限验证失败")},I=()=>{y.push("/system/super-admin-panel").catch(f=>{console.error("导航失败:",f),p.error("导航失败: "+f.message)})};return(f,s)=>{const g=U("el-card"),u=U("el-tag"),_=U("el-button");return D(),k("div",C,[s[21]||(s[21]=e("h2",null,"用户权限调试信息",-1)),i(g,{class:"debug-card"},{header:o(()=>[...s[0]||(s[0]=[e("span",null,"当前用户信息",-1)])]),default:o(()=>{var a,m,d,v,S,A;return[e("div",x,[e("div",L,[s[1]||(s[1]=e("strong",null,"用户ID:",-1)),r(" "+l(((a=t(n).currentUser)==null?void 0:a.id)||"null"),1)]),e("div",V,[s[2]||(s[2]=e("strong",null,"用户名:",-1)),r(" "+l(((m=t(n).currentUser)==null?void 0:m.name)||"null"),1)]),e("div",B,[s[3]||(s[3]=e("strong",null,"角色 (role):",-1)),r(" "+l(((d=t(n).currentUser)==null?void 0:d.role)||"null"),1)]),e("div",T,[s[4]||(s[4]=e("strong",null,"用户角色 (userRole):",-1)),r(" "+l(((v=t(n).currentUser)==null?void 0:v.userRole)||"null"),1)]),e("div",q,[s[5]||(s[5]=e("strong",null,"权限级别:",-1)),r(" "+l(((S=t(n).currentUser)==null?void 0:S.permissionLevel)||"null"),1)]),e("div",w,[s[6]||(s[6]=e("strong",null,"数据范围:",-1)),r(" "+l(((A=t(n).currentUser)==null?void 0:A.dataScope)||"null"),1)])])]}),_:1}),i(g,{class:"debug-card"},{header:o(()=>[...s[7]||(s[7]=[e("span",null,"权限检查结果",-1)])]),default:o(()=>[e("div",z,[e("div",O,[s[8]||(s[8]=e("strong",null,"isLoggedIn:",-1)),i(u,{type:t(n).isLoggedIn?"success":"danger"},{default:o(()=>[r(l(t(n).isLoggedIn),1)]),_:1},8,["type"])]),e("div",j,[s[9]||(s[9]=e("strong",null,"isAdmin:",-1)),i(u,{type:t(n).isAdmin?"success":"danger"},{default:o(()=>[r(l(t(n).isAdmin),1)]),_:1},8,["type"])]),e("div",F,[s[10]||(s[10]=e("strong",null,"isSuperAdmin:",-1)),i(u,{type:t(n).isSuperAdmin?"success":"danger"},{default:o(()=>[r(l(t(n).isSuperAdmin),1)]),_:1},8,["type"])]),e("div",G,[s[11]||(s[11]=e("strong",null,"isManager:",-1)),i(u,{type:t(n).isManager?"success":"danger"},{default:o(()=>[r(l(t(n).isManager),1)]),_:1},8,["type"])]),e("div",H,[s[12]||(s[12]=e("strong",null,"token:",-1)),r(" "+l(t(n).token||"null"),1)])])]),_:1}),i(g,{class:"debug-card"},{header:o(()=>[...s[13]||(s[13]=[e("span",null,"权限常量检查",-1)])]),default:o(()=>{var a,m;return[e("div",J,[e("div",K,[s[14]||(s[14]=e("strong",null,"UserRole.SUPER_ADMIN:",-1)),r(" "+l(t(c).SUPER_ADMIN),1)]),e("div",Q,[s[15]||(s[15]=e("strong",null,"当前用户userRole === UserRole.SUPER_ADMIN:",-1)),i(u,{type:((a=t(n).currentUser)==null?void 0:a.userRole)===t(c).SUPER_ADMIN?"success":"danger"},{default:o(()=>{var d;return[r(l(((d=t(n).currentUser)==null?void 0:d.userRole)===t(c).SUPER_ADMIN),1)]}),_:1},8,["type"])]),e("div",W,[s[16]||(s[16]=e("strong",null,"当前用户role === 'admin':",-1)),i(u,{type:((m=t(n).currentUser)==null?void 0:m.role)==="admin"?"success":"danger"},{default:o(()=>{var d;return[r(l(((d=t(n).currentUser)==null?void 0:d.role)==="admin"),1)]}),_:1},8,["type"])])])]}),_:1}),i(g,{class:"debug-card"},{header:o(()=>[...s[17]||(s[17]=[e("span",null,"操作测试",-1)])]),default:o(()=>[e("div",X,[i(_,{onClick:R},{default:o(()=>[...s[18]||(s[18]=[r("刷新用户信息",-1)])]),_:1}),i(_,{onClick:b},{default:o(()=>[...s[19]||(s[19]=[r("测试超级管理员访问",-1)])]),_:1}),i(_,{onClick:I},{default:o(()=>[...s[20]||(s[20]=[r("导航到超级管理员面板",-1)])]),_:1})])]),_:1})])}}}),ns=E(Y,[["__scopeId","data-v-6c7ba790"]]);export{ns as default};
