var De=Object.defineProperty,ve=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var ee=(s,i,u)=>i in s?De(s,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[i]=u,k=(s,i)=>{for(var u in i||(i={}))fe.call(i,u)&&ee(s,u,i[u]);if(Z)for(var u of Z(i))ye.call(i,u)&&ee(s,u,i[u]);return s},L=(s,i)=>ve(s,we(i));var m=(s,i,u)=>new Promise((A,b)=>{var p=y=>{try{l(u.next(y))}catch(v){b(v)}},o=y=>{try{l(u.throw(y))}catch(v){b(v)}},l=y=>y.done?A(y.value):Promise.resolve(y.value).then(p,o);l((u=u.apply(s,i)).next())});import{s as C,f,L as Se,K as Ie,u as Ae}from"./settings-CuxbDWOu.js";import{r as g,e as E}from"./vendor-D8Vxqhr-.js";const Ne=s=>{if(C()){const i=xe(),{page:u=1,pageSize:A=30}=s,b=(u-1)*A,p=b+A;return Promise.resolve({list:i.slice(b,p),total:i.length,summary:{totalCount:i.length,pendingCount:i.filter(o=>o.status==="pending").length,assignedCount:i.filter(o=>o.status==="assigned").length,archivedCount:i.filter(o=>o.status==="archived").length,totalAmount:i.reduce((o,l)=>o+l.orderAmount,0),todayCount:i.filter(o=>{const l=new Date().toDateString();return new Date(o.orderDate).toDateString()===l}).length,weekCount:i.filter(o=>{const l=new Date;return l.setDate(l.getDate()-7),new Date(o.orderDate)>=l}).length,monthCount:i.filter(o=>{const l=new Date;return l.setMonth(l.getMonth()-1),new Date(o.orderDate)>=l}).length}})}return f.get("/api/data/list",s)},Te=s=>C()?Promise.resolve({success:!0,message:"批量分配成功"}):f.post("/api/data/batch-assign",s),be=s=>C()?Promise.resolve({success:!0,message:"批量封存成功"}):f.post("/api/data/batch-archive",s),Me=s=>C()?Promise.resolve({success:!0,message:"回收成功"}):f.post("/api/data/recover",s),ke=s=>C()?Promise.resolve({success:!0,message:"删除成功"}):f.post("/api/data/delete",s),Ce=()=>{if(C()){const s=[{id:"1",name:"李销售",department:"销售一部",status:"active"},{id:"2",name:"王经理",department:"销售二部",status:"active"},{id:"3",name:"张主管",department:"销售三部",status:"busy"},{id:"4",name:"赵专员",department:"销售一部",status:"active"},{id:"5",name:"刘顾问",department:"销售二部",status:"offline"}];return Promise.resolve(s)}return f.get("/api/data/assignee-options")},_e=s=>f.get("/api/data/search-customer",s),Re=s=>f.get(`/api/data/customer/${s}`),$e=s=>f.get("/api/data/statistics",s?{startDate:s[0],endDate:s[1]}:{}),Oe=s=>f.get("/api/data/export",s),xe=()=>{const s=[],i=["张三","李四","王五","赵六","钱七","孙八","周九","吴十","陈明","刘强","杨丽","黄伟","林芳","郭涛","何静"],u=["pending","assigned","archived","recovered"],A=[{id:"1",name:"李销售",department:"销售一部"},{id:"2",name:"王经理",department:"销售二部"},{id:"3",name:"张主管",department:"销售三部"}],b=[{id:"creator1",name:"系统管理员",department:"管理部"},{id:"creator2",name:"数据录入员",department:"客服部"},{id:"creator3",name:"业务员小王",department:"业务部"}],p=new Date,o=new Date(p.getFullYear(),p.getMonth(),p.getDate()),l=new Date(o.getTime()-24*60*60*1e3),y=new Date(o.getTime()-o.getDay()*24*60*60*1e3),v=new Date(p.getFullYear(),p.getMonth(),1),U=new Date(p.getFullYear(),0,1),S=[{label:"今日",date:o,count:3},{label:"昨日",date:l,count:2},{label:"本周",date:y,count:8},{label:"本月",date:v,count:15},{label:"今年",date:U,count:25},{label:"历史",date:new Date(2023,0,1),count:10}];let I=1;return S.forEach(_=>{for(let H=0;H<_.count;H++){const R=u[Math.floor(Math.random()*u.length)],D=R==="assigned"?A[Math.floor(Math.random()*A.length)]:void 0;let h;_.label==="今日"?h=new Date(o.getTime()+Math.random()*24*60*60*1e3):_.label==="昨日"?h=new Date(l.getTime()+Math.random()*24*60*60*1e3):_.label==="本周"?h=new Date(y.getTime()+Math.random()*7*24*60*60*1e3):_.label==="本月"?h=new Date(v.getTime()+Math.random()*30*24*60*60*1e3):_.label==="今年"?h=new Date(U.getTime()+Math.random()*365*24*60*60*1e3):h=new Date(_.date.getTime()+Math.random()*365*24*60*60*1e3);const P=new Date(h.getTime()+Math.random()*7*24*60*60*1e3),F=Math.random()<.1,x=b[Math.floor(Math.random()*b.length)];let d;if(R!=="pending"){const T=A[Math.floor(Math.random()*A.length)];d={operatorId:T.id,operatorName:T.name,operatorDepartment:T.department}}const $=[];$.push({id:`op_${I}_1`,type:"assign",operatorId:x.id,operatorName:x.name,operatorDepartment:x.department,remark:"客户资料创建",createTime:h.toISOString()});let O;if(R==="assigned"&&D){const T=new Date(h.getTime()+Math.random()*24*60*60*1e3);O=T.toISOString().split("T")[0],$.push({id:`op_${I}_2`,type:"assign",operatorId:(d==null?void 0:d.operatorId)||"system",operatorName:(d==null?void 0:d.operatorName)||"系统",operatorDepartment:d==null?void 0:d.operatorDepartment,targetId:D.id,targetName:D.name,targetDepartment:D.department,remark:"分配给销售人员",createTime:T.toISOString()})}let N;if(R==="archived"){const T=["客户暂停合作","订单取消","客户要求暂停","内部调整"],Y=["1个月","3个月","6个月","1年"],K=new Date(h.getTime()+Math.random()*30*24*60*60*1e3),W=Y[Math.floor(Math.random()*Y.length)],M=new Date(K);switch(W){case"1个月":M.setMonth(M.getMonth()+1);break;case"3个月":M.setMonth(M.getMonth()+3);break;case"6个月":M.setMonth(M.getMonth()+6);break;case"1年":M.setFullYear(M.getFullYear()+1);break}N={duration:W,reason:T[Math.floor(Math.random()*T.length)],remark:`封存备注：${Math.random()>.5?"客户主动要求":"业务调整需要"}`,archiveTime:K.toISOString(),unarchiveTime:M.toISOString()},$.push({id:`op_${I}_archive`,type:"archive",operatorId:(d==null?void 0:d.operatorId)||"system",operatorName:(d==null?void 0:d.operatorName)||"系统",operatorDepartment:d==null?void 0:d.operatorDepartment,reason:N.reason,remark:N.remark,createTime:N.archiveTime})}if(R==="recovered"){const T=new Date(h.getTime()+Math.random()*30*24*60*60*1e3);$.push({id:`op_${I}_recover`,type:"recover",operatorId:(d==null?void 0:d.operatorId)||"system",operatorName:(d==null?void 0:d.operatorName)||"系统",operatorDepartment:d==null?void 0:d.operatorDepartment,remark:"客户资料回收",createTime:T.toISOString()})}s.push({id:`data_${I}`,customerName:i[Math.floor(Math.random()*i.length)],customerCode:Se(),phone:`138${Math.floor(Math.random()*1e8).toString().padStart(8,"0")}`,orderNo:`ORD${new Date().getFullYear()}${I.toString().padStart(6,"0")}`,orderAmount:Math.floor(Math.random()*5e3)+500,orderDate:h.toISOString().split("T")[0],signDate:P.toISOString().split("T")[0],status:R,assigneeId:D==null?void 0:D.id,assigneeName:D==null?void 0:D.name,assigneeDepartment:D==null?void 0:D.department,assignDate:O,createTime:h.toISOString(),updateTime:new Date().toISOString(),trackingNo:`SF${Math.floor(Math.random()*1e12)}`,address:`广东省深圳市南山区科技园${Math.floor(Math.random()*100)}号`,remark:Math.random()>.7?"重要客户":void 0,isReassigned:F,archiveInfo:N,operatorId:d==null?void 0:d.operatorId,operatorName:d==null?void 0:d.operatorName,operatorDepartment:d==null?void 0:d.operatorDepartment,createdBy:x.id,createdByName:x.name,operationRecords:$}),I++}}),s},Ue=s=>{if(C()){const i=[{id:"ah_1",dataId:"data_1",assignType:"roundrobin",assignMode:"direct",toUserId:"user_1",toUserName:"张三",departmentId:"dept_1",departmentName:"销售一部",operatorId:"admin_1",operatorName:"管理员",remark:"轮流分配",createTime:"2024-01-15 10:30:00"},{id:"ah_2",dataId:"data_2",assignType:"leader_assign",fromUserId:"leader_1",fromUserName:"部门负责人",toUserId:"user_2",toUserName:"李四",departmentId:"dept_1",departmentName:"销售一部",operatorId:"leader_1",operatorName:"部门负责人",remark:"部门负责人二次分配",createTime:"2024-01-15 11:00:00"}];return Promise.resolve({list:i,total:i.length})}return f.get("/assignment/history",{params:s})},He=s=>{if(C()){const i={departmentId:s,departmentName:"销售一部",members:[{userId:"user_1",userName:"张三",assignmentCount:5,lastAssignedTime:"2024-01-15 10:30:00"},{userId:"user_2",userName:"李四",assignmentCount:3,lastAssignedTime:"2024-01-14 15:20:00"},{userId:"user_3",userName:"王五",assignmentCount:4,lastAssignedTime:"2024-01-15 09:15:00"}],lastUpdated:"2024-01-15 11:00:00"};return Promise.resolve(i)}return f.get(`/department/${s}/roundrobin-state`)},Le=(s,i)=>C()?Promise.resolve():f.put(`/department/${s}/roundrobin-state`,i),Fe=s=>{if(C()){const i=[{userId:"user_1",userName:"张三",departmentId:"dept_1",departmentName:"销售一部",totalAssigned:25,todayAssigned:3,weekAssigned:12,monthAssigned:25,avgOrderAmount:3500,lastAssignedTime:"2024-01-15 10:30:00"},{userId:"user_2",userName:"李四",departmentId:"dept_1",departmentName:"销售一部",totalAssigned:18,todayAssigned:2,weekAssigned:8,monthAssigned:18,avgOrderAmount:4200,lastAssignedTime:"2024-01-15 11:00:00"}];return Promise.resolve(i)}return f.get("/assignment/stats",{params:s})},Pe=s=>C()?Promise.resolve():f.post("/assignment/history",s),Be=Ie("data",()=>{const s=g([]),i=g(0),u=g(!1),A=g(!1),b=g({totalCount:0,pendingCount:0,assignedCount:0,archivedCount:0,recoveredCount:0,totalAmount:0,todayCount:0,weekCount:0,monthCount:0}),p=g({page:1,pageSize:30}),o=g({status:"pending",dateRange:[],searchKeyword:"",assigneeId:"",orderAmountRange:[]}),l=g([]),y=g([]),v=g([]),U=g(null),S=g([]),I=g({}),_=g("direct"),H=g([]),R=g(0),D=g(!1),h=g({}),P=g([]),F=g(!1),x=E(()=>S.value.length>0),d=E(()=>S.value.length),$=E(()=>{const t=Ae();let e=s.value;if(t.currentUser){const a=t.currentUser.id;t.currentUser.role==="admin"||(e=e.filter(n=>n.createdBy===a||n.assigneeId===a))}if(o.value.status&&(e=e.filter(a=>a.status===o.value.status)),o.value.searchKeyword){const a=o.value.searchKeyword.toLowerCase();e=e.filter(r=>r.customerName.toLowerCase().includes(a)||r.phone.includes(a)||r.orderNo.toLowerCase().includes(a)||r.customerCode&&r.customerCode.toLowerCase().includes(a))}if(o.value.assigneeId&&(e=e.filter(a=>a.assigneeId===o.value.assigneeId)),o.value.orderAmountRange&&o.value.orderAmountRange.length===2){const[a,r]=o.value.orderAmountRange;e=e.filter(n=>n.orderAmount>=a&&n.orderAmount<=r)}if(o.value.dateRange&&o.value.dateRange.length===2){const[a,r]=o.value.dateRange;e=e.filter(n=>{const c=new Date(n.orderDate);return c>=new Date(a)&&c<=new Date(r)})}if(o.value.dateFilter&&o.value.dateFilter!=="all"){const a=new Date;let r;switch(o.value.dateFilter){case"today":r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),e=e.filter(c=>{const w=new Date(c.orderDate);return w>=r&&w<new Date(r.getTime()+24*60*60*1e3)});break;case"yesterday":r=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1),e=e.filter(c=>{const w=new Date(c.orderDate);return w>=r&&w<new Date(r.getTime()+24*60*60*1e3)});break;case"thisWeek":const n=new Date(a);n.setDate(a.getDate()-a.getDay()),n.setHours(0,0,0,0),e=e.filter(c=>new Date(c.orderDate)>=n);break;case"last30Days":r=new Date(a.getTime()-30*24*60*60*1e3),e=e.filter(c=>new Date(c.orderDate)>=r);break;case"thisMonth":r=new Date(a.getFullYear(),a.getMonth(),1),e=e.filter(c=>new Date(c.orderDate)>=r);break;case"thisYear":r=new Date(a.getFullYear(),0,1),e=e.filter(c=>new Date(c.orderDate)>=r);break}}return e}),O=t=>m(void 0,null,function*(){u.value=!0;try{const e=k(k(k({},p.value),o.value),t),a=yield Ne(e);return s.value=a.list,i.value=a.total,b.value=a.summary,a}catch(e){throw console.error("获取资料列表失败:",e),e}finally{u.value=!1}}),N=()=>O(),T=t=>(o.value=k(k({},o.value),t),p.value.page=1,O()),Y=(t,e)=>(p.value.page=t,e&&(p.value.pageSize=e),O()),K=()=>(o.value={status:"pending",dateRange:[],searchKeyword:"",assigneeId:"",orderAmountRange:[]},p.value.page=1,O()),W=()=>m(void 0,null,function*(){try{return l.value=yield Ce(),l.value}catch(t){throw console.error("获取分配成员列表失败:",t),t}}),M=t=>m(void 0,null,function*(){try{const e=yield Te(t);return e.success&&(s.value=s.value.map(a=>t.dataIds.includes(a.id)?L(k({},a),{status:"assigned",assigneeId:t.assigneeId,assigneeName:t.assigneeName,updateTime:new Date().toISOString()}):a),S.value=[],yield N()),e}catch(e){throw console.error("批量分配资料失败:",e),e}}),q=(t,e)=>{if(!I.value[t])I.value[t]={members:e.map(a=>({id:a.id,name:a.name,assignmentCount:0,lastAssignedAt:void 0})),currentIndex:0,lastRoundCompleted:!1};else{const a=I.value[t],r=e.map(n=>a.members.find(w=>w.id===n.id)||{id:n.id,name:n.name,assignmentCount:0,lastAssignedAt:void 0});I.value[t].members=r}},G=(t,e)=>{const a=I.value[t];if(!a||a.members.length===0)return[];const r=[],n=[...a.members];n.sort((c,w)=>c.assignmentCount!==w.assignmentCount?c.assignmentCount-w.assignmentCount:!c.lastAssignedAt&&!w.lastAssignedAt?0:c.lastAssignedAt?w.lastAssignedAt?new Date(c.lastAssignedAt).getTime()-new Date(w.lastAssignedAt).getTime():1:-1);for(let c=0;c<e;c++){const w=c%n.length,z=n[w];r.push({id:z.id,name:z.name});const B=a.members.findIndex(pe=>pe.id===z.id);B!==-1&&(a.members[B].assignmentCount++,a.members[B].lastAssignedAt=new Date().toISOString())}return r},J=t=>m(void 0,null,function*(){try{q(t.departmentId,t.members);let e=[];if(t.mode==="leader"&&t.leaderId&&t.leaderName)e=t.dataIds.map(r=>({dataId:r,assigneeId:t.leaderId,assigneeName:t.leaderName}));else{const r=G(t.departmentId,t.dataIds.length);e=t.dataIds.map((n,c)=>({dataId:n,assigneeId:r[c%r.length].id,assigneeName:r[c%r.length].name}))}const a={success:!0,message:"轮流分配成功"};return a.success&&(s.value=s.value.map(r=>{const n=e.find(c=>c.dataId===r.id);return n?L(k({},r),{status:"assigned",assigneeId:n.assigneeId,assigneeName:n.assigneeName,updateTime:new Date().toISOString()}):r}),S.value=[],yield N()),a}catch(e){throw console.error("轮流批量分配资料失败:",e),e}}),te=t=>m(void 0,null,function*(){try{const e=yield be(t);return e.success&&(s.value=s.value.map(a=>t.dataIds.includes(a.id)?L(k({},a),{status:"archived",updateTime:new Date().toISOString()}):a),S.value=[],yield N()),e}catch(e){throw console.error("批量封存资料失败:",e),e}}),ae=t=>m(void 0,null,function*(){try{const e={success:!0,message:"封存成功"};return e.success&&(s.value=s.value.map(a=>a.id===t.dataId?L(k({},a),{status:"archived",archiveInfo:{duration:t.duration,reason:t.reason,remark:t.remark,unarchiveTime:t.unarchiveTime,archiveTime:new Date().toISOString()},updateTime:new Date().toISOString()}):a),yield N()),e}catch(e){throw console.error("封存资料失败:",e),e}}),re=(t,e)=>m(void 0,null,function*(){try{const a=yield Me({dataId:t,reason:e});if(a.success){const r=s.value.findIndex(n=>n.id===t);r>-1&&(s.value[r]=L(k({},s.value[r]),{status:"recovered",assigneeId:void 0,assigneeName:void 0,assigneeDepartment:void 0,updateTime:new Date().toISOString()})),yield N()}return a}catch(a){throw console.error("回收资料失败:",a),a}}),se=(t,e)=>m(void 0,null,function*(){try{const a=yield ke({dataId:t,reason:e});if(a.success){const r=s.value.findIndex(n=>n.id===t);r>-1&&s.value.splice(r,1),yield N()}return a}catch(a){throw console.error("删除资料失败:",a),a}}),ne=t=>m(void 0,null,function*(){A.value=!0;try{return y.value=yield _e(t),Q(t),y.value}catch(e){throw console.error("客户搜索失败:",e),e}finally{A.value=!1}}),Q=t=>{const e=[];if(t.phone&&e.push(`手机号: ${t.phone}`),t.customerCode&&e.push(`客户编码: ${t.customerCode}`),t.orderNo&&e.push(`订单号: ${t.orderNo}`),t.trackingNo&&e.push(`物流单号: ${t.trackingNo}`),t.customerName&&e.push(`客户: ${t.customerName}`),e.length>0){const a={text:e.join(", "),time:new Date().toLocaleString(),params:t},r=v.value.findIndex(n=>n.text===a.text);r>-1&&v.value.splice(r,1),v.value.unshift(a),v.value.length>10&&(v.value=v.value.slice(0,10))}},oe=()=>{v.value=[]},ie=t=>m(void 0,null,function*(){try{return U.value=yield $e(t),U.value}catch(e){throw console.error("获取统计数据失败:",e),e}}),de=t=>{const e=S.value.indexOf(t);e>-1?S.value.splice(e,1):S.value.push(t)},ce=t=>{t?S.value=$.value.map(e=>e.id):S.value=[]},ue=()=>{S.value=[]},le=t=>m(void 0,null,function*(){try{const e=yield Oe(t),a=window.URL.createObjectURL(e),r=document.createElement("a");return r.href=a,r.download=`资料列表_${new Date().toISOString().split("T")[0]}.${t.format}`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),!0}catch(e){throw console.error("导出数据失败:",e),e}}),me=t=>m(void 0,null,function*(){try{return yield Re(t)}catch(e){throw console.error("获取客户详情失败:",e),e}}),V=t=>m(void 0,null,function*(){try{D.value=!0;const e=yield Ue(t);return H.value=e.list,R.value=e.total,e}catch(e){throw console.error("获取分配历史失败:",e),e}finally{D.value=!1}}),ge=t=>m(void 0,null,function*(){try{const e=yield He(t);return h.value[t]=e,e}catch(e){throw console.error("获取部门轮流分配状态失败:",e),e}}),X=(t,e)=>m(void 0,null,function*(){try{yield Le(t,e),h.value[t]=e}catch(a){throw console.error("更新部门轮流分配状态失败:",a),a}}),he=t=>m(void 0,null,function*(){try{F.value=!0;const e=yield Fe(t);return P.value=e,e}catch(e){throw console.error("获取分配统计失败:",e),e}finally{F.value=!1}}),j=t=>m(void 0,null,function*(){try{yield Pe(t),H.value.length>0&&(yield V({}))}catch(e){throw console.error("记录分配历史失败:",e),e}});return{dataList:s,total:i,loading:u,searchLoading:A,summary:b,pagination:p,filters:o,assigneeOptions:l,searchResults:y,searchHistory:v,statistics:U,selectedDataIds:S,departmentAssignmentState:I,assignmentMode:_,assignmentHistory:H,assignmentHistoryTotal:R,assignmentHistoryLoading:D,departmentRoundRobinStates:h,assignmentStats:P,assignmentStatsLoading:F,hasSelectedData:x,selectedDataCount:d,filteredDataList:$,fetchDataList:O,refreshData:N,setFilters:T,setPagination:Y,resetFilters:K,fetchAssigneeOptions:W,batchAssignData:M,batchRoundRobinAssignData:J,initializeDepartmentState:q,getNextAssignees:G,batchArchiveData:te,archiveData:ae,recoverData:re,deleteData:se,searchCustomer:ne,addToSearchHistory:Q,clearSearchHistory:oe,fetchStatistics:ie,toggleSelectData:de,toggleSelectAll:ce,clearSelection:ue,exportData:le,getCustomerDetail:me,fetchAssignmentHistory:V,fetchDepartmentRoundRobinState:ge,updateDepartmentRoundRobinState:X,fetchAssignmentStats:he,recordAssignmentHistory:j,batchRoundRobinAssignDataWithHistory:t=>m(void 0,null,function*(){try{yield J(t);const e=new Date().toISOString(),a={id:"current_user",name:"当前用户"};for(const n of t.dataIds)yield j({dataId:n,assignType:"roundrobin",assignMode:t.assignMode,toUserId:"assigned_user_id",toUserName:"assigned_user_name",departmentId:t.departmentId,departmentName:"department_name",operatorId:a.id,operatorName:a.name,remark:t.remark});const r=h.value[t.departmentId];r&&(yield X(t.departmentId,r))}catch(e){throw console.error("轮流分配（含历史记录）失败:",e),e}}),batchCrossDepartmentAssignData:t=>m(void 0,null,function*(){try{u.value=!0,yield new Promise(r=>setTimeout(r,1e3)),t.assignments.forEach(r=>{const n=s.value.find(c=>c.id===r.dataId);n&&(n.assigneeId=r.assigneeId,n.assigneeName=r.assigneeName,n.status="assigned",n.assignTime=new Date().toISOString(),n.operationRecords=n.operationRecords||[],n.operationRecords.unshift({id:`op_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"cross_department_assign",description:`跨部门智能分配给 ${r.assigneeName}（${r.department}）`,operatorId:"current_user",operatorName:"当前用户",createTime:new Date().toISOString(),remark:t.remark}),n.assignmentHistory||(n.assignmentHistory=[]),n.assignmentHistory.unshift({id:`ah_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,dataId:r.dataId,assignType:"cross_department",assignMode:t.strategy,toUserId:r.assigneeId,toUserName:r.assigneeName,departmentId:"",departmentName:r.department,operatorId:"current_user",operatorName:"当前用户",createTime:new Date().toISOString(),remark:t.remark}),n.currentAssignment={type:"cross_department",mode:t.strategy,assignTime:new Date().toISOString(),assigneeId:r.assigneeId,assigneeName:r.assigneeName,departmentId:"",departmentName:r.department})});const e=new Date().toISOString(),a={id:"current_user",name:"当前用户"};for(const r of t.assignments)yield j({dataId:r.dataId,assignType:"cross_department",assignMode:t.strategy,toUserId:r.assigneeId,toUserName:r.assigneeName,departmentId:"",departmentName:r.department,operatorId:a.id,operatorName:a.name,remark:t.remark});console.log(`跨部门智能分配完成: ${t.assignments.length} 条资料，策略: ${t.strategy}`)}catch(e){throw console.error("跨部门智能分配失败:",e),e}finally{u.value=!1}})}});export{Be as u};
