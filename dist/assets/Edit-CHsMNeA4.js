const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/uploadService-rJoD_mJD.js","assets/index-BGtT17ll.js","assets/vendor-BtukhyiH.js","assets/elementPlus-DxaqjplL.js","assets/utils-DfI7e5Rl.js","assets/index-Cj-RrGL6.css"])))=>i.map(i=>d[i]);
import{u as e,d as a,j as l,l as t,c as r,_ as o}from"./index-BGtT17ll.js";import{l as s,aA as u,aC as d,r as n,Z as i,b as c,ag as p,m,q as f,p as h,U as v,O as b,S as g,u as _,M as y,Q as V,F as w,a9 as N,T as k,a7 as P}from"./vendor-BtukhyiH.js";import{L as T,F as U,C,E as q}from"./elementPlus-DxaqjplL.js";import{m as x}from"./phone-CSnHMTQT.js";import{P as S}from"./phoneSync-DnGy6hcf.js";import{u as j}from"./service-CQY3-CML.js";import{isProduction as A}from"./env-DLalhsF6.js";import"./utils-DfI7e5Rl.js";const I={class:"service-edit"},O={class:"page-header"},L={class:"header-left"},$={class:"header-actions"},E={class:"form-section"},B={class:"order-input-group"},D={style:{float:"right",color:"#8492a6","font-size":"13px"}},F={style:{float:"right",color:"#8492a6","font-size":"13px"}},R={class:"form-section"},z={class:"phone-management"},M={class:"form-section"},J={class:"form-section"},K={class:"form-section"},Q={class:"phone-management"},W={class:"form-section"},Z={class:"form-section"},G=["src"],H={class:"order-search"},X={class:"dialog-footer"},Y={class:"dialog-footer"},ee=o(s({__name:"Edit",setup(o){const s=u(),ee=d(),ae=r(s),le=j(),te=e(),re=a(),{isMobile:oe}=l(),se=n(),ue=n(!1),de=n(!1),ne=n(!1),ie=n(""),ce=n(!1),pe=n(""),me=n([]),fe=n([]),he=n([]),ve=n(!1),be=n(),ge=n(!1),_e=n(!1),ye=n(),Ve=n(!1),we=i({phone:"",remark:""}),Ne=i({phone:"",remark:""}),ke={phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}]},Pe=i({id:"",serviceNumber:"",orderNumber:"",serviceType:"",status:"",priority:"",customerName:"",customerPhone:"",assignedTo:"",productName:"",productSpec:"",quantity:1,price:0,reason:"",description:"",contactName:"",contactPhone:"",contactAddress:"",remark:"",customerId:"",contactId:"",createdBy:"",createTime:"",updateTime:""}),Te=n([]),Ue=n([]),Ce=n([]),qe={orderNumber:[{required:!0,message:"请输入原订单号",trigger:"blur"}],serviceType:[{required:!0,message:"请选择服务类型",trigger:"change"}],customerName:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],customerPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],productName:[{required:!0,message:"请输入商品名称",trigger:"blur"}],quantity:[{required:!0,message:"请输入数量",trigger:"blur"}],price:[{required:!0,message:"请输入单价",trigger:"blur"}],reason:[{required:!0,message:"请选择问题原因",trigger:"change"}],description:[{required:!0,message:"请输入问题描述",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],contactAddress:[{required:!0,message:"请输入联系地址",trigger:"blur"}]},xe=()=>{s.back()},Se=async()=>{if(se.value)try{if(await se.value.validate(),ue.value=!0,A()){if(!(await fetch(`/api/service/${Pe.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Pe)})).ok)throw new Error("保存失败");q.success("保存成功")}else{const e={serviceNumber:Pe.serviceNumber,orderNumber:Pe.orderNumber,serviceType:Pe.serviceType,status:Pe.status,priority:Pe.priority,customerName:Pe.customerName,customerPhone:Pe.customerPhone,assignedTo:Pe.assignedTo,productName:Pe.productName,productSpec:Pe.productSpec,quantity:Pe.quantity,price:Pe.price,reason:Pe.reason,description:Pe.description,contactName:Pe.contactName,contactAddress:Pe.contactAddress,remark:Pe.remark,updateTime:(new Date).toISOString().replace("T"," ").substring(0,19)};le.updateService(Pe.id,e),q.success("保存成功")}ae.push("/service/list")}catch(e){console.error("Save failed:",e),q.error("保存失败")}finally{ue.value=!1}},je=()=>{Pe.orderNumber?(ce.value=!0,$e()):q.warning("请输入订单号")},Ae=async()=>{if(be.value)try{await be.value.validate(),ge.value=!0,await new Promise(e=>setTimeout(e,1e3));const a={id:Date.now(),phone:we.phone,remark:we.remark||"无备注"};fe.value.push(a),Pe.customerPhone=a.phone;try{const e=Pe.customerId||"default-customer-id",l=await S.syncCustomerPhone(e,{id:a.id,phone:a.phone,remark:a.remark});l.success?q.success("添加成功，已同步到客户详情"):q.warning("添加成功，但同步失败："+l.message)}catch(e){console.error("同步客户手机号失败:",e),q.warning("添加成功，但同步失败")}Oe()}catch(a){console.error("添加客户手机号失败:",a),q.error("添加失败")}finally{ge.value=!1}},Ie=async()=>{if(ye.value)try{await ye.value.validate(),Ve.value=!0,await new Promise(e=>setTimeout(e,1e3));const a={id:Date.now(),phone:Ne.phone,remark:Ne.remark||"无备注"};he.value.push(a),Pe.contactPhone=a.phone;try{const e=Pe.contactId||"default-contact-id",l=await S.syncContactPhone(e,{id:a.id,phone:a.phone,remark:a.remark});l.success?q.success("添加成功，已同步到联系人详情"):q.warning("添加成功，但同步失败："+l.message)}catch(e){console.error("同步联系手机号失败:",e),q.warning("添加成功，但同步失败")}Le()}catch(a){console.error("添加联系手机号失败:",a),q.error("添加失败")}finally{Ve.value=!1}},Oe=()=>{ve.value=!1,we.phone="",we.remark="",be.value&&be.value.clearValidate()},Le=()=>{_e.value=!1,Ne.phone="",Ne.remark="",ye.value&&ye.value.clearValidate()},$e=()=>{if(A())fetch(`/api/orders/search?keyword=${pe.value}`).then(e=>e.json()).then(e=>{me.value=e}).catch(e=>{console.error("搜索订单失败:",e),q.error("搜索订单失败")});else{const e=pe.value.trim().toLowerCase(),a=re.orders||[];me.value=e?a.filter(a=>a.orderNumber?.toLowerCase().includes(e)||a.customerName?.toLowerCase().includes(e)||a.productName?.toLowerCase().includes(e)).slice(0,10):a.slice(0,10)}},Ee=e=>{Pe.orderNumber=e.orderNumber,Pe.customerName=e.customerName,Pe.customerPhone=e.customerPhone||"",Pe.productName=e.productName,Pe.productSpec=e.productSpec||"",Pe.quantity=e.quantity||1,Pe.price=e.price||e.totalAmount||0,Pe.contactName=e.customerName,Pe.contactPhone=e.customerPhone||"",Pe.contactAddress=e.shippingAddress||"",de.value=!0,ce.value=!1,q.success("订单信息已加载")},Be=e=>{ie.value=e.url,ne.value=!0},De=e=>{console.log("Remove file:",e)},Fe=async e=>{if(e.raw){const l=e.raw.type.startsWith("image/"),r=e.raw.size/1024/1024<5;if(!l){q.error("只能上传图片文件!");const a=Te.value.indexOf(e);return void(a>-1&&Te.value.splice(a,1))}if(!r){q.error("图片大小不能超过 5MB!");const a=Te.value.indexOf(e);return void(a>-1&&Te.value.splice(a,1))}try{const{uploadImage:a}=await t(async()=>{const{uploadImage:e}=await import("./uploadService-rJoD_mJD.js");return{uploadImage:e}},__vite__mapDeps([0,1,2,3,4,5])),l=await a(e.raw,"service");if(l.success&&l.url)e.url=l.url,e.status="success",q.success("图片上传成功");else{const a=Te.value.indexOf(e);a>-1&&Te.value.splice(a,1),q.error(l.message||"图片上传失败")}}catch(a){console.error("图片上传失败:",a);const l=Te.value.indexOf(e);l>-1&&Te.value.splice(l,1),q.error("图片上传失败，请重试")}}};return c(()=>{(async()=>{try{const e=ee.params.id;if(console.log("Loading service detail for ID:",e),!e)return q.error("售后ID不存在"),void ae.push("/service/list");if(A()){const a=await fetch(`/api/service/${e}`);if(!a.ok)throw new Error("加载失败");const l=await a.json();Object.assign(Pe,l)}else{const a=le.getServiceById(e);if(!a)return q.error("售后记录不存在"),void ae.push("/service/list");Object.assign(Pe,{id:a.id,serviceNumber:a.serviceNumber,orderNumber:a.orderNumber,serviceType:a.serviceType,status:a.status,priority:a.priority,customerName:a.customerName,customerPhone:a.customerPhone,assignedTo:a.assignedTo||"",productName:a.productName,productSpec:a.productSpec||"",quantity:a.quantity||1,price:a.price||0,reason:a.reason,description:a.description,contactName:a.contactName||a.customerName,contactPhone:a.contactPhone||a.customerPhone,contactAddress:a.contactAddress||"",remark:a.remark||"",customerId:a.customerId||"",contactId:a.contactId||"",createdBy:a.createdBy,createTime:a.createTime,updateTime:a.updateTime}),a.attachments&&a.attachments.length>0&&(Te.value=a.attachments.map((e,a)=>({name:`附件${a+1}.jpg`,url:e}))),de.value=!0}}catch(e){console.error("Failed to load service detail:",e),q.error("加载售后详情失败"),ae.push("/service/list")}})(),(async()=>{try{fe.value=[{id:1,phone:"13800138001",remark:"主要联系方式"},{id:2,phone:"13800138002",remark:"备用联系方式"}]}catch(e){console.error("加载客户手机号失败:",e)}})(),(async()=>{try{he.value=[{id:1,phone:"13800138003",remark:"联系人手机"},{id:2,phone:"13800138004",remark:"紧急联系方式"}]}catch(e){console.error("加载联系手机号失败:",e)}})(),(()=>{if(A())fetch("/api/users").then(e=>e.json()).then(e=>{Ce.value=e.map(e=>({id:e.id,name:e.name||e.username}))}).catch(e=>{console.error("加载用户列表失败:",e)});else{const e=te.users||[];Ce.value=e.map(e=>({id:e.id,name:e.name||e.username}))}})()}),(e,a)=>{const l=p("el-button"),t=p("el-input"),r=p("el-form-item"),o=p("el-col"),s=p("el-row"),u=p("el-option"),d=p("el-select"),n=p("el-option-group"),i=p("el-input-number"),c=p("el-icon"),q=p("el-upload"),S=p("el-form"),j=p("el-card"),A=p("el-dialog"),ee=p("el-table-column"),ae=p("el-table");return f(),m("div",I,[h("div",O,[h("div",L,[v(l,{type:"primary",icon:_(T),onClick:xe,class:"back-btn"},{default:b(()=>[...a[31]||(a[31]=[g(" 返回 ",-1)])]),_:1},8,["icon"]),a[32]||(a[32]=h("h1",{class:"page-title"},"编辑售后",-1))]),h("div",$,[v(l,{onClick:xe},{default:b(()=>[...a[33]||(a[33]=[g("取消",-1)])]),_:1}),v(l,{type:"primary",onClick:Se,loading:ue.value},{default:b(()=>[...a[34]||(a[34]=[g(" 保存 ",-1)])]),_:1},8,["loading"])])]),v(j,{shadow:"never"},{default:b(()=>[v(S,{ref_key:"formRef",ref:se,model:Pe,rules:qe,"label-width":"120px","label-position":_(oe)?"top":"right",class:"service-form"},{default:b(()=>[h("div",E,[a[36]||(a[36]=h("h3",{class:"section-title"},"基本信息",-1)),v(s,{gutter:20},{default:b(()=>[v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"售后单号",prop:"serviceNumber"},{default:b(()=>[v(t,{modelValue:Pe.serviceNumber,"onUpdate:modelValue":a[0]||(a[0]=e=>Pe.serviceNumber=e),disabled:"",placeholder:"系统自动生成"},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"原订单号",prop:"orderNumber"},{default:b(()=>[h("div",B,[v(t,{modelValue:Pe.orderNumber,"onUpdate:modelValue":a[1]||(a[1]=e=>Pe.orderNumber=e),placeholder:"请输入原订单号",disabled:de.value},null,8,["modelValue","disabled"]),v(l,{type:"primary",icon:_(U),onClick:je,disabled:de.value},{default:b(()=>[...a[35]||(a[35]=[g(" 搜索 ",-1)])]),_:1},8,["icon","disabled"])])]),_:1})]),_:1},8,["span"])]),_:1}),v(s,{gutter:20},{default:b(()=>[v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"服务类型",prop:"serviceType"},{default:b(()=>[v(d,{modelValue:Pe.serviceType,"onUpdate:modelValue":a[2]||(a[2]=e=>Pe.serviceType=e),placeholder:"请选择服务类型",style:{width:"100%"}},{default:b(()=>[v(u,{label:"退货",value:"return"}),v(u,{label:"换货",value:"exchange"}),v(u,{label:"维修",value:"repair"}),v(u,{label:"退款",value:"refund"}),v(u,{label:"投诉",value:"complaint"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["span"]),v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"优先级",prop:"priority"},{default:b(()=>[v(d,{modelValue:Pe.priority,"onUpdate:modelValue":a[3]||(a[3]=e=>Pe.priority=e),placeholder:"请选择优先级",style:{width:"100%"}},{default:b(()=>[v(u,{label:"低",value:"low"}),v(u,{label:"中",value:"medium"}),v(u,{label:"高",value:"high"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["span"])]),_:1}),v(s,{gutter:20},{default:b(()=>[v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"处理人员",prop:"assignedTo"},{default:b(()=>[v(d,{modelValue:Pe.assignedTo,"onUpdate:modelValue":a[4]||(a[4]=e=>Pe.assignedTo=e),placeholder:"请选择处理人员",style:{width:"100%"},clearable:"",filterable:"",onChange:e.handleAssignedToChange},{default:b(()=>[Ue.value.length>0?(f(),y(n,{key:0,label:"最近选择"},{default:b(()=>[(f(!0),m(w,null,N(Ue.value,e=>(f(),y(u,{key:"recent-"+e.id,label:e.name,value:e.name},{default:b(()=>[h("span",null,k(e.name),1),h("span",D,k(e.department||"未分配部门"),1)]),_:2},1032,["label","value"]))),128))]),_:1})):V("",!0),v(n,{label:"所有用户"},{default:b(()=>[(f(!0),m(w,null,N(e.sortedUserOptions,e=>(f(),y(u,{key:e.id,label:e.name,value:e.name},{default:b(()=>[h("span",null,k(e.name),1),h("span",F,k(e.department||"未分配部门"),1)]),_:2},1032,["label","value"]))),128))]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1},8,["span"]),v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"状态",prop:"status"},{default:b(()=>[v(d,{modelValue:Pe.status,"onUpdate:modelValue":a[5]||(a[5]=e=>Pe.status=e),placeholder:"请选择状态",style:{width:"100%"}},{default:b(()=>[v(u,{label:"待处理",value:"pending"}),v(u,{label:"处理中",value:"processing"}),v(u,{label:"已解决",value:"resolved"}),v(u,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["span"])]),_:1})]),h("div",R,[a[38]||(a[38]=h("h3",{class:"section-title"},"客户信息",-1)),v(s,{gutter:20},{default:b(()=>[v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"客户姓名",prop:"customerName"},{default:b(()=>[v(t,{modelValue:Pe.customerName,"onUpdate:modelValue":a[6]||(a[6]=e=>Pe.customerName=e),placeholder:"请输入客户姓名",disabled:de.value},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["span"]),v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"联系电话",prop:"customerPhone"},{default:b(()=>[h("div",z,[v(d,{modelValue:Pe.customerPhone,"onUpdate:modelValue":a[7]||(a[7]=e=>Pe.customerPhone=e),placeholder:"请选择联系电话",style:{width:"100%"},clearable:""},{default:b(()=>[(f(!0),m(w,null,N(fe.value,e=>(f(),y(u,{key:e.id,label:_(x)(e.phone),value:e.phone},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),v(l,{type:"primary",size:"small",onClick:a[8]||(a[8]=e=>ve.value=!0),style:{"margin-left":"8px"},icon:_(C)},{default:b(()=>[...a[37]||(a[37]=[g(" 新增 ",-1)])]),_:1},8,["icon"])])]),_:1})]),_:1},8,["span"])]),_:1})]),h("div",M,[a[39]||(a[39]=h("h3",{class:"section-title"},"商品信息",-1)),v(s,{gutter:20},{default:b(()=>[v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"商品名称",prop:"productName"},{default:b(()=>[v(t,{modelValue:Pe.productName,"onUpdate:modelValue":a[9]||(a[9]=e=>Pe.productName=e),placeholder:"请输入商品名称",disabled:de.value},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["span"]),v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"商品规格",prop:"productSpec"},{default:b(()=>[v(t,{modelValue:Pe.productSpec,"onUpdate:modelValue":a[10]||(a[10]=e=>Pe.productSpec=e),placeholder:"请输入商品规格",disabled:de.value},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["span"])]),_:1}),v(s,{gutter:20},{default:b(()=>[v(o,{span:_(oe)?24:8},{default:b(()=>[v(r,{label:"数量",prop:"quantity"},{default:b(()=>[v(i,{modelValue:Pe.quantity,"onUpdate:modelValue":a[11]||(a[11]=e=>Pe.quantity=e),min:1,max:999,style:{width:"100%"},disabled:de.value},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["span"]),v(o,{span:_(oe)?24:8},{default:b(()=>[v(r,{label:"单价",prop:"price"},{default:b(()=>[v(i,{modelValue:Pe.price,"onUpdate:modelValue":a[12]||(a[12]=e=>Pe.price=e),min:0,precision:2,style:{width:"100%"},disabled:de.value},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["span"]),v(o,{span:_(oe)?24:8},{default:b(()=>[v(r,{label:"总金额"},{default:b(()=>[v(t,{value:`¥${(Pe.quantity*Pe.price).toFixed(2)}`,disabled:""},null,8,["value"])]),_:1})]),_:1},8,["span"])]),_:1})]),h("div",J,[a[40]||(a[40]=h("h3",{class:"section-title"},"申请信息",-1)),v(s,{gutter:20},{default:b(()=>[v(o,{span:24},{default:b(()=>[v(r,{label:"问题原因",prop:"reason"},{default:b(()=>[v(d,{modelValue:Pe.reason,"onUpdate:modelValue":a[13]||(a[13]=e=>Pe.reason=e),placeholder:"请选择问题原因",style:{width:"100%"},filterable:"","allow-create":""},{default:b(()=>[v(u,{label:"商品质量问题",value:"商品质量问题"}),v(u,{label:"商品损坏",value:"商品损坏"}),v(u,{label:"商品不符合描述",value:"商品不符合描述"}),v(u,{label:"发错商品",value:"发错商品"}),v(u,{label:"物流损坏",value:"物流损坏"}),v(u,{label:"不喜欢/不合适",value:"不喜欢/不合适"}),v(u,{label:"其他原因",value:"其他原因"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(s,{gutter:20},{default:b(()=>[v(o,{span:24},{default:b(()=>[v(r,{label:"问题描述",prop:"description"},{default:b(()=>[v(t,{modelValue:Pe.description,"onUpdate:modelValue":a[14]||(a[14]=e=>Pe.description=e),type:"textarea",rows:4,placeholder:"请详细描述遇到的问题",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),h("div",K,[a[42]||(a[42]=h("h3",{class:"section-title"},"联系信息",-1)),v(s,{gutter:20},{default:b(()=>[v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"联系人",prop:"contactName"},{default:b(()=>[v(t,{modelValue:Pe.contactName,"onUpdate:modelValue":a[15]||(a[15]=e=>Pe.contactName=e),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),v(o,{span:_(oe)?24:12},{default:b(()=>[v(r,{label:"联系电话",prop:"contactPhone"},{default:b(()=>[h("div",Q,[v(d,{modelValue:Pe.contactPhone,"onUpdate:modelValue":a[16]||(a[16]=e=>Pe.contactPhone=e),placeholder:"请选择联系电话",style:{width:"100%"},clearable:""},{default:b(()=>[(f(!0),m(w,null,N(he.value,e=>(f(),y(u,{key:e.id,label:_(x)(e.phone),value:e.phone},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),v(l,{type:"primary",size:"small",onClick:a[17]||(a[17]=e=>_e.value=!0),style:{"margin-left":"8px"},icon:_(C)},{default:b(()=>[...a[41]||(a[41]=[g(" 新增 ",-1)])]),_:1},8,["icon"])])]),_:1})]),_:1},8,["span"])]),_:1}),v(s,{gutter:20},{default:b(()=>[v(o,{span:24},{default:b(()=>[v(r,{label:"联系地址",prop:"contactAddress"},{default:b(()=>[v(t,{modelValue:Pe.contactAddress,"onUpdate:modelValue":a[18]||(a[18]=e=>Pe.contactAddress=e),placeholder:"请输入详细地址"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),h("div",W,[a[44]||(a[44]=h("h3",{class:"section-title"},"相关附件",-1)),v(s,{gutter:20},{default:b(()=>[v(o,{span:24},{default:b(()=>[v(r,{label:"上传图片"},{default:b(()=>[v(q,{"file-list":Te.value,"onUpdate:fileList":a[19]||(a[19]=e=>Te.value=e),action:"#","list-type":"picture-card","auto-upload":!1,"on-preview":Be,"on-remove":De,"on-change":Fe,multiple:"",accept:"image/*"},{default:b(()=>[v(c,null,{default:b(()=>[v(_(C))]),_:1})]),_:1},8,["file-list"]),a[43]||(a[43]=h("div",{class:"upload-tip"}," 支持 jpg、png、gif 格式，单个文件不超过 5MB，最多上传 9 张图片 ",-1))]),_:1})]),_:1})]),_:1})]),h("div",Z,[a[45]||(a[45]=h("h3",{class:"section-title"},"备注信息",-1)),v(s,{gutter:20},{default:b(()=>[v(o,{span:24},{default:b(()=>[v(r,{label:"备注",prop:"remark"},{default:b(()=>[v(t,{modelValue:Pe.remark,"onUpdate:modelValue":a[20]||(a[20]=e=>Pe.remark=e),type:"textarea",rows:3,placeholder:"请输入备注信息",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["model","label-position"])]),_:1}),v(A,{modelValue:ne.value,"onUpdate:modelValue":a[21]||(a[21]=e=>ne.value=e),title:"图片预览",width:"50%"},{default:b(()=>[h("img",{src:ie.value,alt:"预览图片",style:{width:"100%"}},null,8,G)]),_:1},8,["modelValue"]),v(A,{modelValue:ce.value,"onUpdate:modelValue":a[24]||(a[24]=e=>ce.value=e),title:"搜索订单",width:"600px"},{footer:b(()=>[v(l,{onClick:a[23]||(a[23]=e=>ce.value=!1)},{default:b(()=>[...a[46]||(a[46]=[g("取消",-1)])]),_:1})]),default:b(()=>[h("div",H,[v(t,{modelValue:pe.value,"onUpdate:modelValue":a[22]||(a[22]=e=>pe.value=e),placeholder:"请输入订单号或客户信息",onKeyup:P($e,["enter"])},{append:b(()=>[v(l,{icon:_(U),onClick:$e},null,8,["icon"])]),_:1},8,["modelValue"]),v(ae,{data:me.value,style:{"margin-top":"16px"},onRowClick:Ee,"highlight-current-row":""},{default:b(()=>[v(ee,{prop:"orderNumber",label:"订单号",width:"150"}),v(ee,{prop:"customerName",label:"客户姓名",width:"100"}),v(ee,{prop:"productName",label:"商品名称"}),v(ee,{prop:"totalAmount",label:"订单金额",width:"100"},{default:b(({row:e})=>[g(" ¥"+k(e.totalAmount),1)]),_:1}),v(ee,{prop:"createTime",label:"下单时间",width:"150"})]),_:1},8,["data"])])]),_:1},8,["modelValue"]),v(A,{modelValue:ve.value,"onUpdate:modelValue":a[27]||(a[27]=e=>ve.value=e),title:"新增客户手机号",width:"400px","before-close":Oe},{footer:b(()=>[h("span",X,[v(l,{onClick:Oe},{default:b(()=>[...a[47]||(a[47]=[g("取消",-1)])]),_:1}),v(l,{type:"primary",onClick:Ae,loading:ge.value},{default:b(()=>[...a[48]||(a[48]=[g(" 确认添加 ",-1)])]),_:1},8,["loading"])])]),default:b(()=>[v(S,{ref_key:"addCustomerPhoneFormRef",ref:be,model:we,rules:ke,"label-width":"80px"},{default:b(()=>[v(r,{label:"手机号",prop:"phone"},{default:b(()=>[v(t,{modelValue:we.phone,"onUpdate:modelValue":a[25]||(a[25]=e=>we.phone=e),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),v(r,{label:"备注",prop:"remark"},{default:b(()=>[v(t,{modelValue:we.remark,"onUpdate:modelValue":a[26]||(a[26]=e=>we.remark=e),placeholder:"请输入备注（可选）",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),v(A,{modelValue:_e.value,"onUpdate:modelValue":a[30]||(a[30]=e=>_e.value=e),title:"新增联系手机号",width:"400px","before-close":Le},{footer:b(()=>[h("span",Y,[v(l,{onClick:Le},{default:b(()=>[...a[49]||(a[49]=[g("取消",-1)])]),_:1}),v(l,{type:"primary",onClick:Ie,loading:Ve.value},{default:b(()=>[...a[50]||(a[50]=[g(" 确认添加 ",-1)])]),_:1},8,["loading"])])]),default:b(()=>[v(S,{ref_key:"addContactPhoneFormRef",ref:ye,model:Ne,rules:ke,"label-width":"80px"},{default:b(()=>[v(r,{label:"手机号",prop:"phone"},{default:b(()=>[v(t,{modelValue:Ne.phone,"onUpdate:modelValue":a[28]||(a[28]=e=>Ne.phone=e),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),v(r,{label:"备注",prop:"remark"},{default:b(()=>[v(t,{modelValue:Ne.remark,"onUpdate:modelValue":a[29]||(a[29]=e=>Ne.remark=e),placeholder:"请输入备注（可选）",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-cb502c36"]]);export{ee as default};
