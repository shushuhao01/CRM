var Fe=Object.defineProperty,je=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var Me=(t,r,o)=>r in t?Fe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,x=(t,r)=>{for(var o in r||(r={}))qe.call(r,o)&&Me(t,o,r[o]);if(xe)for(var o of xe(r))He.call(r,o)&&Me(t,o,r[o]);return t},Ce=(t,r)=>je(t,Be(r));var T=(t,r,o)=>new Promise((l,m)=>{var h=u=>{try{A(o.next(u))}catch(U){m(U)}},L=u=>{try{A(o.throw(u))}catch(U){m(U)}},A=u=>u.done?l(u.value):Promise.resolve(u.value).then(h,L);A((o=o.apply(t,r)).next())});import{l as Pe,af as Ke,s as Ae,A as he,_ as Qe,e as R,b as We,w as ce,d as Te,c as Ue,z as Ye,n as Ge,B as Je,u as we,az as Ze,r as M,ag as w,aq as Xe,m as O,p as v,q as s,U as p,F as re,a9 as le,P as ze,M as C,O as i,I as me,R as fe,T as y,J as De,Q as j,S as z,a2 as et}from"./vendor-D8Vxqhr-.js";import{q as ue,u as tt,g as at,c as st,_ as nt}from"./settings-CuxbDWOu.js";import{i as ot,t as rt,u as lt,b as it,c as ct,d as ut,e as dt,f as vt,g as pt,h as gt,j as mt}from"./utils-ywHRn0uI.js";import{m as Re}from"./index-BwmIV1hk.js";import{E as W}from"./elementPlus-Bmwh7Rh8.js";const ft=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function ht(t){function r(l){return(...m)=>{if(!t.value)throw new Error("ECharts is not initialized yet.");return t.value[l].apply(t.value,m)}}function o(){const l=Object.create(null);return ft.forEach(m=>{l[m]=r(m)}),l}return o()}function _t(t,r,o){ce([o,t,r],([l,m,h],L,A)=>{let u=null;if(l&&m&&h){const{offsetWidth:U,offsetHeight:V}=l,ee=h===!0?{}:h,{throttle:Y=100,onResize:N}=ee;let _=!1;const E=()=>{m.resize(),N==null||N()},G=Y?rt(E,Y):E;u=new ResizeObserver(()=>{!_&&(_=!0,l.offsetWidth===U&&l.offsetHeight===V)||G()}),u.observe(l)}A(()=>{u&&(u.disconnect(),u=null)})})}const yt={autoresize:[Boolean,Object]},bt=/^on[^a-z]/,Ie=t=>bt.test(t);function kt(t){const r={};for(const o in t)Ie(o)||(r[o]=t[o]);return r}function _e(t,r){const o=Je(t)?we(t):t;return o&&typeof o=="object"&&"value"in o?o.value||r:o||r}const Ct="ecLoadingOptions";function At(t,r,o){const l=he(Ct,{}),m=R(()=>x(x({},_e(l,{})),o==null?void 0:o.value));Te(()=>{const h=t.value;h&&(r.value?h.showLoading(m.value):h.hideLoading())})}const Dt={loading:Boolean,loadingOptions:Object};let ie=null;const Ve="x-vue-echarts";function wt(){if(ie!=null)return ie;if(typeof HTMLElement=="undefined"||typeof customElements=="undefined")return ie=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(Ve)}catch(t){return ie=!1}return ie=!0}document.head.appendChild(document.createElement("style")).textContent=`x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
`;const Ot=wt(),Et="ecTheme",St="ecInitOptions",xt="ecUpdateOptions",Le=/(^&?~?!?)native:/;var $e=Pe({name:"echarts",props:x(x({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},yt),Dt),emits:{},inheritAttrs:!1,setup(t,{attrs:r}){const o=Ae(),l=Ae(),m=Ae(),h=he(Et,null),L=he(St,null),A=he(xt,null),{autoresize:u,manualUpdate:U,loading:V,loadingOptions:ee}=Qe(t),Y=R(()=>m.value||t.option||null),N=R(()=>t.theme||_e(h,{})),_=R(()=>t.initOptions||_e(L,{})),E=R(()=>t.updateOptions||_e(A,{})),G=R(()=>kt(r)),te={},B=We().proxy.$listeners,D={};B?Object.keys(B).forEach(f=>{Le.test(f)?te[f.replace(Le,"$1")]=B[f]:D[f]=B[f]}):Object.keys(r).filter(f=>Ie(f)).forEach(f=>{let g=f.charAt(2).toLowerCase()+f.slice(3);if(g.indexOf("native:")===0){const H=`on${g.charAt(7).toUpperCase()}${g.slice(8)}`;te[H]=r[f];return}g.substring(g.length-4)==="Once"&&(g=`~${g.substring(0,g.length-4)}`),D[g]=r[f]});function J(f){if(!o.value)return;const g=l.value=ot(o.value,N.value,_.value);t.group&&(g.group=t.group),Object.keys(D).forEach(K=>{let $=D[K];if(!$)return;let P=K.toLowerCase();P.charAt(0)==="~"&&(P=P.substring(1),$.__once__=!0);let se=g;if(P.indexOf("zr:")===0&&(se=g.getZr(),P=P.substring(3)),$.__once__){delete $.__once__;const ve=$;$=(...be)=>{ve(...be),se.off(P,$)}}se.on(P,$)});function H(){g&&!g.isDisposed()&&g.resize()}function de(){const K=f||Y.value;K&&g.setOption(K,E.value)}u.value?Ge(()=>{H(),de()}):de()}function F(f,g){t.manualUpdate&&(m.value=f),l.value?l.value.setOption(f,g||{}):J(f)}function ae(){l.value&&(l.value.dispose(),l.value=void 0)}let q=null;ce(U,f=>{typeof q=="function"&&(q(),q=null),f||(q=ce(()=>t.option,(g,H)=>{g&&(l.value?l.value.setOption(g,x({notMerge:g!==H},E.value)):J())},{deep:!0}))},{immediate:!0}),ce([N,_],()=>{ae(),J()},{deep:!0}),Te(()=>{t.group&&l.value&&(l.value.group=t.group)});const ye=ht(l);return At(l,V,ee),_t(l,u,o),Ue(()=>{J()}),Ye(()=>{Ot&&o.value?o.value.__dispose=ae:ae()}),x({chart:l,root:o,setOption:F,nonEventAttrs:G,nativeListeners:te},ye)},render(){const t=x(x({},this.nonEventAttrs),this.nativeListeners);return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",Ke(Ve,t)}});const Mt=t=>T(void 0,null,function*(){try{return yield ue.get("/api/dashboard/metrics",{params:t})}catch(r){return console.error("获取核心指标失败:",r),{todayOrders:0,newCustomers:0,todayRevenue:0,monthlyOrders:0}}}),zt=()=>T(void 0,null,function*(){try{return yield ue.get("/api/dashboard/rankings")}catch(t){return console.error("获取排行榜数据失败:",t),{sales:[],products:[]}}}),Rt=t=>T(void 0,null,function*(){try{return yield ue.get("/api/dashboard/charts",{params:t})}catch(r){return console.error("获取图表数据失败:",r),{revenue:[],orderStatus:[]}}}),Lt=()=>T(void 0,null,function*(){try{return yield ue.get("/api/dashboard/todos")}catch(t){return console.error("获取待办事项失败:",t),[]}}),$t=()=>T(void 0,null,function*(){try{return yield ue.get("/api/dashboard/quick-actions")}catch(t){return console.error("获取快捷操作失败:",t),[]}}),X={getMetrics:Mt,getRankings:zt,getChartData:Rt,getTodos:Lt,getQuickActions:$t},Pt={class:"dashboard"},Tt={class:"metrics-grid"},Ut={class:"metric-content"},It={class:"metric-info"},Vt={class:"metric-value"},Nt={class:"metric-label"},Ft={class:"charts-grid"},jt={class:"chart-header"},Bt={class:"chart-controls"},qt={class:"chart-container"},Ht={key:1,class:"empty-chart"},Kt={class:"chart-container"},Qt={key:1,class:"empty-chart"},Wt={class:"bottom-grid"},Yt={class:"chart-header"},Gt={class:"chart-title"},Jt={class:"ranking-list"},Zt={class:"ranking-position"},Xt={class:"ranking-info"},ea={class:"ranking-name"},ta={class:"ranking-performance"},aa={class:"performance-value"},sa={class:"performance-orders"},na={class:"quick-actions"},oa=["onClick"],ra={class:"action-label"},la={class:"chart-header"},ia={class:"message-list"},ca=["onClick"],ua={class:"message-content"},da={class:"message-title"},va={class:"message-time"},pa={class:"message-dialog"},ga={class:"message-dialog-header"},ma={class:"message-dialog-list"},fa=["onClick"],ha={class:"message-dialog-content"},_a={class:"message-dialog-title"},ya={class:"message-dialog-desc"},ba={class:"message-dialog-time"},ka={class:"message-dialog-actions"},Ca={key:0,class:"message-detail"},Aa={class:"message-detail-content"},Da={class:"message-detail-info"},wa=Pe({name:"DashboardView",__name:"Dashboard",setup(t){lt([it,ct,ut,dt,vt,pt,gt,mt]);const r=Ze(),o=st(r),l=tt(),m=at(),h=M("day"),L=M(!1),A=M(!1),u=M(null),U=R(()=>m.messages),V=R(()=>m.unreadCount),ee=R(()=>m.recentMessages.slice(0,5)),Y=()=>{const n=l.currentUser;if(!n)return{};const e=n.role==="super_admin"||n.role==="admin",c=n.role==="department_manager"||n.role==="manager";return e?{orders:"今日订单（全部）",customers:"新增客户（全部）",revenue:"今日业绩（全部）",monthlyOrders:"本月单数（全部）",monthlyRevenue:"本月业绩（全部）",service:"待处理售后（全部）"}:c?{orders:"今日订单（部门）",customers:"新增客户（部门）",revenue:"今日业绩（部门）",monthlyOrders:"本月单数（部门）",monthlyRevenue:"本月业绩（部门）",service:"待处理售后（部门）"}:{orders:"今日订单（个人）",customers:"新增客户（个人）",revenue:"今日业绩（个人）",monthlyOrders:"本月单数（个人）",monthlyRevenue:"本月业绩（个人）",service:"待处理售后（个人）"}},N=()=>{const n=l.currentUser;if(!n)return"本月业绩排名";const e=n.role==="super_admin"||n.role==="admin",c=n.role==="department_manager"||n.role==="manager";return e?"本月业绩排名（全部）":c?"本月业绩排名（部门）":"本月业绩排名（个人）"},_=M([{key:"orders",label:"今日订单",value:"0",change:"+0%",trend:"up",icon:"ShoppingCart",color:"#409EFF"},{key:"customers",label:"新增客户",value:"0",change:"+0%",trend:"up",icon:"User",color:"#67C23A"},{key:"revenue",label:"今日业绩",value:"¥0",change:"+0%",trend:"up",icon:"TrendCharts",color:"#E6A23C"},{key:"monthly-orders",label:"本月单数",value:"0",change:"+0%",trend:"up",icon:"DataBoard",color:"#722ED1"},{key:"monthly-revenue",label:"本月业绩",value:"¥0",change:"+0%",trend:"up",icon:"Coin",color:"#13C2C2"},{key:"service",label:"待处理售后",value:"0",change:"+0%",trend:"up",icon:"CustomerService",color:"#F56C6C",gradient:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)"},{key:"audit",label:"待审核订单",value:"0",change:"+0%",trend:"up",icon:"DocumentChecked",color:"#909399"},{key:"logistics",label:"待发货订单",value:"0",change:"+0%",trend:"up",icon:"Van",color:"#9C27B0"}]),E=M(!1),G=M({sales:[],products:[]}),te=M([]),B=M([]),D=M({xAxisData:[],orderData:[],signData:[],title:"业绩趋势"}),J=R(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(n){let e=`${n[0].axisValue}<br/>`;return n.forEach(c=>{const b=h.value==="day"?`${c.value}单`:`¥${c.value.toLocaleString()}`;e+=`${c.marker}${c.seriesName}: ${b}<br/>`}),e}},legend:{data:["下单业绩","签收业绩"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:D.value.xAxisData,axisLabel:{rotate:h.value==="day"?45:0}},yAxis:{type:"value",axisLabel:{formatter:h.value==="day"?"{value}单":"¥{value}"}},series:[{name:"下单业绩",type:"line",data:D.value.orderData,smooth:!0,itemStyle:{color:"#409EFF"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64, 158, 255, 0.3)"},{offset:1,color:"rgba(64, 158, 255, 0.1)"}]}}},{name:"签收业绩",type:"line",data:D.value.signData,smooth:!0,itemStyle:{color:"#67C23A"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(103, 194, 58, 0.3)"},{offset:1,color:"rgba(103, 194, 58, 0.1)"}]}}}]})),F=M([]),ae=R(()=>({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"订单状态",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:F.value}]})),q=n=>({已签收:"#67C23A",待发货:"#409EFF",运输中:"#E6A23C",待审核:"#909399",已取消:"#F56C6C",delivered:"#67C23A",pending_shipment:"#409EFF",in_transit:"#E6A23C",pending_audit:"#909399",cancelled:"#F56C6C"})[n]||"#909399",ye=n=>{o.push(n.route)},f=()=>{o.push("/performance/team")},g=n=>{u.value=n,A.value=!0},H=n=>{u.value=n,A.value=!0},de=n=>T(this,null,function*(){try{(yield Re.markMessageAsRead(n.id)).success?m.markAsRead(n.id):W.error("标记消息失败")}catch(e){console.error("标记消息为已读失败:",e),W.error("标记消息失败，请稍后重试")}}),K=()=>{u.value&&m.markAsRead(u.value.id),A.value=!1},$=()=>T(this,null,function*(){try{(yield Re.markAllMessagesAsRead()).success?(m.markAllAsRead(),W.success("所有消息已标记为已读")):W.error("标记消息失败")}catch(n){console.error("标记所有消息为已读失败:",n),W.error("标记消息失败，请稍后重试")}}),P=()=>{m.clearAllMessages(),L.value=!1},se=()=>{L.value=!1},ve=()=>{const n=l.currentUser;if(!n)return{};const e={userRole:n.role,userId:n.id,departmentId:n.departmentId||n.department};switch(n.role){case"super_admin":case"admin":e.dataScope="all";break;case"department_manager":case"manager":e.dataScope="department",e.departmentId=n.departmentId||n.department;break;case"sales_staff":case"customer_service":default:e.dataScope="personal",e.userId=n.id;break}return e},be=()=>T(this,null,function*(){var n,e;try{E.value=!0;const c=ve(),b=Ce(x({},c),{period:h.value}),[S,ge,k]=yield Promise.all([X.getMetrics(c),X.getRankings(),X.getChartData(b)]),[Q,ne]=yield Promise.all([X.getTodos(),X.getQuickActions()]);if(S){const d=Y();_.value[0].value=S.todayOrders.toString(),_.value[0].label=d.orders||"今日订单",_.value[1].value=S.newCustomers.toString(),_.value[1].label=d.customers||"新增客户",_.value[2].value=`¥${S.todayRevenue.toLocaleString()}`,_.value[2].label=d.revenue||"今日业绩",_.value[3].value=S.monthlyOrders.toString(),_.value[3].label=d.monthlyOrders||"本月单数",_.value[4]&&(_.value[4].value=`¥${((n=S.monthlyRevenue)==null?void 0:n.toLocaleString())||"0"}`,_.value[4].label=d.monthlyRevenue||"本月业绩"),_.value[5]&&S.pendingService!==void 0&&(_.value[5].value=S.pendingService.toString(),_.value[5].label=d.service||"待处理售后")}if(ge&&(G.value=ge),k&&(k.revenue&&k.revenue.length>0?D.value={xAxisData:k.revenue.map(d=>d.date),orderData:k.revenue.map(d=>d.amount),signData:k.revenue.map(d=>d.orders),title:pe()}:D.value={xAxisData:[],orderData:[],signData:[],title:pe()},k.orderStatus&&k.orderStatus.length>0?F.value=k.orderStatus.map(d=>({value:d.count,name:d.status,itemStyle:{color:q(d.status)}})):F.value=[]),Q&&Array.isArray(Q)){const d=((e=l.currentUser)==null?void 0:e.role)||"sales_staff",I=Q.filter(oe=>d==="super_admin"?!0:d==="department_manager"?oe.type!=="system":oe.type==="order"||oe.type==="customer");te.value=I}ne&&Array.isArray(ne)&&(B.value=ne);try{const d=yield m.loadMessagesFromAPI(c);d&&d.length>0&&console.log("系统消息加载成功:",d.length,"条消息")}catch(d){console.warn("加载系统消息失败:",d)}}catch(c){console.error("加载仪表板数据失败:",c),W.error("加载数据失败，请稍后重试")}finally{E.value=!1}}),pe=()=>{switch(h.value){case"day":return"今日不同时段成交趋势";case"week":return"最近7天成交趋势";case"month":return"本月成交趋势";default:return"业绩趋势"}};return ce(h,()=>T(this,null,function*(){try{E.value=!0;const n=ve(),e=Ce(x({},n),{period:h.value}),c=yield X.getChartData(e);c&&(c.revenue&&c.revenue.length>0?D.value={xAxisData:c.revenue.map(b=>b.date),orderData:c.revenue.map(b=>b.amount),signData:c.revenue.map(b=>b.orders),title:pe()}:D.value={xAxisData:[],orderData:[],signData:[],title:pe()},c.orderStatus&&c.orderStatus.length>0?F.value=c.orderStatus.map(b=>({value:b.count,name:b.status,itemStyle:{color:q(b.status)}})):F.value=[])}catch(n){console.error("重新加载图表数据失败:",n),W.error("加载图表数据失败")}finally{E.value=!1}})),Ue(()=>{be()}),(n,e)=>{var Se;const c=w("el-icon"),b=w("ArrowUp"),S=w("ArrowDown"),ge=w("Minus"),k=w("el-card"),Q=w("el-radio-button"),ne=w("el-radio-group"),d=w("el-empty"),I=w("el-button"),oe=w("el-tag"),Ne=w("el-avatar"),ke=w("el-badge"),Oe=w("el-dialog"),Ee=Xe("loading");return v(),O("div",Pt,[s("div",Tt,[(v(!0),O(re,null,le(_.value,a=>ze((v(),C(k,{class:"metric-card",key:a.key},{default:i(()=>[s("div",Ut,[s("div",{class:"metric-icon",style:me({background:a.gradient||a.color})},[p(c,{size:24},{default:i(()=>[(v(),C(fe(a.icon)))]),_:2},1024)],4),s("div",It,[s("div",Vt,y(a.value),1),s("div",Nt,y(a.label),1),s("div",{class:De(["metric-change",a.trend])},[p(c,{size:12},{default:i(()=>[a.trend==="up"?(v(),C(b,{key:0})):j("",!0),a.trend==="down"?(v(),C(S,{key:1})):j("",!0),a.trend==="stable"?(v(),C(ge,{key:2})):j("",!0)]),_:2},1024),s("span",null,y(a.change),1)],2)])])]),_:2},1024)),[[Ee,E.value]])),128))]),s("div",Ft,[p(k,{class:"chart-card"},{header:i(()=>[s("div",jt,[e[8]||(e[8]=s("span",{class:"chart-title"},"业绩趋势",-1)),s("div",Bt,[p(ne,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=a=>h.value=a),size:"small"},{default:i(()=>[p(Q,{label:"day"},{default:i(()=>[...e[5]||(e[5]=[z("日",-1)])]),_:1}),p(Q,{label:"week"},{default:i(()=>[...e[6]||(e[6]=[z("周",-1)])]),_:1}),p(Q,{label:"month"},{default:i(()=>[...e[7]||(e[7]=[z("月",-1)])]),_:1})]),_:1},8,["modelValue"])])])]),default:i(()=>[s("div",qt,[D.value.xAxisData.length>0?(v(),C(we($e),{key:0,option:J.value,autoresize:""},null,8,["option"])):(v(),O("div",Ht,[p(d,{description:"暂无业绩数据"})]))])]),_:1}),p(k,{class:"chart-card"},{header:i(()=>[...e[9]||(e[9]=[s("span",{class:"chart-title"},"订单状态分布",-1)])]),default:i(()=>[s("div",Kt,[F.value.length>0?(v(),C(we($e),{key:0,option:ae.value,autoresize:""},null,8,["option"])):(v(),O("div",Qt,[p(d,{description:"暂无订单数据"})]))])]),_:1})]),s("div",Wt,[ze((v(),C(k,{class:"ranking-card"},{header:i(()=>[s("div",Yt,[s("span",Gt,y(N()),1),p(I,{type:"text",size:"small",onClick:f},{default:i(()=>[...e[10]||(e[10]=[z("查看更多",-1)])]),_:1})])]),default:i(()=>[s("div",Jt,[(v(!0),O(re,null,le(G.value.sales,(a,Z)=>(v(),O("div",{class:"ranking-item",key:a.id},[s("div",Zt,[p(oe,{type:Z<3?"warning":"info",size:"small",effect:"plain"},{default:i(()=>[z(y(Z+1),1)]),_:2},1032,["type"])]),p(Ne,{size:32,src:a.avatar},null,8,["src"]),s("div",Xt,[s("div",ea,y(a.name),1),s("div",{class:De(["ranking-change",a.trend])},[p(c,{size:12},{default:i(()=>[a.trend==="up"?(v(),C(b,{key:0})):j("",!0),a.trend==="down"?(v(),C(S,{key:1})):j("",!0)]),_:2},1024),s("span",null,y(a.change),1)],2)]),s("div",ta,[s("div",aa,"¥"+y(a.revenue.toLocaleString()),1),s("div",sa,y(a.orders)+"单",1)])]))),128))])]),_:1})),[[Ee,E.value]]),p(k,{class:"quick-actions-card"},{header:i(()=>[...e[11]||(e[11]=[s("span",{class:"chart-title"},"快捷操作",-1)])]),default:i(()=>[s("div",na,[(v(!0),O(re,null,le(B.value,a=>(v(),O("div",{class:"action-item",key:a.key,onClick:Z=>ye(a)},[s("div",{class:"action-icon",style:me({background:a.gradient||a.color})},[p(c,{size:20},{default:i(()=>[(v(),C(fe(a.icon)))]),_:2},1024)],4),s("div",ra,y(a.label),1)],8,oa))),128))])]),_:1}),p(k,{class:"message-card"},{header:i(()=>[s("div",la,[e[13]||(e[13]=s("span",{class:"chart-title"},"消息提醒",-1)),p(ke,{value:V.value>99?"99+":V.value,hidden:V.value===0},{default:i(()=>[p(I,{type:"text",size:"small",onClick:e[1]||(e[1]=a=>L.value=!0)},{default:i(()=>[...e[12]||(e[12]=[z(" 查看全部 ",-1)])]),_:1})]),_:1},8,["value","hidden"])])]),default:i(()=>[s("div",ia,[(v(!0),O(re,null,le(ee.value,a=>(v(),O("div",{class:"message-item",key:a.id,onClick:Z=>g(a)},[s("div",{class:"message-icon",style:me({backgroundColor:a.color})},[p(c,{size:16},{default:i(()=>[(v(),C(fe(a.icon)))]),_:2},1024)],4),s("div",ua,[s("div",da,y(a.title),1),s("div",va,y(a.time),1)]),p(ke,{"is-dot":!a.read,class:"message-badge"},null,8,["is-dot"])],8,ca))),128))])]),_:1})]),p(Oe,{modelValue:L.value,"onUpdate:modelValue":e[2]||(e[2]=a=>L.value=a),title:"系统消息",width:"600px","before-close":se},{default:i(()=>[s("div",pa,[s("div",ga,[p(I,{type:"primary",size:"small",onClick:$,disabled:V.value===0},{default:i(()=>[...e[14]||(e[14]=[z(" 全部已读 ",-1)])]),_:1},8,["disabled"]),p(I,{type:"danger",size:"small",onClick:P},{default:i(()=>[...e[15]||(e[15]=[z(" 清空消息 ",-1)])]),_:1})]),s("div",ma,[(v(!0),O(re,null,le(U.value,a=>(v(),O("div",{class:De(["message-dialog-item",{unread:!a.read}]),key:a.id,onClick:Z=>H(a)},[s("div",{class:"message-dialog-icon",style:me({backgroundColor:a.color})},[p(c,{size:18},{default:i(()=>[(v(),C(fe(a.icon)))]),_:2},1024)],4),s("div",ha,[s("div",_a,y(a.title),1),s("div",ya,y(a.content),1),s("div",ba,y(a.time),1)]),s("div",ka,[p(ke,{"is-dot":!a.read},null,8,["is-dot"]),a.read?j("",!0):(v(),C(I,{key:0,type:"text",size:"small",onClick:et(Z=>de(a),["stop"])},{default:i(()=>[...e[16]||(e[16]=[z(" 标记已读 ",-1)])]),_:1},8,["onClick"]))])],10,fa))),128))])])]),_:1},8,["modelValue"]),p(Oe,{modelValue:A.value,"onUpdate:modelValue":e[4]||(e[4]=a=>A.value=a),title:(Se=u.value)==null?void 0:Se.title,width:"500px"},{footer:i(()=>[p(I,{onClick:e[3]||(e[3]=a=>A.value=!1)},{default:i(()=>[...e[17]||(e[17]=[z("关闭",-1)])]),_:1}),u.value&&!u.value.read?(v(),C(I,{key:0,type:"primary",onClick:K},{default:i(()=>[...e[18]||(e[18]=[z(" 标记已读 ",-1)])]),_:1})):j("",!0)]),default:i(()=>[u.value?(v(),O("div",Ca,[s("div",Aa,[s("p",null,y(u.value.content),1),s("div",Da,[s("span",null,"时间："+y(u.value.time),1),s("span",null,"类型："+y(u.value.type),1)])])])):j("",!0)]),_:1},8,["modelValue","title"])])}}}),Ra=nt(wa,[["__scopeId","data-v-5d8518ca"]]);export{Ra as default};
