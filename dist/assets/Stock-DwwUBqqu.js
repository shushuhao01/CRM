var Bt=Object.defineProperty,Et=Object.defineProperties;var Mt=Object.getOwnPropertyDescriptors;var dt=Object.getOwnPropertySymbols;var Wt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable;var it=(b,g,u)=>g in b?Bt(b,g,{enumerable:!0,configurable:!0,writable:!0,value:u}):b[g]=u,ct=(b,g)=>{for(var u in g||(g={}))Wt.call(g,u)&&it(b,u,g[u]);if(dt)for(var u of dt(g))Kt.call(g,u)&&it(b,u,g[u]);return b},ut=(b,g)=>Et(b,Mt(g));var U=(b,g,u)=>new Promise((L,V)=>{var p=c=>{try{n(u.next(c))}catch(O){V(O)}},y=c=>{try{n(u.throw(c))}catch(O){V(O)}},n=c=>c.done?L(c.value):Promise.resolve(c.value).then(p,y);n((u=u.apply(b,g)).next())});import{l as Ht,r as S,Z as D,e as Jt,c as Zt,w as Gt,ag as i,aq as Xt,m as pt,p as C,q as o,U as t,O as a,S as f,T as d,J as Q,M as P,a7 as mt,F as Yt,a9 as te,u as ee,P as _t}from"./vendor-D8Vxqhr-.js";import{u as ae,p as z}from"./product-DLyzXkG9.js";import{E as h}from"./elementPlus-Bmwh7Rh8.js";import{_ as oe}from"./settings-CuxbDWOu.js";import"./utils-ywHRn0uI.js";const le={class:"stock-container"},se={class:"page-header"},ne={class:"header-actions"},re={class:"stats-section"},de={class:"stat-card primary-card"},ie={class:"card-header"},ce={class:"card-icon primary"},ue={class:"card-content"},pe=["title"],me={class:"stat-card secondary-card"},_e={class:"card-header"},fe={class:"card-icon total"},ge={class:"card-content"},ve={class:"secondary-value"},ke={class:"card-trend positive"},ye={class:"stat-card secondary-card"},Se={class:"card-header"},be={class:"card-icon warning"},he={class:"card-content"},we={class:"secondary-value warning-text"},xe={class:"stat-card secondary-card"},Ce={class:"card-header"},Ve={class:"card-icon danger"},je={class:"card-content"},Ne={class:"secondary-value danger-text"},Ue={class:"search-section"},Pe={class:"table-section"},ze={class:"product-info"},Ie=["src","alt"],Te={class:"pagination-section"},Fe={class:"product-display"},Oe=["src","alt"],Re={class:"product-code"},De={class:"current-stock"},Le={class:"unit-text"},Ae={class:"result-stock"},qe={class:"dialog-footer"},Qe={class:"unit-text"},$e={class:"unit-text"},Be={class:"dialog-footer"},Ee={class:"history-header"},Me={class:"product-info"},We=["src","alt"],Ke={class:"product-details"},He={class:"product-name"},Je={class:"product-code"},Ze={class:"current-stock"},Ge={class:"stock-change"},Xe={class:"before-stock"},Ye={class:"after-stock"},ta={class:"dialog-footer"},ea=Ht({__name:"Stock",setup(b){const g=ae(),u=S(!1),L=S([]),V=S({totalProducts:0,totalStock:0,totalValue:0,lowStockCount:0,outOfStockCount:0}),p=D({productName:"",productCode:"",categoryId:"",stockStatus:"",keyword:"",status:"",brand:"",lowStock:!1}),y=D({page:1,pageSize:10,total:0}),n=D({id:null,productCode:"",productName:"",image:"",currentStock:0,unit:"",adjustType:"increase",adjustQuantity:0,reason:"",remark:"",productId:""}),c=D({id:null,productName:"",currentStock:0,unit:"",minStock:0,maxStock:0,productId:""}),O={adjustType:[{required:!0,message:"请选择调整类型",trigger:"change"}],adjustQuantity:[{required:!0,message:"请输入调整数量",trigger:"blur"}],reason:[{required:!0,message:"请选择调整原因",trigger:"change"}]},ft={minStock:[{required:!0,message:"请输入最低库存",trigger:"blur"}],maxStock:[{required:!0,message:"请输入最高库存",trigger:"blur"}]},I=S(!1),T=S(!1),A=S(!1),F=S(!1),$=S(),B=S(),Y=S([]),j=S({}),E=S(!1),M=S([]),W=D({page:1,pageSize:10,total:0}),w=Jt(()=>({totalProducts:V.value.totalProducts,lowStockProducts:V.value.lowStockCount,outOfStockProducts:V.value.outOfStockCount,totalStockValue:V.value.totalValue})),N=()=>U(this,null,function*(){try{u.value=!0;const s={page:y.page,pageSize:y.pageSize,keyword:p.keyword||p.productName||void 0,categoryId:p.categoryId||void 0,status:p.status||void 0,brand:p.brand||void 0,lowStock:p.lowStock||void 0},e=yield z.getList(s);L.value=e.data.list.map(r=>({id:r.id,productCode:r.code,productName:r.name,category:r.categoryName,image:r.image,currentStock:r.stock,minStock:r.minStock,maxStock:r.maxStock,unit:r.unit,costPrice:r.price,lastUpdateTime:r.updateTime||r.createTime})),y.total=e.data.total;const v=yield z.getStockStatistics();V.value=v.data}catch(s){console.error("加载数据失败:",s),h.error("加载数据失败")}finally{u.value=!1}}),q=()=>{y.page=1,N()},gt=()=>{Object.assign(p,{productName:"",productCode:"",categoryId:"",stockStatus:"",keyword:"",status:"",brand:"",lowStock:!1}),y.page=1,N()},vt=s=>{Object.assign(n,{id:s.id,productId:s.id,productCode:s.productCode,productName:s.productName,image:s.image,currentStock:s.currentStock,unit:s.unit,adjustType:"increase",adjustQuantity:0,reason:"",remark:""}),I.value=!0},kt=s=>{Object.assign(c,{id:s.id,productId:s.id,productName:s.productName,currentStock:s.currentStock,unit:s.unit,minStock:s.minStock,maxStock:s.maxStock}),T.value=!0},yt=s=>U(this,null,function*(){try{j.value=s,A.value=!0,E.value=!0;const e=yield z.getStockAdjustments({productId:s.id,page:W.page,pageSize:W.pageSize});M.value=e.data.list.map(v=>ut(ct({},v),{date:v.createTime,typeName:v.type==="increase"?"增加":v.type==="decrease"?"减少":"设置"})),W.total=e.data.total}catch(e){console.error("获取库存历史失败:",e),h.error("获取库存历史失败"),M.value=[{id:"1",date:"2024-01-15 14:30:25",type:"increase",typeName:"增加",quantity:50,beforeStock:100,afterStock:150,reason:"采购入库",operator:"张三",remark:"新到货50件商品"}]}finally{E.value=!1}}),St=()=>{const s=document.createElement("input");s.type="file",s.accept=".xlsx,.xls,.csv",s.onchange=e=>U(this,null,function*(){var r;const v=(r=e.target.files)==null?void 0:r[0];if(v)try{u.value=!0;const m=new FormData;m.append("file",v),yield z.batchImport(m),h.success("批量导入成功"),N()}catch(m){console.error("批量导入失败:",m),h.error("批量导入失败")}finally{u.value=!1}}),s.click()},bt=()=>U(this,null,function*(){try{u.value=!0;const s={categoryId:p.categoryId||void 0,status:p.status||void 0,keyword:p.keyword||void 0,format:"xlsx"},e=yield z.exportProducts(s),v=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=window.URL.createObjectURL(v),m=document.createElement("a");m.href=r,m.download=`库存数据_${new Date().toISOString().slice(0,10)}.xlsx`,m.click(),window.URL.revokeObjectURL(r),h.success("导出成功")}catch(s){console.error("导出失败:",s),h.error("导出失败")}finally{u.value=!1}}),ht=s=>{y.pageSize=s,y.page=1,N()},wt=s=>{y.page=s,N()},xt=s=>s.currentStock<=0?"stock-out":s.currentStock<=s.minStock?"stock-warning":"stock-normal",Ct=s=>s.currentStock<=0?"danger":s.currentStock<=s.minStock?"warning":"success",Vt=s=>s.currentStock<=0?"缺货":s.currentStock<=s.minStock?"预警":"正常",jt=s=>s>=1e8?(s/1e8).toFixed(1)+"亿":s>=1e4?(s/1e4).toFixed(1)+"万":s.toLocaleString(),Nt=s=>{Y.value=s},Ut=()=>{if(Y.value.length===0){h.warning("请先选择要调整的商品");return}h.info("批量调整功能开发中")},Pt=()=>U(this,null,function*(){if($.value)try{yield $.value.validate(),F.value=!0,yield z.adjustStock({productId:n.productId,type:n.adjustType,quantity:n.adjustQuantity,reason:n.reason,remark:n.remark}),h.success("库存调整成功"),I.value=!1,N()}catch(s){console.error("库存调整失败:",s),h.error("库存调整失败")}finally{F.value=!1}}),zt=()=>U(this,null,function*(){if(B.value)try{yield B.value.validate(),F.value=!0,yield z.update(c.productId,{minStock:c.minStock,maxStock:c.maxStock}),h.success("预警设置成功"),T.value=!1,N()}catch(s){console.error("预警设置失败:",s),h.error("预警设置失败")}finally{F.value=!1}}),It=()=>{I.value=!1,Object.assign(n,{id:null,productCode:"",productName:"",image:"",currentStock:0,unit:"",adjustType:"increase",adjustQuantity:0,reason:"",remark:"",productId:""})},Tt=()=>{T.value=!1,Object.assign(c,{id:null,productName:"",currentStock:0,unit:"",minStock:0,maxStock:0,productId:""})},Ft=()=>{const{adjustType:s,adjustQuantity:e,currentStock:v}=n;return s==="increase"?v+(e||0):s==="decrease"?Math.max(0,v-(e||0)):s==="set"?e||0:v};return Zt(()=>{N(),g.loadCategories()}),Gt(()=>p.lowStock,()=>{p.lowStock&&q()}),(s,e)=>{const v=i("Edit"),r=i("el-icon"),m=i("el-button"),Ot=i("Upload"),Rt=i("Download"),Dt=i("Money"),R=i("el-col"),Lt=i("Box"),At=i("ArrowUp"),tt=i("Warning"),et=i("Check"),at=i("CircleClose"),ot=i("el-row"),K=i("el-input"),k=i("el-form-item"),x=i("el-option"),H=i("el-select"),J=i("el-form"),_=i("el-table-column"),lt=i("el-tag"),st=i("el-table"),qt=i("el-pagination"),Z=i("el-radio"),Qt=i("el-radio-group"),G=i("el-input-number"),X=i("el-dialog"),$t=i("ArrowRight"),nt=Xt("loading");return C(),pt("div",le,[o("div",se,[e[21]||(e[21]=o("div",{class:"header-left"},[o("h1",{class:"page-title"},"库存管理"),o("p",{class:"page-description"},"管理商品库存，支持库存调整、预警设置等功能")],-1)),o("div",ne,[t(m,{type:"primary",onClick:Ut},{default:a(()=>[t(r,null,{default:a(()=>[t(v)]),_:1}),e[18]||(e[18]=f(" 库存调整 ",-1))]),_:1}),t(m,{type:"warning",onClick:St},{default:a(()=>[t(r,null,{default:a(()=>[t(Ot)]),_:1}),e[19]||(e[19]=f(" 批量导入 ",-1))]),_:1}),t(m,{onClick:bt},{default:a(()=>[t(r,null,{default:a(()=>[t(Rt)]),_:1}),e[20]||(e[20]=f(" 导出数据 ",-1))]),_:1})])]),o("div",re,[t(ot,{gutter:16},{default:a(()=>[t(R,{span:8},{default:a(()=>[o("div",de,[o("div",ie,[o("div",ce,[t(r,null,{default:a(()=>[t(Dt)]),_:1})]),e[22]||(e[22]=o("div",{class:"card-title"},"库存总值",-1))]),o("div",ue,[o("div",{class:"primary-value",title:`¥${w.value.totalStockValue.toLocaleString()}`}," ¥"+d(jt(w.value.totalStockValue)),9,pe),e[23]||(e[23]=o("div",{class:"card-description"},"当前库存商品总价值",-1))])])]),_:1}),t(R,{span:16},{default:a(()=>[t(ot,{gutter:16},{default:a(()=>[t(R,{span:8},{default:a(()=>[o("div",me,[o("div",_e,[o("div",fe,[t(r,null,{default:a(()=>[t(Lt)]),_:1})]),e[24]||(e[24]=o("div",{class:"card-title"},"商品总数",-1))]),o("div",ge,[o("div",ve,d(w.value.totalProducts.toLocaleString()),1),o("div",ke,[t(r,null,{default:a(()=>[t(At)]),_:1}),e[25]||(e[25]=o("span",null,"+12",-1))])])])]),_:1}),t(R,{span:8},{default:a(()=>[o("div",ye,[o("div",Se,[o("div",be,[t(r,null,{default:a(()=>[t(tt)]),_:1})]),e[26]||(e[26]=o("div",{class:"card-title"},"库存预警",-1))]),o("div",he,[o("div",we,d(w.value.lowStockProducts),1),o("div",{class:Q(["card-trend",w.value.lowStockProducts>0?"negative":"neutral"])},[w.value.lowStockProducts>0?(C(),P(r,{key:0},{default:a(()=>[t(tt)]),_:1})):(C(),P(r,{key:1},{default:a(()=>[t(et)]),_:1})),o("span",null,d(w.value.lowStockProducts>0?"需关注":"正常"),1)],2)])])]),_:1}),t(R,{span:8},{default:a(()=>[o("div",xe,[o("div",Ce,[o("div",Ve,[t(r,null,{default:a(()=>[t(at)]),_:1})]),e[27]||(e[27]=o("div",{class:"card-title"},"缺货商品",-1))]),o("div",je,[o("div",Ne,d(w.value.outOfStockProducts),1),o("div",{class:Q(["card-trend",w.value.outOfStockProducts>0?"negative":"positive"])},[w.value.outOfStockProducts>0?(C(),P(r,{key:0},{default:a(()=>[t(at)]),_:1})):(C(),P(r,{key:1},{default:a(()=>[t(et)]),_:1})),o("span",null,d(w.value.outOfStockProducts>0?"需补货":"充足"),1)],2)])])]),_:1})]),_:1})]),_:1})]),_:1})]),o("div",Ue,[t(J,{model:p,inline:""},{default:a(()=>[t(k,{label:"商品名称"},{default:a(()=>[t(K,{modelValue:p.productName,"onUpdate:modelValue":e[0]||(e[0]=l=>p.productName=l),placeholder:"请输入商品名称",clearable:"",onKeyup:mt(q,["enter"])},null,8,["modelValue"])]),_:1}),t(k,{label:"商品编码"},{default:a(()=>[t(K,{modelValue:p.productCode,"onUpdate:modelValue":e[1]||(e[1]=l=>p.productCode=l),placeholder:"请输入商品编码",clearable:"",onKeyup:mt(q,["enter"])},null,8,["modelValue"])]),_:1}),t(k,{label:"商品分类"},{default:a(()=>[t(H,{modelValue:p.categoryId,"onUpdate:modelValue":e[2]||(e[2]=l=>p.categoryId=l),placeholder:"请选择分类",clearable:""},{default:a(()=>[(C(!0),pt(Yt,null,te(ee(g).categories,l=>(C(),P(x,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"库存状态"},{default:a(()=>[t(H,{modelValue:p.stockStatus,"onUpdate:modelValue":e[3]||(e[3]=l=>p.stockStatus=l),placeholder:"请选择库存状态",clearable:""},{default:a(()=>[t(x,{label:"正常",value:"normal"}),t(x,{label:"预警",value:"warning"}),t(x,{label:"缺货",value:"out_of_stock"})]),_:1},8,["modelValue"])]),_:1}),t(k,null,{default:a(()=>[t(m,{type:"primary",onClick:q},{default:a(()=>[...e[28]||(e[28]=[f("搜索",-1)])]),_:1}),t(m,{onClick:gt},{default:a(()=>[...e[29]||(e[29]=[f("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),o("div",Pe,[_t((C(),P(st,{data:L.value,stripe:"",border:"",onSelectionChange:Nt},{default:a(()=>[t(_,{type:"selection",width:"55"}),t(_,{prop:"productCode",label:"商品编码",width:"120"}),t(_,{prop:"productName",label:"商品名称","min-width":"200"},{default:a(({row:l})=>[o("div",ze,[o("img",{src:l.image,alt:l.productName,class:"product-image"},null,8,Ie),o("span",null,d(l.productName),1)])]),_:1}),t(_,{prop:"category",label:"分类",width:"120"}),t(_,{prop:"currentStock",label:"当前库存",width:"100",align:"center"},{default:a(({row:l})=>[o("span",{class:Q(xt(l))},d(l.currentStock),3)]),_:1}),t(_,{prop:"minStock",label:"最低库存",width:"100",align:"center"}),t(_,{prop:"maxStock",label:"最高库存",width:"100",align:"center"}),t(_,{prop:"unit",label:"单位",width:"80",align:"center"}),t(_,{prop:"costPrice",label:"成本价",width:"100",align:"center"},{default:a(({row:l})=>[f(" ¥"+d(l.costPrice.toFixed(2)),1)]),_:1}),t(_,{prop:"stockValue",label:"库存价值",width:"120",align:"center"},{default:a(({row:l})=>[f(" ¥"+d((l.currentStock*l.costPrice).toFixed(2)),1)]),_:1}),t(_,{prop:"stockStatus",label:"库存状态",width:"100",align:"center"},{default:a(({row:l})=>[t(lt,{type:Ct(l),size:"small"},{default:a(()=>[f(d(Vt(l)),1)]),_:2},1032,["type"])]),_:1}),t(_,{prop:"lastUpdateTime",label:"最后更新",width:"160"}),t(_,{label:"操作",width:"180",fixed:"right"},{default:a(({row:l})=>[t(m,{type:"primary",size:"small",link:"",onClick:rt=>vt(l)},{default:a(()=>[...e[30]||(e[30]=[f(" 调整库存 ",-1)])]),_:1},8,["onClick"]),t(m,{type:"warning",size:"small",link:"",onClick:rt=>kt(l)},{default:a(()=>[...e[31]||(e[31]=[f(" 设置预警 ",-1)])]),_:1},8,["onClick"]),t(m,{type:"info",size:"small",link:"",onClick:rt=>yt(l)},{default:a(()=>[...e[32]||(e[32]=[f(" 变动记录 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[nt,u.value]]),o("div",Te,[t(qt,{"current-page":y.page,"onUpdate:currentPage":e[4]||(e[4]=l=>y.page=l),"page-size":y.pageSize,"onUpdate:pageSize":e[5]||(e[5]=l=>y.pageSize=l),"page-sizes":[10,20,50,100],total:y.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ht,onCurrentChange:wt},null,8,["current-page","page-size","total"])])]),t(X,{modelValue:I.value,"onUpdate:modelValue":e[11]||(e[11]=l=>I.value=l),title:"库存调整",width:"600px",onClose:It},{footer:a(()=>[o("div",qe,[t(m,{onClick:e[10]||(e[10]=l=>I.value=!1)},{default:a(()=>[...e[36]||(e[36]=[f("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:Pt,loading:F.value},{default:a(()=>[...e[37]||(e[37]=[f(" 确定调整 ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[t(J,{ref_key:"adjustFormRef",ref:$,model:n,rules:O,"label-width":"100px"},{default:a(()=>[t(k,{label:"商品信息"},{default:a(()=>[o("div",Fe,[o("img",{src:n.image,alt:n.productName,class:"product-image"},null,8,Oe),o("div",null,[o("div",null,d(n.productName),1),o("div",Re,"编码："+d(n.productCode),1)])])]),_:1}),t(k,{label:"当前库存"},{default:a(()=>[o("span",De,d(n.currentStock)+" "+d(n.unit),1)]),_:1}),t(k,{label:"调整类型",prop:"adjustType"},{default:a(()=>[t(Qt,{modelValue:n.adjustType,"onUpdate:modelValue":e[6]||(e[6]=l=>n.adjustType=l)},{default:a(()=>[t(Z,{label:"increase"},{default:a(()=>[...e[33]||(e[33]=[f("增加",-1)])]),_:1}),t(Z,{label:"decrease"},{default:a(()=>[...e[34]||(e[34]=[f("减少",-1)])]),_:1}),t(Z,{label:"set"},{default:a(()=>[...e[35]||(e[35]=[f("设置为",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"调整数量",prop:"adjustQuantity"},{default:a(()=>[t(G,{modelValue:n.adjustQuantity,"onUpdate:modelValue":e[7]||(e[7]=l=>n.adjustQuantity=l),min:n.adjustType==="decrease"?1:0,max:n.adjustType==="decrease"?n.currentStock:99999,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue","min","max"]),o("span",Le,d(n.unit),1)]),_:1}),t(k,{label:"调整后库存"},{default:a(()=>[o("span",Ae,d(Ft())+" "+d(n.unit),1)]),_:1}),t(k,{label:"调整原因",prop:"reason"},{default:a(()=>[t(H,{modelValue:n.reason,"onUpdate:modelValue":e[8]||(e[8]=l=>n.reason=l),placeholder:"请选择调整原因",style:{width:"100%"}},{default:a(()=>[t(x,{label:"盘点调整",value:"inventory"}),t(x,{label:"损耗调整",value:"loss"}),t(x,{label:"退货入库",value:"return"}),t(x,{label:"采购入库",value:"purchase"}),t(x,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"备注",prop:"remark"},{default:a(()=>[t(K,{modelValue:n.remark,"onUpdate:modelValue":e[9]||(e[9]=l=>n.remark=l),type:"textarea",rows:3,placeholder:"请输入调整备注",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(X,{modelValue:T.value,"onUpdate:modelValue":e[15]||(e[15]=l=>T.value=l),title:"库存预警设置",width:"500px",onClose:Tt},{footer:a(()=>[o("div",Be,[t(m,{onClick:e[14]||(e[14]=l=>T.value=!1)},{default:a(()=>[...e[38]||(e[38]=[f("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:zt,loading:F.value},{default:a(()=>[...e[39]||(e[39]=[f(" 保存设置 ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[t(J,{ref_key:"warningFormRef",ref:B,model:c,rules:ft,"label-width":"100px"},{default:a(()=>[t(k,{label:"商品名称"},{default:a(()=>[o("span",null,d(c.productName),1)]),_:1}),t(k,{label:"当前库存"},{default:a(()=>[o("span",null,d(c.currentStock)+" "+d(c.unit),1)]),_:1}),t(k,{label:"最低库存",prop:"minStock"},{default:a(()=>[t(G,{modelValue:c.minStock,"onUpdate:modelValue":e[12]||(e[12]=l=>c.minStock=l),min:0,max:c.maxStock||99999,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue","max"]),o("span",Qe,d(c.unit),1)]),_:1}),t(k,{label:"最高库存",prop:"maxStock"},{default:a(()=>[t(G,{modelValue:c.maxStock,"onUpdate:modelValue":e[13]||(e[13]=l=>c.maxStock=l),min:c.minStock||0,max:99999,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue","min"]),o("span",$e,d(c.unit),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(X,{modelValue:A.value,"onUpdate:modelValue":e[17]||(e[17]=l=>A.value=l),title:`${j.value.productName} - 库存变动记录`,width:"900px",top:"5vh"},{footer:a(()=>[o("div",ta,[t(m,{onClick:e[16]||(e[16]=l=>A.value=!1)},{default:a(()=>[...e[40]||(e[40]=[f("关闭",-1)])]),_:1})])]),default:a(()=>[o("div",Ee,[o("div",Me,[o("img",{src:j.value.image,alt:j.value.productName,class:"product-image-small"},null,8,We),o("div",Ke,[o("div",He,d(j.value.productName),1),o("div",Je,"商品编码："+d(j.value.productCode),1),o("div",Ze,"当前库存："+d(j.value.currentStock)+" "+d(j.value.unit),1)])])]),_t((C(),P(st,{data:M.value,style:{width:"100%"},"max-height":"400"},{default:a(()=>[t(_,{prop:"date",label:"变动时间",width:"160"}),t(_,{prop:"typeName",label:"变动类型",width:"80",align:"center"},{default:a(({row:l})=>[t(lt,{type:l.type==="increase"?"success":l.type==="decrease"?"danger":"warning",size:"small"},{default:a(()=>[f(d(l.typeName),1)]),_:2},1032,["type"])]),_:1}),t(_,{label:"库存变化",width:"120",align:"center"},{default:a(({row:l})=>[o("span",{class:Q({"increase-text":l.type==="increase","decrease-text":l.type==="decrease","set-text":l.type==="set"})},d(l.type==="increase"?"+":l.type==="decrease"?"-":"")+d(l.quantity),3)]),_:1}),t(_,{label:"库存变化详情",width:"150",align:"center"},{default:a(({row:l})=>[o("div",Ge,[o("span",Xe,d(l.beforeStock),1),t(r,{class:"arrow-icon"},{default:a(()=>[t($t)]),_:1}),o("span",Ye,d(l.afterStock),1)])]),_:1}),t(_,{prop:"reason",label:"变动原因",width:"100"}),t(_,{prop:"operator",label:"操作人",width:"80"}),t(_,{prop:"remark",label:"备注","min-width":"120","show-overflow-tooltip":""})]),_:1},8,["data"])),[[nt,E.value]])]),_:1},8,["modelValue","title"])])}}}),da=oe(ea,[["__scopeId","data-v-85f757b0"]]);export{da as default};
