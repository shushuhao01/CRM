var X=(fe,ae,I)=>new Promise((O,F)=>{var q=h=>{try{B(I.next(h))}catch(Y){F(Y)}},J=h=>{try{B(I.throw(h))}catch(Y){F(Y)}},B=h=>h.done?O(h.value):Promise.resolve(h.value).then(q,J);B((I=I.apply(fe,ae)).next())});import{l as Ze,az as He,r as U,e as Qe,Z as pe,w as me,c as et,Y as tt,ag as T,aq as at,m as st,p as M,q as s,U as a,O as o,S as P,u as b,T as w,J as Z,M as A,P as j,V as ve,n as ot}from"./vendor-D8Vxqhr-.js";import{E as R,a9 as nt,n as rt,t as lt,a6 as H,T as Q,C as dt,F as it,an as ct}from"./elementPlus-Bmwh7Rh8.js";import{i as ee,L as ut}from"./utils-ywHRn0uI.js";import{m as pt}from"./phone-DsAzMHsn.js";import{y as mt,u as G,j as te,t as Pe,c as vt,_ as ft}from"./settings-CuxbDWOu.js";import{u as ze}from"./product-DLyzXkG9.js";const gt={class:"personal-performance"},_t={class:"page-header"},ht={class:"header-actions"},wt={class:"performance-overview"},St={class:"card-content"},yt={class:"card-icon sales"},bt={class:"card-info"},Ct={class:"card-value"},Tt={class:"card-trend"},Pt={class:"card-content"},zt={class:"card-icon orders"},xt={class:"card-info"},Dt={class:"card-value"},Mt={class:"card-trend"},Ut={class:"card-content"},At={class:"card-icon customers"},kt={class:"card-info"},It={class:"card-value"},Ot={class:"card-trend"},Et={class:"card-content"},Lt={class:"card-icon conversion"},$t={class:"card-info"},Nt={class:"card-value"},Rt={class:"card-trend"},Yt={class:"charts-section"},Vt={class:"card-header"},Ft={class:"card-header"},qt={class:"amount"},Bt={class:"commission"},jt={class:"pagination-wrapper"},Kt=["onClick","title"],Gt={class:"amount"},Jt={class:"pagination-wrapper"},Wt={class:"amount"},Xt={class:"commission"},Zt={class:"pagination-wrapper"},Ht=Ze({__name:"Personal",setup(fe){const ae=He(),I=vt(ae),O=mt(),F=G(),q=te(),J=Pe(),B=ze(),h=U([]),Y=U("daily"),k=U("orders"),K=U(!1),se=U(),oe=U(),ne=U(),re=U();let E=null,L=null,$=null,N=null;const g=Qe(()=>{const t=O.personalPerformance;return{totalSales:`¥${t.totalSales.toLocaleString()}`,salesTrend:t.salesTrend,totalOrders:t.totalOrders,ordersTrend:t.ordersTrend,newCustomers:t.newCustomers,customersTrend:t.customersTrend,conversionRate:t.conversionRate.toFixed(1),conversionTrend:t.conversionTrend}}),le=U([]),de=U([]),ie=U([]),x=pe({currentPage:1,pageSize:10,total:0}),C=pe({currentPage:1,pageSize:10,total:0}),D=pe({currentPage:1,pageSize:10,total:0}),ge=t=>{console.log("日期范围变化:",t),O.updateDateRange(t),V(),z()},xe=()=>{R.success("数据导出功能开发中...")},De=()=>{var e,v;const t=`
🎉 我的业绩报告 🎉

📊 总销售额：${g.value.totalSales}
📈 订单数量：${g.value.totalOrders}
👥 新增客户：${g.value.newCustomers}
💯 转化率：${g.value.conversionRate}%

时间范围：${((e=h.value)==null?void 0:e[0])||"当前月份"} 至 ${((v=h.value)==null?void 0:v[1])||"当前月份"}

#业绩分享 #销售成果 #CRM系统
  `.trim();navigator.share?navigator.share({title:"我的业绩报告",text:t,url:window.location.href}).then(()=>{R.success("分享成功")}).catch(p=>{console.log("分享失败:",p),_e(t)}):_e(t)},_e=t=>X(this,null,function*(){try{yield navigator.clipboard.writeText(t),R.success("业绩内容已复制到剪贴板，可以粘贴分享")}catch(e){R({message:"请手动复制以下内容进行分享",type:"info",duration:0,showClose:!0}),console.log("分享内容:",t)}}),Me=t=>{k.value=t,z()},Ue=t=>({pending:"warning",paid:"success",shipped:"info",completed:"success",cancelled:"danger"})[t]||"",Ae=t=>({pending:"待审核",paid:"已付款",shipped:"已发货",completed:"已完成",cancelled:"已取消"})[t]||t,ke=t=>({normal:"",silver:"info",gold:"warning",diamond:"success"})[t]||"",Ie=t=>({normal:"普通客户",silver:"白银客户",gold:"黄金客户",diamond:"钻石客户"})[t]||t,Oe=t=>{I.push(`/order/detail/${t.id}`)},Ee=t=>{I.push(`/customer/detail/${t.id}`)},Le=t=>(C.currentPage-1)*C.pageSize+t+1,$e=t=>{I.push({path:"/customer/detail",query:{code:t}})},Ne=t=>{x.pageSize=t,z()},Re=t=>{x.currentPage=t,z()},Ye=t=>{C.pageSize=t,z()},Ve=t=>{C.currentPage=t,z()},Fe=t=>{D.pageSize=t,z()},qe=t=>{D.currentPage=t,z()},Be=()=>{var _;const t=G(),e=te(),v=(_=t.currentUser)==null?void 0:_.id;if(!v)return{months:["1月","2月","3月","4月","5月","6月"],salesAmounts:[0,0,0,0,0,0],orderCounts:[0,0,0,0,0,0]};const p=e.orders.filter(u=>u.salesPersonId===v&&u.auditStatus==="approved"),d=new Map,i=new Date,m=i.getFullYear();for(let u=5;u>=0;u--){const r=new Date(m,i.getMonth()-u,1),S=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`,y=`${r.getMonth()+1}月`;d.set(S,{label:y,salesAmount:0,orderCount:0})}p.forEach(u=>{const r=new Date(u.createTime),S=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;if(d.has(S)){const y=d.get(S);y.salesAmount+=u.totalAmount,y.orderCount+=1}});const f=[],n=[],c=[];return d.forEach(u=>{f.push(u.label),n.push(Math.round(u.salesAmount/1e4*100)/100),c.push(u.orderCount)}),{months:f,salesAmounts:n,orderCounts:c}},he=()=>{if(!se.value)return;E=ee(se.value);const t=Be(),e={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["销售额","订单数"]},xAxis:{type:"category",data:t.months},yAxis:[{type:"value",name:"销售额(万元)",position:"left"},{type:"value",name:"订单数",position:"right"}],series:[{name:"销售额",type:"line",data:t.salesAmounts,smooth:!0,itemStyle:{color:"#409EFF"}},{name:"订单数",type:"bar",yAxisIndex:1,data:t.orderCounts,itemStyle:{color:"#67C23A"}}]};E.setOption(e)},je=()=>{var f;const t=G(),e=te(),v=(f=t.currentUser)==null?void 0:f.id;if(!v)return[];const p=e.orders.filter(n=>n.salesPersonId===v&&n.auditStatus==="approved"),d=new Map,i={pending:"待审核",paid:"已付款",shipped:"已发货",completed:"已完成",cancelled:"已取消",signed:"已签收"};p.forEach(n=>{const c=i[n.status]||n.status;d.has(c)?d.set(c,d.get(c)+1):d.set(c,1)});const m=[];return d.forEach((n,c)=>{m.push({value:n,name:c})}),m},Ke=()=>{if(!oe.value)return;L=ee(oe.value);const t=je(),e={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"订单状态",type:"pie",radius:"50%",data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};L.setOption(e)},Ge=()=>{var f;const t=G(),e=Pe(),v=(f=t.currentUser)==null?void 0:f.id;if(!v)return[];const p=e.customers.filter(n=>n.salesPersonId===v),d=new Map,i={normal:"普通客户",silver:"白银客户",gold:"黄金客户",diamond:"钻石客户"};p.forEach(n=>{const c=n.level||"normal",_=i[c]||c;d.has(_)?d.set(_,d.get(_)+1):d.set(_,1)});const m=[];return d.forEach((n,c)=>{m.push({value:n,name:c})}),m},Je=()=>{if(!ne.value)return;$=ee(ne.value);const t=Ge(),e={tooltip:{trigger:"item"},series:[{name:"客户等级",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:t}]};$.setOption(e)},We=()=>{var f;const t=G(),e=te(),v=ze(),p=(f=t.currentUser)==null?void 0:f.id;if(!p)return{names:["暂无数据"],values:[0]};const d=e.orders.filter(n=>n.salesPersonId===p&&n.auditStatus==="approved"),i=new Map;d.forEach(n=>{var c;(c=n.items)==null||c.forEach(_=>{const u=_.productId,r=v.products.find(S=>S.id===u);r&&(i.has(u)?i.set(u,{name:r.name,value:i.get(u).value+_.totalPrice}):i.set(u,{name:r.name,value:_.totalPrice}))})});const m=Array.from(i.values()).sort((n,c)=>c.value-n.value).slice(0,5);return{names:m.map(n=>n.name),values:m.map(n=>Math.round(n.value/100)/100)}},Xe=()=>{if(!re.value)return;N=ee(re.value);const t=We(),e={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:t.names},series:[{name:"销售额",type:"bar",data:t.values,itemStyle:{color:new ut(0,0,1,0,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])}}]};N.setOption(e)},V=()=>X(this,null,function*(){var t,e;try{const v={startDate:(t=h.value)!=null&&t[0]?`${h.value[0]}-01`:void 0,endDate:(e=h.value)!=null&&e[1]?`${h.value[1]}-31`:void 0};yield O.getPersonalAnalysisData(v),yield O.refreshPerformanceData(),console.log("业绩数据加载完成")}catch(v){console.error("加载业绩数据失败:",v),R.error("加载业绩数据失败")}}),z=()=>X(this,null,function*(){var t,e,v;K.value=!0;try{if(k.value==="orders"){const p=(t=F.currentUser)==null?void 0:t.id;if(p){const d=q.orders.filter(n=>n.salesPersonId===p&&n.auditStatus==="approved"),i=(x.currentPage-1)*x.pageSize,m=i+x.pageSize,f=d.slice(i,m);le.value=f.map(n=>({id:n.id,orderNo:n.orderNumber,customerName:n.customerName,totalAmount:n.totalAmount,status:n.status,createTime:n.createTime,commission:n.totalAmount*.1})),x.total=d.length}else le.value=[],x.total=0}else if(k.value==="customers"){const p=(e=F.currentUser)==null?void 0:e.id;if(p){const d=J.customers.filter(n=>n.salesPersonId===p),i=(C.currentPage-1)*C.pageSize,m=i+C.pageSize,f=d.slice(i,m);de.value=f.map(n=>{const c=q.orders.filter(r=>r.customerId===n.id&&r.auditStatus==="approved"),_=c.reduce((r,S)=>r+S.totalAmount,0),u=c.sort((r,S)=>new Date(S.createTime).getTime()-new Date(r.createTime).getTime())[0];return{id:n.id,code:n.code,name:n.name,phone:n.phone,level:n.level||"normal",orderCount:c.length,totalAmount:_,lastOrderTime:(u==null?void 0:u.createTime)||"暂无订单"}}),C.total=d.length}else de.value=[],C.total=0}else if(k.value==="products"){const p=(v=F.currentUser)==null?void 0:v.id;if(p){const d=q.orders.filter(c=>c.salesPersonId===p&&c.auditStatus==="approved"),i=new Map;d.forEach(c=>{var _;(_=c.items)==null||_.forEach(u=>{const r=u.productId,S=B.products.find(y=>y.id===r);if(S&&i.has(r)){const y=i.get(r);y.salesCount+=u.quantity,y.salesAmount+=u.totalPrice,y.lastSaleTime=c.createTime>y.lastSaleTime?c.createTime:y.lastSaleTime}else S&&i.set(r,{id:r,productName:S.name,salesCount:u.quantity,salesAmount:u.totalPrice,commission:u.totalPrice*.1,avgPrice:u.price,lastSaleTime:c.createTime})})});const m=Array.from(i.values()),f=(D.currentPage-1)*D.pageSize,n=f+D.pageSize;ie.value=m.slice(f,n),D.total=m.length}else ie.value=[],D.total=0}}catch(p){console.error("加载数据失败:",p),R.error("加载数据失败")}finally{K.value=!1}}),W=()=>{ot(()=>{he(),Ke(),Je(),Xe()})},we=()=>{E==null||E.resize(),L==null||L.resize(),$==null||$.resize(),N==null||N.resize()};me(Y,()=>{he()}),me(()=>[q.orders,J.customers,B.products,O.performanceData],()=>{V(),z(),W()},{deep:!0}),me(h,()=>{ge()}),et(()=>{const t=new Date,e=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0");h.value=[e,e],V(),z(),W(),window.addEventListener("resize",we),window.addEventListener("orderStatusUpdated",Se),window.addEventListener("todoStatusUpdated",ye),window.addEventListener("dataSync",be),window.addEventListener("performanceDataUpdate",Ce),O.syncPerformanceData()});const Se=t=>{console.log("订单状态已更新，刷新个人业绩数据",t.detail),V(),z(),R.success("个人业绩数据已同步更新")},ye=t=>{console.log("待办状态已更新，刷新个人业绩数据",t.detail),V(),z(),R.success("个人业绩数据已同步更新")},be=()=>{V(),z(),W()},Ce=()=>{V(),W()};return tt(()=>{window.removeEventListener("resize",we),window.removeEventListener("orderStatusUpdated",Se),window.removeEventListener("todoStatusUpdated",ye),window.removeEventListener("dataSync",be),window.removeEventListener("performanceDataUpdate",Ce),E==null||E.dispose(),L==null||L.dispose(),$==null||$.dispose(),N==null||N.dispose()}),(t,e)=>{const v=T("el-date-picker"),p=T("el-button"),d=T("el-icon"),i=T("el-card"),m=T("el-col"),f=T("el-row"),n=T("el-radio-button"),c=T("el-radio-group"),_=T("el-tab-pane"),u=T("el-tabs"),r=T("el-table-column"),S=T("el-tag"),y=T("el-table"),ce=T("el-pagination"),ue=at("loading");return M(),st("div",gt,[s("div",_t,[e[11]||(e[11]=s("h2",null,"个人业绩",-1)),s("div",ht,[a(v,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),type:"monthrange","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份",format:"YYYY-MM","value-format":"YYYY-MM",onChange:ge},null,8,["modelValue"]),a(p,{onClick:De,icon:b(nt)},{default:o(()=>[...e[9]||(e[9]=[P("分享业绩",-1)])]),_:1},8,["icon"]),a(p,{onClick:xe,icon:b(rt)},{default:o(()=>[...e[10]||(e[10]=[P("导出数据",-1)])]),_:1},8,["icon"])])]),s("div",wt,[a(f,{gutter:20},{default:o(()=>[a(m,{span:6},{default:o(()=>[a(i,{class:"overview-card"},{default:o(()=>[s("div",St,[s("div",yt,[a(d,null,{default:o(()=>[a(b(lt))]),_:1})]),s("div",bt,[s("div",Ct,w(g.value.totalSales),1),e[13]||(e[13]=s("div",{class:"card-label"},"总销售额",-1)),s("div",Tt,[s("span",{class:Z(["trend",g.value.salesTrend>0?"up":"down"])},[a(d,null,{default:o(()=>[g.value.salesTrend>0?(M(),A(b(H),{key:0})):(M(),A(b(Q),{key:1}))]),_:1}),P(" "+w(Math.abs(g.value.salesTrend))+"% ",1)],2),e[12]||(e[12]=s("span",{class:"trend-text"},"较上期",-1))])])])]),_:1})]),_:1}),a(m,{span:6},{default:o(()=>[a(i,{class:"overview-card"},{default:o(()=>[s("div",Pt,[s("div",zt,[a(d,null,{default:o(()=>[a(b(dt))]),_:1})]),s("div",xt,[s("div",Dt,w(g.value.totalOrders),1),e[15]||(e[15]=s("div",{class:"card-label"},"订单数量",-1)),s("div",Mt,[s("span",{class:Z(["trend",g.value.ordersTrend>0?"up":"down"])},[a(d,null,{default:o(()=>[g.value.ordersTrend>0?(M(),A(b(H),{key:0})):(M(),A(b(Q),{key:1}))]),_:1}),P(" "+w(Math.abs(g.value.ordersTrend))+"% ",1)],2),e[14]||(e[14]=s("span",{class:"trend-text"},"较上期",-1))])])])]),_:1})]),_:1}),a(m,{span:6},{default:o(()=>[a(i,{class:"overview-card"},{default:o(()=>[s("div",Ut,[s("div",At,[a(d,null,{default:o(()=>[a(b(it))]),_:1})]),s("div",kt,[s("div",It,w(g.value.newCustomers),1),e[17]||(e[17]=s("div",{class:"card-label"},"新增客户",-1)),s("div",Ot,[s("span",{class:Z(["trend",g.value.customersTrend>0?"up":"down"])},[a(d,null,{default:o(()=>[g.value.customersTrend>0?(M(),A(b(H),{key:0})):(M(),A(b(Q),{key:1}))]),_:1}),P(" "+w(Math.abs(g.value.customersTrend))+"% ",1)],2),e[16]||(e[16]=s("span",{class:"trend-text"},"较上期",-1))])])])]),_:1})]),_:1}),a(m,{span:6},{default:o(()=>[a(i,{class:"overview-card"},{default:o(()=>[s("div",Et,[s("div",Lt,[a(d,null,{default:o(()=>[a(b(ct))]),_:1})]),s("div",$t,[s("div",Nt,w(g.value.conversionRate)+"%",1),e[19]||(e[19]=s("div",{class:"card-label"},"转化率",-1)),s("div",Rt,[s("span",{class:Z(["trend",g.value.conversionTrend>0?"up":"down"])},[a(d,null,{default:o(()=>[g.value.conversionTrend>0?(M(),A(b(H),{key:0})):(M(),A(b(Q),{key:1}))]),_:1}),P(" "+w(Math.abs(g.value.conversionTrend))+"% ",1)],2),e[18]||(e[18]=s("span",{class:"trend-text"},"较上期",-1))])])])]),_:1})]),_:1})]),_:1})]),s("div",Yt,[a(f,{gutter:20},{default:o(()=>[a(m,{span:12},{default:o(()=>[a(i,{class:"chart-card"},{header:o(()=>[s("div",Vt,[e[23]||(e[23]=s("span",null,"销售趋势",-1)),a(c,{modelValue:Y.value,"onUpdate:modelValue":e[1]||(e[1]=l=>Y.value=l),size:"small"},{default:o(()=>[a(n,{label:"daily"},{default:o(()=>[...e[20]||(e[20]=[P("日",-1)])]),_:1}),a(n,{label:"weekly"},{default:o(()=>[...e[21]||(e[21]=[P("周",-1)])]),_:1}),a(n,{label:"monthly"},{default:o(()=>[...e[22]||(e[22]=[P("月",-1)])]),_:1})]),_:1},8,["modelValue"])])]),default:o(()=>[s("div",{ref_key:"salesChartRef",ref:se,class:"chart-container"},null,512)]),_:1})]),_:1}),a(m,{span:12},{default:o(()=>[a(i,{class:"chart-card"},{header:o(()=>[...e[24]||(e[24]=[s("span",null,"订单状态分布",-1)])]),default:o(()=>[s("div",{ref_key:"orderStatusChartRef",ref:oe,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),a(f,{gutter:20,style:{"margin-top":"20px"}},{default:o(()=>[a(m,{span:12},{default:o(()=>[a(i,{class:"chart-card"},{header:o(()=>[...e[25]||(e[25]=[s("span",null,"客户等级分布",-1)])]),default:o(()=>[s("div",{ref_key:"customerLevelChartRef",ref:ne,class:"chart-container"},null,512)]),_:1})]),_:1}),a(m,{span:12},{default:o(()=>[a(i,{class:"chart-card"},{header:o(()=>[...e[26]||(e[26]=[s("span",null,"商品销售排行",-1)])]),default:o(()=>[s("div",{ref_key:"productRankingChartRef",ref:re,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1})]),a(i,{class:"data-table-card"},{header:o(()=>[s("div",Ft,[e[27]||(e[27]=s("span",null,"详细数据",-1)),a(u,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=l=>k.value=l),onTabChange:Me},{default:o(()=>[a(_,{label:"订单明细",name:"orders"}),a(_,{label:"客户明细",name:"customers"}),a(_,{label:"商品明细",name:"products"})]),_:1},8,["modelValue"])])]),default:o(()=>[j(s("div",null,[j((M(),A(y,{data:le.value,style:{width:"100%"}},{default:o(()=>[a(r,{prop:"orderNo",label:"订单号",width:"150"}),a(r,{prop:"customerName",label:"客户姓名",width:"120"}),a(r,{prop:"totalAmount",label:"订单金额",width:"120"},{default:o(({row:l})=>[s("span",qt,"¥"+w(l.totalAmount),1)]),_:1}),a(r,{prop:"status",label:"订单状态",width:"100"},{default:o(({row:l})=>[a(S,{type:Ue(l.status),size:"small"},{default:o(()=>[P(w(Ae(l.status)),1)]),_:2},1032,["type"])]),_:1}),a(r,{prop:"createTime",label:"下单时间",width:"180"}),a(r,{prop:"commission",label:"佣金",width:"100"},{default:o(({row:l})=>[s("span",Bt,"¥"+w(l.commission),1)]),_:1}),a(r,{label:"操作",width:"120"},{default:o(({row:l})=>[a(p,{onClick:Te=>Oe(l),type:"primary",link:"",size:"small"},{default:o(()=>[...e[28]||(e[28]=[P(" 查看详情 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ue,K.value]]),s("div",jt,[a(ce,{"current-page":x.currentPage,"onUpdate:currentPage":e[3]||(e[3]=l=>x.currentPage=l),"page-size":x.pageSize,"onUpdate:pageSize":e[4]||(e[4]=l=>x.pageSize=l),"page-sizes":[10,20,50,100],total:x.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ne,onCurrentChange:Re},null,8,["current-page","page-size","total"])])],512),[[ve,k.value==="orders"]]),j(s("div",null,[j((M(),A(y,{data:de.value,style:{width:"100%"}},{default:o(()=>[a(r,{type:"index",label:"序号",width:"60",index:Le}),a(r,{prop:"code",label:"客户编码",width:"140"},{default:o(({row:l})=>[s("span",{class:"code-link",onClick:Te=>$e(l.code),title:l.code},w(l.code||"N/A"),9,Kt)]),_:1}),a(r,{prop:"name",label:"客户姓名",width:"120"}),a(r,{prop:"phone",label:"电话",width:"140"},{default:o(({row:l})=>[P(w(b(pt)(l.phone)),1)]),_:1}),a(r,{prop:"level",label:"客户等级",width:"100"},{default:o(({row:l})=>[a(S,{type:ke(l.level),size:"small"},{default:o(()=>[P(w(Ie(l.level)),1)]),_:2},1032,["type"])]),_:1}),a(r,{prop:"orderCount",label:"订单数",width:"80"}),a(r,{prop:"totalAmount",label:"消费总额",width:"120"},{default:o(({row:l})=>[s("span",Gt,"¥"+w(l.totalAmount),1)]),_:1}),a(r,{prop:"lastOrderTime",label:"最后下单",width:"180"}),a(r,{label:"操作",width:"120"},{default:o(({row:l})=>[a(p,{onClick:Te=>Ee(l),type:"primary",link:"",size:"small"},{default:o(()=>[...e[29]||(e[29]=[P(" 查看详情 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ue,K.value]]),s("div",Jt,[a(ce,{"current-page":C.currentPage,"onUpdate:currentPage":e[5]||(e[5]=l=>C.currentPage=l),"page-size":C.pageSize,"onUpdate:pageSize":e[6]||(e[6]=l=>C.pageSize=l),"page-sizes":[10,20,50,100],total:C.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ye,onCurrentChange:Ve},null,8,["current-page","page-size","total"])])],512),[[ve,k.value==="customers"]]),j(s("div",null,[j((M(),A(y,{data:ie.value,style:{width:"100%"}},{default:o(()=>[a(r,{prop:"productName",label:"商品名称"}),a(r,{prop:"salesCount",label:"销售数量",width:"100"}),a(r,{prop:"salesAmount",label:"销售金额",width:"120"},{default:o(({row:l})=>[s("span",Wt,"¥"+w(l.salesAmount),1)]),_:1}),a(r,{prop:"commission",label:"佣金",width:"100"},{default:o(({row:l})=>[s("span",Xt,"¥"+w(l.commission),1)]),_:1}),a(r,{prop:"avgPrice",label:"平均单价",width:"100"},{default:o(({row:l})=>[s("span",null,"¥"+w(l.avgPrice),1)]),_:1}),a(r,{prop:"lastSaleTime",label:"最后销售",width:"180"})]),_:1},8,["data"])),[[ue,K.value]]),s("div",Zt,[a(ce,{"current-page":D.currentPage,"onUpdate:currentPage":e[7]||(e[7]=l=>D.currentPage=l),"page-size":D.pageSize,"onUpdate:pageSize":e[8]||(e[8]=l=>D.pageSize=l),"page-sizes":[10,20,50,100],total:D.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Fe,onCurrentChange:qe},null,8,["current-page","page-size","total"])])],512),[[ve,k.value==="products"]])]),_:1})])}}}),ra=ft(Ht,[["__scopeId","data-v-3dea72db"]]);export{ra as default};
