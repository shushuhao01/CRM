const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DkAJPKqn.js","assets/vendor-BtukhyiH.js","assets/elementPlus-DxaqjplL.js","assets/utils-DfI7e5Rl.js","assets/index-Cj-RrGL6.css"])))=>i.map(i=>d[i]);
import{l as e}from"./index-DkAJPKqn.js";import{aw as o,r as a,e as l}from"./vendor-BtukhyiH.js";const i={orderSource:{fieldName:"è®¢å•æ¥æº",options:[{label:"ðŸ›’ çº¿ä¸Šå•†åŸŽ",value:"online_store",icon:"ðŸ›’"},{label:"ðŸ“± å¾®ä¿¡å°ç¨‹åº",value:"wechat_mini",icon:"ðŸ“±"},{label:"ðŸ’¬ å¾®ä¿¡å®¢æœ",value:"wechat_service",icon:"ðŸ’¬"},{label:"ðŸ“ž ç”µè¯å’¨è¯¢",value:"phone_call",icon:"ðŸ“ž"},{label:"ðŸª çº¿ä¸‹é—¨åº—",value:"offline_store",icon:"ðŸª"},{label:"ðŸ‘¥ å®¢æˆ·æŽ¨è",value:"referral",icon:"ðŸ‘¥"},{label:"ðŸ“º å¹¿å‘ŠæŠ•æ”¾",value:"advertisement",icon:"ðŸ“º"},{label:"ðŸŽ¯ å…¶ä»–æ¸ é“",value:"other",icon:"ðŸŽ¯"}]},customFields:[]},r=o("orderFieldConfig",()=>{const o=a(JSON.parse(JSON.stringify(i))),r=a(!1),s=l(()=>o.value.orderSource.fieldName),t=l(()=>o.value.orderSource.options),d=l(()=>o.value.customFields),u=l(()=>o.value.customFields.filter(e=>e.showInList).sort((e,o)=>e.sortOrder-o.sortOrder)),n=async()=>{try{r.value=!0;const{api:a}=await e(async()=>{const{api:e}=await import("./index-DkAJPKqn.js").then(e=>e.T);return{api:e}},__vite__mapDeps([0,1,2,3,4])),l=await a.get("/system/order-field-config");l.data&&(o.value=l.data)}catch(a){console.warn("ä»ŽAPIåŠ è½½è®¢å•å­—æ®µé…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®:",a)}finally{r.value=!1}},c=async()=>{try{const{api:a}=await e(async()=>{const{api:e}=await import("./index-DkAJPKqn.js").then(e=>e.T);return{api:e}},__vite__mapDeps([0,1,2,3,4]));await a.put("/system/order-field-config",o.value)}catch(a){throw console.error("ä¿å­˜è®¢å•å­—æ®µé…ç½®åˆ°APIå¤±è´¥:",a),a}};return n(),{config:o,loading:r,orderSourceFieldName:s,orderSourceOptions:t,customFields:d,visibleCustomFields:u,loadConfig:n,saveConfig:c,updateOrderSourceConfig:(e,a)=>{o.value.orderSource.fieldName=e,o.value.orderSource.options=a,c()},addCustomField:e=>{const a={...e,id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sortOrder:o.value.customFields.length};return o.value.customFields.push(a),c(),a},updateCustomField:(e,a)=>{const l=o.value.customFields.findIndex(o=>o.id===e);l>-1&&(o.value.customFields[l]={...o.value.customFields[l],...a},c())},deleteCustomField:e=>{o.value.customFields=o.value.customFields.filter(o=>o.id!==e),o.value.customFields.forEach((e,o)=>{e.sortOrder=o}),c()},reorderCustomFields:e=>{const a=[];e.forEach((e,l)=>{const i=o.value.customFields.find(o=>o.id===e);i&&(i.sortOrder=l,a.push(i))}),o.value.customFields=a,c()},resetToDefault:()=>{o.value=JSON.parse(JSON.stringify(i)),c()},getFieldByKey:e=>o.value.customFields.find(o=>o.fieldKey===e)}});export{r as u};
