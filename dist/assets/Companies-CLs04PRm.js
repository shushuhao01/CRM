var y=(q,T,h)=>new Promise((V,g)=>{var U=o=>{try{d(h.next(o))}catch(m){g(m)}},w=o=>{try{d(h.throw(o))}catch(m){g(m)}},d=o=>o.done?V(o.value):Promise.resolve(o.value).then(U,w);d((h=h.apply(q,T)).next())});import{l as ce,az as pe,r as b,Z as S,e as me,c as fe,z as ge,ag as r,aq as ve,m as we,p as j,q as P,U as t,O as l,S as u,u as C,P as be,M as _e,T as z}from"./vendor-D8Vxqhr-.js";import{c as he,_ as ke}from"./settings-CuxbDWOu.js";import{p as ye,u as Ve,n as Ue,s as Pe,r as Ce,b as L,E as _}from"./elementPlus-Bmwh7Rh8.js";import"./utils-ywHRn0uI.js";const xe={class:"logistics-companies"},ze={class:"page-header"},Te={class:"header-actions"},Ne={class:"pagination-wrapper"},Se={class:"dialog-footer"},qe=ce({__name:"Companies",setup(q){const T=pe(),h=he(T),V=b(!1),g=b(!1),U=b(!1),w=b(!1),d=new Set,o=b(!1),m=S({name:"",code:"",status:""}),B=b([]),v=S({page:1,size:10,total:0}),n=S({id:"",name:"",code:"",logo:"",website:"",trackingUrl:"",apiUrl:"",contactPhone:"",servicePhone:"",status:"active",remark:""}),x=b(),M={name:[{required:!0,message:"请输入公司名称",trigger:"blur"}],code:[{required:!0,message:"请输入公司代码",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"公司代码只能包含大写字母和数字",trigger:"blur"}],website:[{type:"url",message:"请输入正确的网址格式",trigger:"blur"}],trackingUrl:[{required:!0,message:"请输入跟踪地址",trigger:"blur"}],contactPhone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}]},F=me(()=>w.value?"编辑物流公司":"新增物流公司"),D=()=>{v.page=1,k()},Z=()=>{Object.assign(m,{name:"",code:"",status:""}),D()},Y=()=>{w.value=!1,$(),g.value=!0},G=s=>{h.push(`/logistics/company/detail/${s.id}`)},H=s=>{w.value=!0,Object.assign(n,s),g.value=!0},J=s=>y(this,null,function*(){if(o.value)return;const e=s.status==="active"?"禁用":"启用";try{if(yield L.confirm(`确定要${e}该物流公司吗？`,"提示",{confirmButtonText:`确定${e}`,cancelButtonText:"取消",type:"warning"}),o.value)return;yield new Promise(i=>{const c=setTimeout(()=>{d.delete(c),i(void 0)},500);d.add(c)}),o.value||(s.status=s.status==="active"?"inactive":"active",_.success(`${e}成功`))}catch(i){}}),K=s=>y(this,null,function*(){if(!o.value)try{if(yield L.confirm("确定要删除该物流公司吗？此操作不可撤销","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}),o.value)return;yield new Promise(e=>{const i=setTimeout(()=>{d.delete(i),e(void 0)},500);d.add(i)}),o.value||(_.success("删除成功"),k())}catch(e){}}),Q=()=>{_.info("导入功能开发中...")},W=()=>{_.info("导出功能开发中...")},X=s=>{v.size=s,k()},ee=s=>{v.page=s,k()},te=()=>y(this,null,function*(){!x.value||o.value||(yield x.value.validate(s=>y(this,null,function*(){if(s&&!o.value){U.value=!0;try{yield new Promise(e=>{const i=setTimeout(()=>{d.delete(i),e(void 0)},1e3);d.add(i)}),o.value||(_.success(w.value?"编辑成功":"新增成功"),g.value=!1,k())}catch(e){o.value||_.error(w.value?"编辑失败":"新增失败")}finally{o.value||(U.value=!1)}}})))}),I=()=>{g.value=!1,$()},$=()=>{var s;Object.assign(n,{id:"",name:"",code:"",logo:"",website:"",trackingUrl:"",apiUrl:"",contactPhone:"",servicePhone:"",status:"active",remark:""}),(s=x.value)==null||s.clearValidate()},k=()=>y(this,null,function*(){if(!o.value){V.value=!0;try{if(yield new Promise(e=>{const i=setTimeout(()=>{d.delete(i),e(void 0)},500);d.add(i)}),o.value)return;const s=[{id:"1",name:"顺丰速运",code:"SF",logo:"https://www.sf-express.com/favicon.ico",website:"https://www.sf-express.com",trackingUrl:"https://www.sf-express.com/cn/sc/dynamic_function/waybill/#search/bill-number/{trackingNo}",apiUrl:"https://api.sf-express.com/tracking",contactPhone:"95338",servicePhone:"95338",status:"active",createTime:"2024-01-01 10:00:00",remark:"顺丰速运官方合作"},{id:"2",name:"中通快递",code:"ZTO",logo:"/src/assets/images/zto-logo.svg",website:"https://www.zto.com",trackingUrl:"https://www.zto.com/service/bill-query?billNo={trackingNo}",apiUrl:"https://api.zto.com/tracking",contactPhone:"95311",servicePhone:"95311",status:"active",createTime:"2024-01-01 10:00:00",remark:"中通快递官方合作"},{id:"3",name:"圆通速递",code:"YTO",logo:"https://www.yto.net.cn/favicon.ico",website:"https://www.yto.net.cn",trackingUrl:"https://www.yto.net.cn/query/{trackingNo}",apiUrl:"https://api.yto.net.cn/tracking",contactPhone:"95554",servicePhone:"95554",status:"active",createTime:"2024-01-01 10:00:00",remark:"圆通速递官方合作"},{id:"4",name:"申通快递",code:"STO",logo:"https://www.sto.cn/favicon.ico",website:"https://www.sto.cn",trackingUrl:"https://www.sto.cn/query/{trackingNo}",apiUrl:"https://api.sto.cn/tracking",contactPhone:"95543",servicePhone:"95543",status:"active",createTime:"2024-01-01 10:00:00",remark:"申通快递官方合作"},{id:"5",name:"韵达速递",code:"YD",logo:"/src/assets/images/yunda-logo.svg",website:"https://www.yunda.com",trackingUrl:"https://www.yunda.com/query/{trackingNo}",apiUrl:"https://api.yunda.com/tracking",contactPhone:"95546",servicePhone:"95546",status:"inactive",createTime:"2024-01-01 10:00:00",remark:"韵达速递暂停合作"}];o.value||(B.value=s,v.total=5)}catch(s){o.value||_.error("加载数据失败")}finally{o.value||(V.value=!1)}}});return fe(()=>{k()}),ge(()=>{o.value=!0,d.forEach(s=>{clearTimeout(s)}),d.clear()}),(s,e)=>{const i=r("el-button"),c=r("el-input"),p=r("el-form-item"),E=r("el-option"),ae=r("el-select"),O=r("el-form"),A=r("el-card"),f=r("el-table-column"),le=r("el-avatar"),oe=r("el-link"),ne=r("el-tag"),se=r("el-table"),ie=r("el-pagination"),R=r("el-radio"),re=r("el-radio-group"),ue=r("el-dialog"),de=ve("loading");return j(),we("div",xe,[P("div",ze,[e[19]||(e[19]=P("h2",null,"物流公司管理",-1)),P("div",Te,[t(i,{onClick:Y,type:"primary",icon:C(ye)},{default:l(()=>[...e[16]||(e[16]=[u(" 新增物流公司 ",-1)])]),_:1},8,["icon"]),t(i,{onClick:Q,icon:C(Ve)},{default:l(()=>[...e[17]||(e[17]=[u(" 导入数据 ",-1)])]),_:1},8,["icon"]),t(i,{onClick:W,icon:C(Ue)},{default:l(()=>[...e[18]||(e[18]=[u(" 导出数据 ",-1)])]),_:1},8,["icon"])])]),t(A,{class:"search-card"},{default:l(()=>[t(O,{model:m,inline:!0,class:"search-form"},{default:l(()=>[t(p,{label:"公司名称"},{default:l(()=>[t(c,{modelValue:m.name,"onUpdate:modelValue":e[0]||(e[0]=a=>m.name=a),placeholder:"请输入公司名称",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),t(p,{label:"公司代码"},{default:l(()=>[t(c,{modelValue:m.code,"onUpdate:modelValue":e[1]||(e[1]=a=>m.code=a),placeholder:"请输入公司代码",clearable:"",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),t(p,{label:"状态"},{default:l(()=>[t(ae,{modelValue:m.status,"onUpdate:modelValue":e[2]||(e[2]=a=>m.status=a),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:l(()=>[t(E,{label:"启用",value:"active"}),t(E,{label:"禁用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),t(p,null,{default:l(()=>[t(i,{onClick:D,type:"primary",icon:C(Pe)},{default:l(()=>[...e[20]||(e[20]=[u(" 搜索 ",-1)])]),_:1},8,["icon"]),t(i,{onClick:Z,icon:C(Ce)},{default:l(()=>[...e[21]||(e[21]=[u(" 重置 ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),t(A,{class:"table-card"},{default:l(()=>[be((j(),_e(se,{data:B.value,style:{width:"100%"}},{default:l(()=>[t(f,{type:"selection",width:"55"}),t(f,{prop:"logo",label:"Logo",width:"80"},{default:l(({row:a})=>[t(le,{src:a.logo,size:40,shape:"square"},{default:l(()=>[u(z(a.name.charAt(0)),1)]),_:2},1032,["src"])]),_:1}),t(f,{prop:"name",label:"公司名称",width:"150"}),t(f,{prop:"code",label:"公司代码",width:"120"}),t(f,{prop:"website",label:"官网",width:"200"},{default:l(({row:a})=>[t(oe,{href:a.website,target:"_blank",type:"primary"},{default:l(()=>[u(z(a.website),1)]),_:2},1032,["href"])]),_:1}),t(f,{prop:"trackingUrl",label:"跟踪地址","show-overflow-tooltip":"","min-width":"200"}),t(f,{prop:"apiUrl",label:"API地址","show-overflow-tooltip":"","min-width":"200"}),t(f,{prop:"contactPhone",label:"联系电话",width:"120"}),t(f,{prop:"status",label:"状态",width:"80"},{default:l(({row:a})=>[t(ne,{type:a.status==="active"?"success":"danger",size:"small"},{default:l(()=>[u(z(a.status==="active"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),t(f,{prop:"createTime",label:"创建时间",width:"150"}),t(f,{label:"操作",width:"200",fixed:"right"},{default:l(({row:a})=>[t(i,{onClick:N=>G(a),type:"primary",link:"",size:"small"},{default:l(()=>[...e[22]||(e[22]=[u(" 查看 ",-1)])]),_:1},8,["onClick"]),t(i,{onClick:N=>H(a),type:"success",link:"",size:"small"},{default:l(()=>[...e[23]||(e[23]=[u(" 编辑 ",-1)])]),_:1},8,["onClick"]),t(i,{onClick:N=>J(a),type:a.status==="active"?"warning":"success",link:"",size:"small"},{default:l(()=>[u(z(a.status==="active"?"禁用":"启用"),1)]),_:2},1032,["onClick","type"]),t(i,{onClick:N=>K(a),type:"danger",link:"",size:"small"},{default:l(()=>[...e[24]||(e[24]=[u(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[de,V.value]]),P("div",Ne,[t(ie,{"current-page":v.page,"onUpdate:currentPage":e[3]||(e[3]=a=>v.page=a),"page-size":v.size,"onUpdate:pageSize":e[4]||(e[4]=a=>v.size=a),"page-sizes":[10,20,50,100],total:v.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:X,onCurrentChange:ee},null,8,["current-page","page-size","total"])])]),_:1}),t(ue,{modelValue:g.value,"onUpdate:modelValue":e[15]||(e[15]=a=>g.value=a),title:F.value,width:"600px","before-close":I},{footer:l(()=>[P("span",Se,[t(i,{onClick:I},{default:l(()=>[...e[27]||(e[27]=[u("取消",-1)])]),_:1}),t(i,{onClick:te,type:"primary",loading:U.value},{default:l(()=>[...e[28]||(e[28]=[u(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[t(O,{ref_key:"formRef",ref:x,model:n,rules:M,"label-width":"100px"},{default:l(()=>[t(p,{label:"公司名称",prop:"name"},{default:l(()=>[t(c,{modelValue:n.name,"onUpdate:modelValue":e[5]||(e[5]=a=>n.name=a),placeholder:"请输入公司名称"},null,8,["modelValue"])]),_:1}),t(p,{label:"公司代码",prop:"code"},{default:l(()=>[t(c,{modelValue:n.code,"onUpdate:modelValue":e[6]||(e[6]=a=>n.code=a),placeholder:"请输入公司代码"},null,8,["modelValue"])]),_:1}),t(p,{label:"Logo",prop:"logo"},{default:l(()=>[t(c,{modelValue:n.logo,"onUpdate:modelValue":e[7]||(e[7]=a=>n.logo=a),placeholder:"请输入Logo地址"},null,8,["modelValue"])]),_:1}),t(p,{label:"官网地址",prop:"website"},{default:l(()=>[t(c,{modelValue:n.website,"onUpdate:modelValue":e[8]||(e[8]=a=>n.website=a),placeholder:"请输入官网地址"},null,8,["modelValue"])]),_:1}),t(p,{label:"跟踪地址",prop:"trackingUrl"},{default:l(()=>[t(c,{modelValue:n.trackingUrl,"onUpdate:modelValue":e[9]||(e[9]=a=>n.trackingUrl=a),placeholder:"请输入跟踪地址模板，如：https://www.sf-express.com/cn/sc/dynamic_function/waybill/#search/bill-number/{trackingNo}",type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),t(p,{label:"API地址",prop:"apiUrl"},{default:l(()=>[t(c,{modelValue:n.apiUrl,"onUpdate:modelValue":e[10]||(e[10]=a=>n.apiUrl=a),placeholder:"请输入API地址",type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),t(p,{label:"联系电话",prop:"contactPhone"},{default:l(()=>[t(c,{modelValue:n.contactPhone,"onUpdate:modelValue":e[11]||(e[11]=a=>n.contactPhone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),t(p,{label:"客服电话",prop:"servicePhone"},{default:l(()=>[t(c,{modelValue:n.servicePhone,"onUpdate:modelValue":e[12]||(e[12]=a=>n.servicePhone=a),placeholder:"请输入客服电话"},null,8,["modelValue"])]),_:1}),t(p,{label:"状态",prop:"status"},{default:l(()=>[t(re,{modelValue:n.status,"onUpdate:modelValue":e[13]||(e[13]=a=>n.status=a)},{default:l(()=>[t(R,{label:"active"},{default:l(()=>[...e[25]||(e[25]=[u("启用",-1)])]),_:1}),t(R,{label:"inactive"},{default:l(()=>[...e[26]||(e[26]=[u("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"备注",prop:"remark"},{default:l(()=>[t(c,{modelValue:n.remark,"onUpdate:modelValue":e[14]||(e[14]=a=>n.remark=a),placeholder:"请输入备注信息",type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Oe=ke(qe,[["__scopeId","data-v-13cd7b64"]]);export{Oe as default};
