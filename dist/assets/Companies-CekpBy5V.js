const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DkAJPKqn.js","assets/vendor-BtukhyiH.js","assets/elementPlus-DxaqjplL.js","assets/utils-DfI7e5Rl.js","assets/index-Cj-RrGL6.css"])))=>i.map(i=>d[i]);
import{_ as e,l as a}from"./index-DkAJPKqn.js";import{l,r as t,Z as s,e as o,w as r,ag as i,M as n,q as u,O as c,U as d,p,S as m,u as g,m as f,Q as v,J as y,T as b,aA as h,b as _,z as w,aq as V,P as x}from"./vendor-BtukhyiH.js";import{ah as U,l as k,ai as I,E as S,u as C,C as P,e as z,G as O,F as A,r as D,s as j,b as L}from"./elementPlus-DxaqjplL.js";import"./utils-DfI7e5Rl.js";const T={class:"dialog-footer"},q=e(l({__name:"SFExpressConfigDialog",props:{visible:{type:Boolean,default:!1},config:{default:void 0}},emits:["update:visible","success"],setup(e,{emit:a}){const l=e,h=a,_=t(),w=t(!1),V=t(!1),x=t(!1),C=s({appId:"",checkWord:"",apiUrl:"https://sfapi-sbox.sf-express.com/std/service",enabled:!0}),P=s({status:"",message:"",success:!1}),z={appId:[{required:!0,message:"请输入应用ID",trigger:"blur"},{min:3,message:"应用ID长度不能少于3位",trigger:"blur"}],checkWord:[{required:!0,message:"请输入校验码",trigger:"blur"},{min:6,message:"校验码长度不能少于6位",trigger:"blur"}],apiUrl:[{required:!0,message:"请输入API地址",trigger:"blur"},{type:"url",message:"请输入正确的URL格式",trigger:"blur"}]},O=o(()=>C.appId&&C.checkWord&&C.apiUrl);r(()=>l.visible,e=>{w.value=e,e&&l.config&&Object.assign(C,l.config)}),r(w,e=>{h("update:visible",e)}),r([()=>C.appId,()=>C.checkWord,()=>C.apiUrl],()=>{P.status="",P.message="",P.success=!1});const A=async()=>{if(_.value){try{await _.value.validate()}catch{return void S.warning("请先填写完整的配置信息")}x.value=!0,P.status="",P.message="",P.success=!1;try{const a=await fetch("/api/v1/sf-express/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:C.appId,checkWord:C.checkWord,apiUrl:C.apiUrl})}),l=await a.text();let t;console.log("响应文本:",l);try{t=JSON.parse(l)}catch(e){return console.error("JSON解析失败:",e),P.status="error",P.message="✗ 服务器响应格式错误",P.success=!1,void S.error("服务器响应格式错误,请查看控制台")}t.success?(P.status="success",P.message="✓ 连接成功!",P.success=!0,S.success("顺丰API连接测试成功")):(P.status="error",P.message=`✗ 连接失败: ${t.message||"未知错误"}`,P.success=!1,S.error("连接测试失败,请检查配置信息"))}catch(a){console.error("测试连接失败:",a),P.status="error",P.message="✗ 连接失败: "+(a?.message||"网络错误"),P.success=!1,S.error("连接测试失败: "+(a?.message||"网络错误"))}finally{x.value=!1}}},D=async()=>{if(_.value){try{await _.value.validate()}catch{return}if(P.success){V.value=!0;try{const e={appId:C.appId,checkWord:C.checkWord,apiUrl:C.apiUrl,enabled:C.enabled,updatedAt:(new Date).toISOString()};localStorage.setItem("sf_express_config",JSON.stringify(e)),S.success("顺丰配置保存成功"),h("success",e),j()}catch(e){console.error("保存配置失败:",e),S.error("保存配置失败")}finally{V.value=!1}}else S.warning("请先测试连接成功后再保存")}},j=()=>{w.value=!1,_.value?.resetFields(),P.status="",P.message="",P.success=!1};return(e,a)=>{const l=i("el-alert"),t=i("el-icon"),s=i("el-input"),o=i("el-form-item"),r=i("el-option"),h=i("el-select"),S=i("el-switch"),L=i("el-divider"),q=i("el-button"),W=i("el-form"),E=i("el-dialog");return u(),n(E,{modelValue:w.value,"onUpdate:modelValue":a[4]||(a[4]=e=>w.value=e),title:"顺丰快递配置",width:"600px","close-on-click-modal":!1,onClose:j},{footer:c(()=>[p("span",T,[d(q,{onClick:j},{default:c(()=>[...a[12]||(a[12]=[m("取消",-1)])]),_:1}),d(q,{onClick:D,type:"primary",loading:V.value,disabled:!P.success},{default:c(()=>[...a[13]||(a[13]=[m(" 保存配置 ",-1)])]),_:1},8,["loading","disabled"])])]),default:c(()=>[d(W,{ref_key:"formRef",ref:_,model:C,rules:z,"label-width":"120px"},{default:c(()=>[d(l,{title:"顺丰丰桥平台配置",type:"info",closable:!1,style:{"margin-bottom":"20px"}},{default:c(()=>[...a[5]||(a[5]=[p("div",{style:{"font-size":"13px","line-height":"1.8"}},[p("p",{style:{margin:"0 0 8px 0"}},[p("strong",null,"配置步骤:")]),p("p",{style:{margin:"0 0 4px 0"}},[m("1. 登录 "),p("a",{href:"https://qiao.sf-express.com",target:"_blank",style:{color:"#409eff"}},"顺丰丰桥平台")]),p("p",{style:{margin:"0 0 4px 0"}},"2. 创建应用,获取 partnerID 和 checkWord"),p("p",{style:{margin:"0 0 4px 0"}},"3. 填入下方配置信息并测试连接"),p("p",{style:{margin:"8px 0 0 0","font-size":"12px",color:"#e6a23c"}},[p("strong",null,"⚠️ 重要提示:"),m(" API地址必须包含完整路径 /std/service ")]),p("p",{style:{margin:"4px 0 0 0","font-size":"12px",color:"#909399"}},[p("strong",null,"环境说明:"),m(" 测试环境用于开发调试，生产环境用于正式业务 ")])],-1)])]),_:1}),d(o,{label:"应用ID",prop:"appId"},{default:c(()=>[d(s,{modelValue:C.appId,"onUpdate:modelValue":a[0]||(a[0]=e=>C.appId=e),placeholder:"请输入顺丰应用ID",clearable:""},{prepend:c(()=>[d(t,null,{default:c(()=>[d(g(U))]),_:1})]),_:1},8,["modelValue"]),a[6]||(a[6]=p("div",{class:"form-tip"},"从丰桥平台获取的 partnerID",-1))]),_:1}),d(o,{label:"校验码",prop:"checkWord"},{default:c(()=>[d(s,{modelValue:C.checkWord,"onUpdate:modelValue":a[1]||(a[1]=e=>C.checkWord=e),type:"password",placeholder:"请输入校验码","show-password":"",clearable:""},{prepend:c(()=>[d(t,null,{default:c(()=>[d(g(k))]),_:1})]),_:1},8,["modelValue"]),a[7]||(a[7]=p("div",{class:"form-tip"},"从丰桥平台获取的 checkWord",-1))]),_:1}),d(o,{label:"API地址",prop:"apiUrl"},{default:c(()=>[d(h,{modelValue:C.apiUrl,"onUpdate:modelValue":a[2]||(a[2]=e=>C.apiUrl=e),placeholder:"请选择API环境",style:{width:"100%"}},{default:c(()=>[d(r,{label:"生产环境",value:"https://sfapi.sf-express.com/std/service"},{default:c(()=>[...a[8]||(a[8]=[p("div",{style:{display:"flex","flex-direction":"column"}},[p("span",{style:{"font-weight":"500"}},"生产环境"),p("span",{style:{"font-size":"12px",color:"#909399"}},"https://sfapi.sf-express.com/std/service")],-1)])]),_:1}),d(r,{label:"测试环境",value:"https://sfapi-sbox.sf-express.com/std/service"},{default:c(()=>[...a[9]||(a[9]=[p("div",{style:{display:"flex","flex-direction":"column"}},[p("span",{style:{"font-weight":"500"}},"测试环境"),p("span",{style:{"font-size":"12px",color:"#909399"}},"https://sfapi-sbox.sf-express.com/std/service")],-1)])]),_:1})]),_:1},8,["modelValue"]),a[10]||(a[10]=p("div",{class:"form-tip"},[p("strong",null,"重要:"),m(" 必须使用完整路径 /std/service，测试环境用于开发调试，生产环境用于正式业务 ")],-1))]),_:1}),d(o,{label:"启用状态"},{default:c(()=>[d(S,{modelValue:C.enabled,"onUpdate:modelValue":a[3]||(a[3]=e=>C.enabled=e),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),d(L),d(o,{label:"测试连接"},{default:c(()=>[d(q,{onClick:A,loading:x.value,disabled:!O.value},{default:c(()=>[d(t,null,{default:c(()=>[d(g(I))]),_:1}),a[11]||(a[11]=m(" 测试连接 ",-1))]),_:1},8,["loading","disabled"]),P.status?(u(),f("span",{key:0,class:y(["test-result",P.status])},b(P.message),3)):v("",!0)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-de334011"]]),W={class:"dialog-footer"},E=e(l({__name:"YTOExpressConfigDialog",props:{visible:{type:Boolean,default:!1},config:{default:void 0}},emits:["update:visible","success"],setup(e,{emit:a}){const l=e,h=a,_=t(),w=t(!1),V=t(!1),x=t(!1),U=s({userId:"",appKey:"",apiUrl:"https://open-sbox.yto.net.cn/service",enabled:!0}),P=s({status:"",message:"",success:!1}),z={userId:[{required:!0,message:"请输入用户ID",trigger:"blur"},{min:3,message:"用户ID长度不能少于3位",trigger:"blur"}],appKey:[{required:!0,message:"请输入应用密钥",trigger:"blur"},{min:10,message:"应用密钥长度不能少于10位",trigger:"blur"}],apiUrl:[{required:!0,message:"请选择API环境",trigger:"change"},{type:"url",message:"请输入正确的URL格式",trigger:"blur"}]},O=o(()=>U.userId&&U.appKey&&U.apiUrl);r(()=>l.visible,e=>{w.value=e,e&&l.config&&Object.assign(U,l.config)}),r(w,e=>{h("update:visible",e)}),r([()=>U.userId,()=>U.appKey,()=>U.apiUrl],()=>{P.status="",P.message="",P.success=!1});const A=async()=>{if(_.value){try{await _.value.validate()}catch{return void S.warning("请先填写完整的配置信息")}x.value=!0,P.status="",P.message="",P.success=!1;try{const a=await fetch("/api/v1/yto-express/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:U.userId,appKey:U.appKey,apiUrl:U.apiUrl})}),l=await a.text();let t;console.log("响应文本:",l);try{t=JSON.parse(l)}catch(e){return console.error("JSON解析失败:",e),P.status="error",P.message="✗ 服务器响应格式错误",P.success=!1,void S.error("服务器响应格式错误,请查看控制台")}t.success?(P.status="success",P.message="✓ 连接成功!",P.success=!0,S.success("圆通API连接测试成功")):(P.status="error",P.message=`✗ 连接失败: ${t.message||"未知错误"}`,P.success=!1,S.error("连接测试失败,请检查配置信息"))}catch(a){console.error("测试连接失败:",a),P.status="error",P.message="✗ 连接失败: "+(a?.message||"网络错误"),P.success=!1,S.error("连接测试失败: "+(a?.message||"网络错误"))}finally{x.value=!1}}},D=async()=>{if(_.value){try{await _.value.validate()}catch{return}if(P.success){V.value=!0;try{const e={userId:U.userId,appKey:U.appKey,apiUrl:U.apiUrl,enabled:U.enabled,updatedAt:(new Date).toISOString()};localStorage.setItem("yto_express_config",JSON.stringify(e)),S.success("圆通配置保存成功"),h("success",e),j()}catch(e){console.error("保存配置失败:",e),S.error("保存配置失败")}finally{V.value=!1}}else S.warning("请先测试连接成功后再保存")}},j=()=>{w.value=!1,_.value?.resetFields(),P.status="",P.message="",P.success=!1};return(e,a)=>{const l=i("el-alert"),t=i("el-icon"),s=i("el-input"),o=i("el-form-item"),r=i("el-option"),h=i("el-select"),S=i("el-switch"),L=i("el-divider"),T=i("el-button"),q=i("el-form"),E=i("el-dialog");return u(),n(E,{modelValue:w.value,"onUpdate:modelValue":a[4]||(a[4]=e=>w.value=e),title:"圆通快递配置",width:"600px","close-on-click-modal":!1,onClose:j},{footer:c(()=>[p("span",W,[d(T,{onClick:j},{default:c(()=>[...a[12]||(a[12]=[m("取消",-1)])]),_:1}),d(T,{onClick:D,type:"primary",loading:V.value,disabled:!P.success},{default:c(()=>[...a[13]||(a[13]=[m(" 保存配置 ",-1)])]),_:1},8,["loading","disabled"])])]),default:c(()=>[d(q,{ref_key:"formRef",ref:_,model:U,rules:z,"label-width":"120px"},{default:c(()=>[d(l,{title:"圆通开放平台配置",type:"info",closable:!1,style:{"margin-bottom":"20px"}},{default:c(()=>[...a[5]||(a[5]=[p("div",{style:{"font-size":"13px","line-height":"1.8"}},[p("p",{style:{margin:"0 0 8px 0"}},[p("strong",null,"配置步骤:")]),p("p",{style:{margin:"0 0 4px 0"}},[m("1. 登录 "),p("a",{href:"https://open.yto.net.cn",target:"_blank",style:{color:"#409eff"}},"圆通开放平台")]),p("p",{style:{margin:"0 0 4px 0"}},"2. 创建应用,获取 user_id 和 app_key"),p("p",{style:{margin:"0 0 4px 0"}},"3. 填入下方配置信息并测试连接"),p("p",{style:{margin:"8px 0 0 0","font-size":"12px",color:"#e6a23c"}},[p("strong",null,"⚠️ 重要提示:"),m(" 生产环境需要配置IP白名单 ")])],-1)])]),_:1}),d(o,{label:"用户ID",prop:"userId"},{default:c(()=>[d(s,{modelValue:U.userId,"onUpdate:modelValue":a[0]||(a[0]=e=>U.userId=e),placeholder:"请输入圆通用户ID",clearable:""},{prepend:c(()=>[d(t,null,{default:c(()=>[d(g(C))]),_:1})]),_:1},8,["modelValue"]),a[6]||(a[6]=p("div",{class:"form-tip"},"从圆通开放平台获取的 user_id",-1))]),_:1}),d(o,{label:"应用密钥",prop:"appKey"},{default:c(()=>[d(s,{modelValue:U.appKey,"onUpdate:modelValue":a[1]||(a[1]=e=>U.appKey=e),type:"password",placeholder:"请输入应用密钥","show-password":"",clearable:""},{prepend:c(()=>[d(t,null,{default:c(()=>[d(g(k))]),_:1})]),_:1},8,["modelValue"]),a[7]||(a[7]=p("div",{class:"form-tip"},"从圆通开放平台获取的 app_key",-1))]),_:1}),d(o,{label:"API地址",prop:"apiUrl"},{default:c(()=>[d(h,{modelValue:U.apiUrl,"onUpdate:modelValue":a[2]||(a[2]=e=>U.apiUrl=e),placeholder:"请选择API环境",style:{width:"100%"}},{default:c(()=>[d(r,{label:"生产环境",value:"https://open.yto.net.cn/service"},{default:c(()=>[...a[8]||(a[8]=[p("div",{style:{display:"flex","flex-direction":"column"}},[p("span",{style:{"font-weight":"500"}},"生产环境"),p("span",{style:{"font-size":"12px",color:"#909399"}},"https://open.yto.net.cn/service")],-1)])]),_:1}),d(r,{label:"测试环境",value:"https://open-sbox.yto.net.cn/service"},{default:c(()=>[...a[9]||(a[9]=[p("div",{style:{display:"flex","flex-direction":"column"}},[p("span",{style:{"font-weight":"500"}},"测试环境（推荐）"),p("span",{style:{"font-size":"12px",color:"#909399"}},"https://open-sbox.yto.net.cn/service")],-1)])]),_:1})]),_:1},8,["modelValue"]),a[10]||(a[10]=p("div",{class:"form-tip"},[p("strong",null,"建议:"),m(" 先使用测试环境进行调试，测试成功后再切换到生产环境 ")],-1))]),_:1}),d(o,{label:"启用状态"},{default:c(()=>[d(S,{modelValue:U.enabled,"onUpdate:modelValue":a[3]||(a[3]=e=>U.enabled=e),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),d(L),d(o,{label:"测试连接"},{default:c(()=>[d(T,{onClick:A,loading:x.value,disabled:!O.value},{default:c(()=>[d(t,null,{default:c(()=>[d(g(I))]),_:1}),a[11]||(a[11]=m(" 测试连接 ",-1))]),_:1},8,["loading","disabled"]),P.status?(u(),f("span",{key:0,class:y(["test-result",P.status])},b(P.message),3)):v("",!0)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-87d286b3"]]),N={class:"logistics-companies"},J={class:"page-header"},K={class:"header-actions"},R={class:"pagination-wrapper"},$={class:"dialog-footer"},F=e(l({__name:"Companies",setup(e){h();const l=t(!1),r=t(!1),y=t(!1),U=t(!1),k=t(!1),I=t(null),C=t(!1),T=t(null),W=new Set,F=t(!1),Q=s({name:"",code:"",status:""}),B=t([]),Y=s({page:1,size:10,total:0}),Z=s({id:"",name:"",code:"",logo:"",website:"",trackingUrl:"",apiUrl:"",contactPhone:"",servicePhone:"",status:"active",remark:""}),G=t(),M={name:[{required:!0,message:"请输入公司名称",trigger:"blur"}],code:[{required:!0,message:"请输入公司代码",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"公司代码只能包含大写字母和数字",trigger:"blur"}],website:[{type:"url",message:"请输入正确的网址格式",trigger:"blur"}],trackingUrl:[{required:!0,message:"请输入跟踪地址",trigger:"blur"}],contactPhone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}]},H=o(()=>U.value?"编辑物流公司":"新增物流公司"),X=()=>{Y.page=1,pe()},ee=()=>{Object.assign(Q,{name:"",code:"",status:""}),X()},ae=()=>{U.value=!1,de(),r.value=!0},le=e=>{S.success("顺丰配置已保存,现在可以使用顺丰API功能了")},te=e=>{S.success("圆通配置已保存,现在可以使用圆通API功能了")},se=e=>{if(!e)return"-";return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},oe=()=>{S.info("导入功能开发中...")},re=()=>{S.info("导出功能开发中...")},ie=e=>{Y.size=e,pe()},ne=e=>{Y.page=e,pe()},ue=async()=>{G.value&&!F.value&&await G.value.validate(async e=>{if(e&&!F.value){y.value=!0;try{const{apiService:e}=await a(async()=>{const{apiService:e}=await import("./index-DkAJPKqn.js").then(e=>e.Q);return{apiService:e}},__vite__mapDeps([0,1,2,3,4]));U.value?await e.put(`/logistics/companies/${Z.id}`,Z):await e.post("/logistics/companies",Z),F.value||(S.success(U.value?"编辑成功":"新增成功"),r.value=!1,pe())}catch(l){if(!F.value){const e=l?.message||(U.value?"编辑失败":"新增失败");S.error(e)}}finally{F.value||(y.value=!1)}}})},ce=()=>{r.value=!1,de()},de=()=>{Object.assign(Z,{id:"",name:"",code:"",logo:"",website:"",trackingUrl:"",apiUrl:"",contactPhone:"",servicePhone:"",status:"active",remark:""}),G.value?.clearValidate()},pe=async()=>{if(!F.value){l.value=!0;try{const{apiService:e}=await a(async()=>{const{apiService:e}=await import("./index-DkAJPKqn.js").then(e=>e.Q);return{apiService:e}},__vite__mapDeps([0,1,2,3,4])),l=await e.get("/logistics/companies/list",{params:{name:Q.name||void 0,code:Q.code||void 0,status:Q.status||void 0,page:Y.page,pageSize:Y.size}});if(F.value)return;l&&l.list?(B.value=l.list.map(e=>({...e,statusLoading:!1})),Y.total=l.total||0):(B.value=[],Y.total=0)}catch(e){F.value||(console.error("加载物流公司数据失败:",e),B.value=[],Y.total=0)}finally{F.value||(l.value=!1)}}};return _(()=>{pe()}),w(()=>{F.value=!0,W.forEach(e=>{clearTimeout(e)}),W.clear()}),(e,t)=>{const s=i("el-button"),o=i("el-input"),h=i("el-form-item"),_=i("el-option"),w=i("el-select"),W=i("el-form"),de=i("el-card"),me=i("el-switch"),ge=i("el-table-column"),fe=i("el-avatar"),ve=i("el-link"),ye=i("el-icon"),be=i("el-table"),he=i("el-pagination"),_e=i("el-radio"),we=i("el-radio-group"),Ve=i("el-dialog"),xe=V("loading");return u(),f("div",N,[p("div",J,[t[21]||(t[21]=p("h2",null,"物流公司管理",-1)),p("div",K,[d(s,{onClick:ae,type:"primary",icon:g(P)},{default:c(()=>[...t[18]||(t[18]=[m(" 新增物流公司 ",-1)])]),_:1},8,["icon"]),d(s,{onClick:oe,icon:g(z)},{default:c(()=>[...t[19]||(t[19]=[m(" 导入数据 ",-1)])]),_:1},8,["icon"]),d(s,{onClick:re,icon:g(O)},{default:c(()=>[...t[20]||(t[20]=[m(" 导出数据 ",-1)])]),_:1},8,["icon"])])]),d(de,{class:"search-card"},{default:c(()=>[d(W,{model:Q,inline:!0,class:"search-form"},{default:c(()=>[d(h,{label:"公司名称"},{default:c(()=>[d(o,{modelValue:Q.name,"onUpdate:modelValue":t[0]||(t[0]=e=>Q.name=e),placeholder:"请输入公司名称",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),d(h,{label:"公司代码"},{default:c(()=>[d(o,{modelValue:Q.code,"onUpdate:modelValue":t[1]||(t[1]=e=>Q.code=e),placeholder:"请输入公司代码",clearable:"",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),d(h,{label:"状态"},{default:c(()=>[d(w,{modelValue:Q.status,"onUpdate:modelValue":t[2]||(t[2]=e=>Q.status=e),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:c(()=>[d(_,{label:"启用",value:"active"}),d(_,{label:"禁用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),d(h,null,{default:c(()=>[d(s,{onClick:X,type:"primary",icon:g(A)},{default:c(()=>[...t[22]||(t[22]=[m(" 搜索 ",-1)])]),_:1},8,["icon"]),d(s,{onClick:ee,icon:g(D)},{default:c(()=>[...t[23]||(t[23]=[m(" 重置 ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),d(de,{class:"table-card"},{default:c(()=>[x((u(),n(be,{data:B.value,style:{width:"100%"}},{default:c(()=>[d(ge,{label:"启用",width:"80",fixed:"left"},{default:c(({row:e})=>[d(me,{modelValue:e.status,"onUpdate:modelValue":a=>e.status=a,"active-value":"active","inactive-value":"inactive",onChange:l=>(async e=>{if(!F.value){e.statusLoading=!0;try{const{apiService:l}=await a(async()=>{const{apiService:e}=await import("./index-DkAJPKqn.js").then(e=>e.Q);return{apiService:e}},__vite__mapDeps([0,1,2,3,4]));await l.patch(`/logistics/companies/${e.id}/status`,{status:e.status}),F.value||S.success("active"===e.status?"已启用":"已禁用")}catch(l){e.status="active"===e.status?"inactive":"active",F.value||S.error("操作失败")}finally{e.statusLoading=!1}}})(e),loading:e.statusLoading},null,8,["modelValue","onUpdate:modelValue","onChange","loading"])]),_:1}),d(ge,{prop:"logo",label:"Logo",width:"80"},{default:c(({row:e})=>[d(fe,{src:e.logo,size:40,shape:"square"},{default:c(()=>[m(b(e.name.charAt(0)),1)]),_:2},1032,["src"])]),_:1}),d(ge,{prop:"name",label:"公司名称",width:"150"}),d(ge,{prop:"code",label:"公司代码",width:"120"}),d(ge,{prop:"website",label:"官网",width:"200"},{default:c(({row:e})=>[d(ve,{href:e.website,target:"_blank",type:"primary"},{default:c(()=>[m(b(e.website),1)]),_:2},1032,["href"])]),_:1}),d(ge,{prop:"trackingUrl",label:"跟踪地址","show-overflow-tooltip":"","min-width":"200"}),d(ge,{prop:"contactPhone",label:"联系电话",width:"120"}),d(ge,{prop:"createdAt",label:"创建时间",width:"170"},{default:c(({row:e})=>[m(b(se(e.createdAt)),1)]),_:1}),d(ge,{label:"操作",width:"200",fixed:"right"},{default:c(({row:e})=>[d(s,{onClick:a=>(e=>{U.value=!0,Object.assign(Z,e),r.value=!0})(e),type:"primary",link:"",size:"small"},{default:c(()=>[...t[24]||(t[24]=[m(" 编辑 ",-1)])]),_:1},8,["onClick"]),"SF"===e.code?(u(),n(s,{key:0,onClick:e=>(()=>{const e=localStorage.getItem("sf_express_config");if(e)try{I.value=JSON.parse(e)}catch(a){console.error("解析顺丰配置失败:",a),I.value=null}else I.value=null;k.value=!0})(),type:"warning",link:"",size:"small"},{default:c(()=>[d(ye,null,{default:c(()=>[d(g(j))]),_:1}),t[25]||(t[25]=m(" 配置 ",-1))]),_:1},8,["onClick"])):v("",!0),"YTO"===e.code?(u(),n(s,{key:1,onClick:e=>(()=>{const e=localStorage.getItem("yto_express_config");if(e)try{T.value=JSON.parse(e)}catch(a){console.error("解析圆通配置失败:",a),T.value=null}else T.value=null;C.value=!0})(),type:"warning",link:"",size:"small"},{default:c(()=>[d(ye,null,{default:c(()=>[d(g(j))]),_:1}),t[26]||(t[26]=m(" 配置 ",-1))]),_:1},8,["onClick"])):v("",!0),d(s,{onClick:l=>(async e=>{if(!F.value)try{if(await L.confirm("确定要删除该物流公司吗？此操作不可撤销","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}),F.value)return;const{apiService:l}=await a(async()=>{const{apiService:e}=await import("./index-DkAJPKqn.js").then(e=>e.Q);return{apiService:e}},__vite__mapDeps([0,1,2,3,4]));await l.delete(`/logistics/companies/${e.id}`),F.value||(S.success("删除成功"),pe())}catch(l){"cancel"!==l&&S.error("删除失败")}})(e),type:"danger",link:"",size:"small"},{default:c(()=>[...t[27]||(t[27]=[m(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[xe,l.value]]),p("div",R,[d(he,{"current-page":Y.page,"onUpdate:currentPage":t[3]||(t[3]=e=>Y.page=e),"page-size":Y.size,"onUpdate:pageSize":t[4]||(t[4]=e=>Y.size=e),"page-sizes":[10,20,50,100],total:Y.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ie,onCurrentChange:ne},null,8,["current-page","page-size","total"])])]),_:1}),d(q,{visible:k.value,"onUpdate:visible":t[5]||(t[5]=e=>k.value=e),config:I.value,onSuccess:le},null,8,["visible","config"]),d(E,{visible:C.value,"onUpdate:visible":t[6]||(t[6]=e=>C.value=e),config:T.value,onSuccess:te},null,8,["visible","config"]),d(Ve,{modelValue:r.value,"onUpdate:modelValue":t[17]||(t[17]=e=>r.value=e),title:H.value,width:"600px","before-close":ce},{footer:c(()=>[p("span",$,[d(s,{onClick:ce},{default:c(()=>[...t[30]||(t[30]=[m("取消",-1)])]),_:1}),d(s,{onClick:ue,type:"primary",loading:y.value},{default:c(()=>[...t[31]||(t[31]=[m(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:c(()=>[d(W,{ref_key:"formRef",ref:G,model:Z,rules:M,"label-width":"100px"},{default:c(()=>[d(h,{label:"公司名称",prop:"name"},{default:c(()=>[d(o,{modelValue:Z.name,"onUpdate:modelValue":t[7]||(t[7]=e=>Z.name=e),placeholder:"请输入公司名称"},null,8,["modelValue"])]),_:1}),d(h,{label:"公司代码",prop:"code"},{default:c(()=>[d(o,{modelValue:Z.code,"onUpdate:modelValue":t[8]||(t[8]=e=>Z.code=e),placeholder:"请输入公司代码"},null,8,["modelValue"])]),_:1}),d(h,{label:"Logo",prop:"logo"},{default:c(()=>[d(o,{modelValue:Z.logo,"onUpdate:modelValue":t[9]||(t[9]=e=>Z.logo=e),placeholder:"请输入Logo地址"},null,8,["modelValue"])]),_:1}),d(h,{label:"官网地址",prop:"website"},{default:c(()=>[d(o,{modelValue:Z.website,"onUpdate:modelValue":t[10]||(t[10]=e=>Z.website=e),placeholder:"请输入官网地址"},null,8,["modelValue"])]),_:1}),d(h,{label:"跟踪地址",prop:"trackingUrl"},{default:c(()=>[d(o,{modelValue:Z.trackingUrl,"onUpdate:modelValue":t[11]||(t[11]=e=>Z.trackingUrl=e),placeholder:"请输入跟踪地址模板，如：https://www.sf-express.com/cn/sc/dynamic_function/waybill/#search/bill-number/{trackingNo}",type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),d(h,{label:"API地址",prop:"apiUrl"},{default:c(()=>[d(o,{modelValue:Z.apiUrl,"onUpdate:modelValue":t[12]||(t[12]=e=>Z.apiUrl=e),placeholder:"请输入API地址",type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),d(h,{label:"联系电话",prop:"contactPhone"},{default:c(()=>[d(o,{modelValue:Z.contactPhone,"onUpdate:modelValue":t[13]||(t[13]=e=>Z.contactPhone=e),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),d(h,{label:"客服电话",prop:"servicePhone"},{default:c(()=>[d(o,{modelValue:Z.servicePhone,"onUpdate:modelValue":t[14]||(t[14]=e=>Z.servicePhone=e),placeholder:"请输入客服电话"},null,8,["modelValue"])]),_:1}),d(h,{label:"状态",prop:"status"},{default:c(()=>[d(we,{modelValue:Z.status,"onUpdate:modelValue":t[15]||(t[15]=e=>Z.status=e)},{default:c(()=>[d(_e,{label:"active"},{default:c(()=>[...t[28]||(t[28]=[m("启用",-1)])]),_:1}),d(_e,{label:"inactive"},{default:c(()=>[...t[29]||(t[29]=[m("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),d(h,{label:"备注",prop:"remark"},{default:c(()=>[d(o,{modelValue:Z.remark,"onUpdate:modelValue":t[16]||(t[16]=e=>Z.remark=e),placeholder:"请输入备注信息",type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-607f5050"]]);export{F as default};
