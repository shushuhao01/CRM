import{C as E,F as O,w as q,q as L,W as F,D as U,ai as W,a7 as z,as as I,E as K}from"./elementPlus-Bmwh7Rh8.js";import{m as P}from"./phone-DsAzMHsn.js";import{l as Q,e as R,ag as _,M as w,p as c,O as l,m as f,Q as v,q as t,U as e,S as d,u,T as a,F as $,a9 as j}from"./vendor-D8Vxqhr-.js";import{_ as G}from"./settings-CuxbDWOu.js";const J={key:0,class:"order-detail-content"},X={class:"detail-section"},Y={class:"section-title"},Z={class:"info-grid compact"},tt={class:"info-item"},st={class:"value"},et={class:"info-item"},ot={class:"info-item"},lt={class:"value"},at={class:"info-item"},nt={class:"value"},it={class:"info-item"},dt={class:"value"},rt={class:"info-item"},ut={class:"value"},ct={class:"info-item full-width"},mt={class:"value"},_t={class:"detail-section compact-section"},ft={class:"section-title small"},vt={class:"info-grid compact"},pt={class:"info-item"},gt={class:"value"},bt={class:"info-item"},ht={class:"value"},yt={class:"info-item"},kt={class:"value"},wt={class:"info-item"},xt={class:"value"},Ct={class:"detail-section"},Bt={class:"section-title"},At={class:"amount"},Mt={class:"amount"},Tt={class:"detail-section compact-section"},Vt={class:"section-title small"},Nt={class:"amount-summary compact"},St={class:"amount-row"},Dt={class:"amount-item"},Ht={class:"value total"},Et={class:"amount-item"},Ot={class:"value paid"},qt={class:"amount-item"},Lt={class:"value cod"},Ft={key:0,class:"detail-section"},Ut={class:"section-title"},Wt={class:"remark-content"},zt=["innerHTML"],It={key:1,class:"detail-section compact-section"},Kt={class:"section-title small"},Pt={class:"audit-timeline compact"},Qt={class:"audit-header"},Rt={class:"audit-meta"},$t={key:0,class:"audit-comment"},jt={class:"dialog-footer"},Gt=Q({__name:"OrderDetailDialog",props:{visible:{type:Boolean},order:{},showActionButtons:{type:Boolean}},emits:["update:visible","update-status","set-todo"],setup(o,{emit:C}){const h=o,y=C,k=R({get:()=>h.visible,set:r=>y("update:visible",r)}),p=r=>r.toLocaleString(),B=r=>({urgent:"danger",normal:"success",cod:"warning"})[r]||"info",A=r=>({urgent:"紧急",normal:"正常",cod:"代收款"})[r]||"未知",M=r=>{const s=["紧急","加急","重要","特殊","注意"];let n=r;return s.forEach(g=>{const m=new RegExp(g,"gi");n=n.replace(m,`<span class="highlight-keyword">${g}</span>`)}),n},x=()=>{k.value=!1},T=()=>{K.success("打印功能开发中...")},V=()=>{y("update-status",h.order)},N=()=>{y("set-todo",h.order)};return(r,s)=>{const n=_("el-icon"),g=_("el-tag"),m=_("el-table-column"),S=_("el-table"),b=_("el-button"),D=_("el-dialog");return c(),w(D,{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=i=>k.value=i),title:"订单详情",width:"70%","before-close":x,class:"order-detail-dialog",top:"5vh"},{footer:l(()=>[t("div",jt,[e(b,{onClick:x},{default:l(()=>[...s[21]||(s[21]=[d("关闭",-1)])]),_:1}),o.showActionButtons?(c(),w(b,{key:0,type:"warning",onClick:N},{default:l(()=>[e(n,null,{default:l(()=>[e(u(W))]),_:1}),s[22]||(s[22]=d(" 设置待办 ",-1))]),_:1})):v("",!0),o.showActionButtons?(c(),w(b,{key:1,type:"success",onClick:V},{default:l(()=>[e(n,null,{default:l(()=>[e(u(z))]),_:1}),s[23]||(s[23]=d(" 更新状态 ",-1))]),_:1})):v("",!0),e(b,{type:"primary",onClick:T},{default:l(()=>[e(n,null,{default:l(()=>[e(u(I))]),_:1}),s[24]||(s[24]=d(" 打印订单 ",-1))]),_:1})])]),default:l(()=>[o.order?(c(),f("div",J,[t("div",X,[t("h3",Y,[e(n,null,{default:l(()=>[e(u(E))]),_:1}),s[1]||(s[1]=d(" 订单基本信息 ",-1))]),t("div",Z,[t("div",tt,[s[2]||(s[2]=t("label",null,"订单号：",-1)),t("span",st,a(o.order.orderNo),1)]),t("div",et,[s[3]||(s[3]=t("label",null,"订单状态：",-1)),e(g,{type:B(o.order.status),size:"small"},{default:l(()=>[d(a(A(o.order.status)),1)]),_:1},8,["type"])]),t("div",ot,[s[4]||(s[4]=t("label",null,"客户姓名：",-1)),t("span",lt,a(o.order.customerName),1)]),t("div",at,[s[5]||(s[5]=t("label",null,"联系电话：",-1)),t("span",nt,a(u(P)(o.order.phone)),1)]),t("div",it,[s[6]||(s[6]=t("label",null,"下单时间：",-1)),t("span",dt,a(o.order.createTime||"2024-01-15 10:30:00"),1)]),t("div",rt,[s[7]||(s[7]=t("label",null,"客服微信：",-1)),t("span",ut,a(o.order.serviceWechat),1)]),t("div",ct,[s[8]||(s[8]=t("label",null,"收货地址：",-1)),t("span",mt,a(o.order.address),1)])])]),t("div",_t,[t("h3",ft,[e(n,null,{default:l(()=>[e(u(O))]),_:1}),s[9]||(s[9]=d(" 客户详情 ",-1))]),t("div",vt,[t("div",pt,[s[10]||(s[10]=t("label",null,"年龄：",-1)),t("span",gt,a(o.order.customerAge)+"岁",1)]),t("div",bt,[s[11]||(s[11]=t("label",null,"身高：",-1)),t("span",ht,a(o.order.customerHeight)+"cm",1)]),t("div",yt,[s[12]||(s[12]=t("label",null,"体重：",-1)),t("span",kt,a(o.order.customerWeight)+"kg",1)]),t("div",wt,[s[13]||(s[13]=t("label",null,"疾病史：",-1)),t("span",xt,a(o.order.medicalHistory||"无"),1)])])]),t("div",Ct,[t("h3",Bt,[e(n,null,{default:l(()=>[e(u(q))]),_:1}),s[14]||(s[14]=d(" 商品信息 ",-1))]),e(S,{data:Array.isArray(o.order.products)?o.order.products:[],border:"",class:"product-table"},{default:l(()=>[e(m,{type:"index",label:"序号",width:"60",align:"center"}),e(m,{prop:"name",label:"商品名称"}),e(m,{prop:"specification",label:"规格",width:"120"}),e(m,{prop:"quantity",label:"数量",width:"80",align:"center"}),e(m,{prop:"price",label:"单价",width:"100",align:"center"},{default:l(({row:i})=>[t("span",At,"¥"+a(p(i.price||0)),1)]),_:1}),e(m,{prop:"subtotal",label:"小计",width:"120",align:"center"},{default:l(({row:i})=>[t("span",Mt,"¥"+a(p((i.price||0)*i.quantity)),1)]),_:1})]),_:1},8,["data"])]),t("div",Tt,[t("h3",Vt,[e(n,null,{default:l(()=>[e(u(L))]),_:1}),s[15]||(s[15]=d(" 金额信息 ",-1))]),t("div",Nt,[t("div",St,[t("div",Dt,[s[16]||(s[16]=t("label",null,"订单总额：",-1)),t("span",Ht,"¥"+a(p(o.order.totalAmount)),1)]),t("div",Et,[s[17]||(s[17]=t("label",null,"已付定金：",-1)),t("span",Ot,"¥"+a(p(o.order.deposit)),1)]),t("div",qt,[s[18]||(s[18]=t("label",null,"代收款：",-1)),t("span",Lt,"¥"+a(p(o.order.codAmount)),1)])])])]),o.order.remark?(c(),f("div",Ft,[t("h3",Ut,[e(n,null,{default:l(()=>[e(u(F))]),_:1}),s[19]||(s[19]=d(" 订单备注 ",-1))]),t("div",Wt,[t("p",{innerHTML:M(o.order.remark)},null,8,zt)])])):v("",!0),o.order.auditHistory?(c(),f("div",It,[t("h3",Kt,[e(n,null,{default:l(()=>[e(u(U))]),_:1}),s[20]||(s[20]=d(" 审核历史 ",-1))]),t("div",Pt,[(c(!0),f($,null,j(o.order.auditHistory,(i,H)=>(c(),f("div",{key:H,class:"audit-item compact"},[t("div",Qt,[e(g,{size:"small",type:i.result==="approved"?"success":"danger"},{default:l(()=>[d(a(i.result==="approved"?"已通过":"已拒绝"),1)]),_:2},1032,["type"]),t("span",Rt,a(i.auditor)+" · "+a(i.time),1)]),i.remark?(c(),f("div",$t,a(i.remark),1)):v("",!0)]))),128))])])):v("",!0)])):v("",!0)]),_:1},8,["modelValue"])}}}),ts=G(Gt,[["__scopeId","data-v-8bd3a00b"]]);export{ts as O};
