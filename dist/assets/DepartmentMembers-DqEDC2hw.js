var ke=Object.defineProperty,Ne=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var ge=(v,f,r)=>f in v?ke(v,f,{enumerable:!0,configurable:!0,writable:!0,value:r}):v[f]=r,he=(v,f)=>{for(var r in f||(f={}))Me.call(f,r)&&ge(v,r,f[r]);if(be)for(var r of be(f))Se.call(f,r)&&ge(v,r,f[r]);return v},De=(v,f)=>Ne(v,xe(f));var oe=(v,f,r)=>new Promise((F,k)=>{var j=w=>{try{l(r.next(w))}catch(g){k(g)}},N=w=>{try{l(r.throw(w))}catch(g){k(g)}},l=w=>w.done?F(w.value):Promise.resolve(w.value).then(j,N);l((r=r.apply(v,f)).next())});import{l as de,r as I,Z as je,e as Y,w as ie,ag as d,M as z,p as D,O as t,U as e,Q as A,m as W,F as re,a9 as ue,q as a,S as p,T as _,n as Ce,u as E,aC as $e,az as Ee,c as Ue,aq as ze,P as Be}from"./vendor-D8Vxqhr-.js";import{_ as ce,c as Ye}from"./settings-CuxbDWOu.js";import{E as V,n as we,L as Fe,a3 as Te,p as Re,u as qe,F as Ae,e as Le,aS as Oe,c as Pe,s as Je,r as Ke}from"./elementPlus-Bmwh7Rh8.js";import{useDepartmentStore as me}from"./department-CTOju6hT.js";import{k as ne,w as Qe,r as We}from"./utils-ywHRn0uI.js";const Ze={class:"user-option"},Ge={class:"user-name"},He={class:"user-id"},Xe={class:"dialog-footer"},et=de({__name:"MemberDialog",props:{modelValue:{type:Boolean},member:{default:null},departmentId:{},isEdit:{type:Boolean,default:!1}},emits:["update:modelValue","success"],setup(v,{emit:f}){const r=v,F=f,k=me(),j=I(),N=I(!1),l=je({userId:"",userIds:[],userName:"",position:"",joinDate:"",status:"active"}),w={userId:[{required:!0,message:"请选择用户",trigger:"change"}],userIds:[{required:!0,message:"请至少选择一个用户",trigger:"change",validator:(b,c,h)=>{!c||c.length===0?h(new Error("请至少选择一个用户")):h()}}],position:[{required:!0,message:"请输入职位",trigger:"blur"},{min:2,max:50,message:"职位长度在 2 到 50 个字符",trigger:"blur"}],joinDate:[{required:!0,message:"请选择加入时间",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},g=Y(()=>{const b=[{id:"user1",name:"张总"},{id:"user2",name:"李经理"},{id:"user3",name:"王主管"},{id:"user4",name:"赵会计"},{id:"user5",name:"刘主管"},{id:"user6",name:"陈主管"},{id:"user7",name:"孙组长"},{id:"user8",name:"周组长"},{id:"user9",name:"吴专员"},{id:"user10",name:"郑助理"},{id:"user11",name:"钱秘书"},{id:"user12",name:"孙销售"},{id:"user13",name:"李客服"},{id:"user14",name:"王物流"},{id:"user15",name:"赵财务"}];if(r.isEdit)return b;const c=k.getDepartmentMembers(r.departmentId).map(h=>h.userId);return b.filter(h=>!c.includes(h.id))}),L=I(["总经理","副总经理","部门经理","主管","组长","专员","助理","秘书","销售经理","销售专员","客服主管","客服专员","财务经理","会计","出纳","物流主管","物流专员","审核员","质检员"]),U=()=>{Object.assign(l,{userId:"",userIds:[],userName:"",position:"",joinDate:new Date().toISOString().split("T")[0],status:"active"}),Ce(()=>{var b;(b=j.value)==null||b.clearValidate()})},O=()=>{r.isEdit&&r.member?Object.assign(l,{userId:r.member.userId,userName:r.member.userName,position:r.member.position,joinDate:r.member.joinDate,status:r.member.status}):U()},x=b=>{if(r.isEdit){const c=b,h=g.value.find(T=>T.id===c);h&&(l.userName=h.name)}};ie(()=>r.modelValue,b=>{b&&O()}),ie(()=>r.member,()=>{r.modelValue&&O()});const C=()=>{F("update:modelValue",!1),U()},ae=()=>oe(this,null,function*(){if(j.value)try{if(!(yield j.value.validate()))return;if(N.value=!0,r.isEdit&&r.member){const c=k.members.findIndex(h=>h.id===r.member.id);c!==-1&&(k.members[c]=De(he({},k.members[c]),{position:l.position,joinDate:l.joinDate,status:l.status}))}else if(l.userIds&&l.userIds.length>0)for(const c of l.userIds){const h=g.value.find(T=>T.id===c);h&&(yield k.addDepartmentMember({userId:c,userName:h.name,departmentId:r.departmentId,position:l.position,joinDate:l.joinDate,status:l.status}))}else yield k.addDepartmentMember({userId:l.userId,userName:l.userName,departmentId:r.departmentId,position:l.position,joinDate:l.joinDate,status:l.status});F("success")}catch(b){V.error(b instanceof Error?b.message:"操作失败")}finally{N.value=!1}});return(b,c)=>{const h=d("el-avatar"),T=d("el-option"),G=d("el-select"),P=d("el-form-item"),se=d("el-input"),H=d("el-date-picker"),X=d("el-radio"),le=d("el-radio-group"),i=d("el-form"),n=d("el-button"),M=d("el-dialog");return D(),z(M,{"model-value":v.modelValue,title:v.isEdit?"编辑成员":"添加成员",width:"500px","before-close":C,class:"member-dialog"},{footer:t(()=>[a("div",Xe,[e(n,{onClick:C,class:"cancel-btn"},{default:t(()=>[...c[7]||(c[7]=[p("取消",-1)])]),_:1}),e(n,{type:"primary",onClick:ae,loading:N.value,class:"submit-btn"},{default:t(()=>[p(_(v.isEdit?"更新":"添加"),1)]),_:1},8,["loading"])])]),default:t(()=>[e(i,{ref_key:"formRef",ref:j,model:l,rules:w,"label-width":"80px",class:"member-form"},{default:t(()=>[v.isEdit?A("",!0):(D(),z(P,{key:0,label:"选择用户",prop:"userIds"},{default:t(()=>[e(G,{modelValue:l.userIds,"onUpdate:modelValue":c[0]||(c[0]=m=>l.userIds=m),placeholder:"请选择要添加的用户（支持多选）",filterable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",style:{width:"100%"},onChange:x},{default:t(()=>[(D(!0),W(re,null,ue(g.value,m=>(D(),z(T,{key:m.id,label:m.name,value:m.id},{default:t(()=>[a("div",Ze,[e(h,{size:24,class:"user-avatar"},{default:t(()=>[p(_(m.name.charAt(0)),1)]),_:2},1024),a("span",Ge,_(m.name),1),a("span",He,"ID: "+_(m.id),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),v.isEdit?(D(),z(P,{key:1,label:"用户姓名"},{default:t(()=>[e(se,{modelValue:l.userName,"onUpdate:modelValue":c[1]||(c[1]=m=>l.userName=m),disabled:""},null,8,["modelValue"])]),_:1})):A("",!0),e(P,{label:"职位",prop:"position"},{default:t(()=>[e(G,{modelValue:l.position,"onUpdate:modelValue":c[2]||(c[2]=m=>l.position=m),placeholder:"请选择或输入职位",filterable:"","allow-create":"",style:{width:"100%"}},{default:t(()=>[(D(!0),W(re,null,ue(L.value,m=>(D(),z(T,{key:m,label:m,value:m},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(P,{label:"加入时间",prop:"joinDate"},{default:t(()=>[e(H,{modelValue:l.joinDate,"onUpdate:modelValue":c[3]||(c[3]=m=>l.joinDate=m),type:"date",placeholder:"选择加入时间",style:{width:"100%"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(P,{label:"状态",prop:"status"},{default:t(()=>[e(le,{modelValue:l.status,"onUpdate:modelValue":c[4]||(c[4]=m=>l.status=m)},{default:t(()=>[e(X,{value:"active"},{default:t(()=>[...c[5]||(c[5]=[p("活跃",-1)])]),_:1}),e(X,{value:"inactive"},{default:t(()=>[...c[6]||(c[6]=[p("停用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","title"])}}}),tt=ce(et,[["__scopeId","data-v-3d8dc864"]]),at={class:"import-container"},st={class:"step-content"},lt={key:0,class:"step-panel"},ot={class:"template-info"},nt={class:"template-preview"},it={key:1,class:"step-panel"},rt={class:"upload-area"},ut={key:2,class:"step-panel"},dt={class:"preview-info"},ct={class:"dialog-footer"},mt=de({__name:"BatchImportDialog",props:{modelValue:{type:Boolean},departmentId:{}},emits:["update:modelValue","success"],setup(v,{emit:f}){const r=v,F=f,k=me(),j=()=>{const i=localStorage.getItem("userDatabase");return i?JSON.parse(i):[{id:"1",username:"admin",realName:"超级管理员"},{id:"2",username:"manager",realName:"张经理"},{id:"3",username:"sales001",realName:"李销售"},{id:"4",username:"service001",realName:"王客服"},{id:"5",username:"finance001",realName:"赵会计"},{id:"6",username:"logistics001",realName:"刘主管"},{id:"7",username:"service002",realName:"陈主管"},{id:"8",username:"sales002",realName:"孙组长"}]},N=Y({get:()=>r.modelValue,set:i=>F("update:modelValue",i)}),l=I(0),w=I(),g=I([]),L=I("valid"),U=I(!1),O=I([{userName:"张三",userId:"1",position:"销售专员",joinDate:"2024-01-15",status:"active"},{userName:"李四",userId:"2",position:"客服专员",joinDate:"2024-01-16",status:"active"}]),x=Y(()=>g.value.filter(i=>!i.error)),C=Y(()=>g.value.filter(i=>i.error)),ae=Y(()=>l.value===0?!0:l.value===1?g.value.length>0:!1),b=()=>{N.value=!1,c()},c=()=>{l.value=0,g.value=[],L.value="valid",U.value=!1,w.value&&w.value.clearFiles()},h=()=>{const i=ne.book_new(),n=[["姓名","用户ID","职位","加入日期","状态"],["张三","1","销售专员","2024-01-15","active"],["李四","2","客服专员","2024-01-16","active"]],M=ne.aoa_to_sheet(n);M["!cols"]=[{wch:10},{wch:10},{wch:15},{wch:12},{wch:10}],ne.book_append_sheet(i,M,"成员导入模板"),Qe(i,"部门成员导入模板.xlsx"),V.success("模板下载成功")},T=i=>{const n=i.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||i.type==="application/vnd.ms-excel",M=i.size/1024/1024<10;return n?(M||V.error("文件大小不能超过10MB!"),!1):(V.error("只能上传Excel文件!"),!1)},G=i=>{i.raw&&P(i.raw)},P=i=>{const n=new FileReader;n.onload=M=>{var m,Z,R,o,s,y;try{const q=new Uint8Array((m=M.target)==null?void 0:m.result),J=We(q,{type:"array"}),$=J.SheetNames[0],ee=J.Sheets[$],te=ne.sheet_to_json(ee,{header:1}),B=[];for(let S=1;S<te.length;S++){const K=te[S];if(K.length===0||!K[0])continue;const Q={userName:((Z=K[0])==null?void 0:Z.toString().trim())||"",userId:((R=K[1])==null?void 0:R.toString().trim())||"",position:((o=K[2])==null?void 0:o.toString().trim())||"",joinDate:((s=K[3])==null?void 0:s.toString().trim())||"",status:((y=K[4])==null?void 0:y.toString().trim())||"active"};se(Q),B.push(Q)}g.value=B,V.success(`成功解析 ${B.length} 条数据`)}catch(q){V.error("文件解析失败，请检查文件格式")}},n.readAsArrayBuffer(i)},se=i=>{const n=[];i.userName||n.push("姓名不能为空"),i.userId||n.push("用户ID不能为空"),i.position||n.push("职位不能为空"),i.userId&&(j().find(m=>m.id===i.userId)||n.push("用户ID不存在")),i.status&&!["active","inactive"].includes(i.status)&&n.push("状态只能是active或inactive"),i.joinDate&&!/^\d{4}-\d{2}-\d{2}$/.test(i.joinDate)&&n.push("日期格式错误，应为YYYY-MM-DD"),n.length>0&&(i.error=n.join("; "))},H=()=>{l.value<2&&l.value++},X=()=>{l.value>0&&l.value--},le=()=>oe(this,null,function*(){if(x.value.length===0){V.warning("没有有效数据可导入");return}U.value=!0;try{for(const i of x.value)yield k.addDepartmentMember({userId:i.userId,userName:i.userName,departmentId:r.departmentId,position:i.position,joinDate:i.joinDate||new Date().toISOString().split("T")[0],status:i.status});V.success(`成功导入 ${x.value.length} 个成员`),F("success")}catch(i){V.error("导入失败，请重试")}finally{U.value=!1}});return ie(N,i=>{i||c()}),(i,n)=>{const M=d("el-step"),m=d("el-steps"),Z=d("el-icon"),R=d("el-button"),o=d("el-table-column"),s=d("el-table"),y=d("el-upload"),q=d("el-alert"),J=d("el-tag"),$=d("el-tab-pane"),ee=d("el-text"),te=d("el-tabs"),B=d("el-dialog");return D(),z(B,{modelValue:N.value,"onUpdate:modelValue":n[1]||(n[1]=S=>N.value=S),title:"批量导入成员",width:"600px","close-on-click-modal":!1,onClose:b},{footer:t(()=>[a("div",ct,[e(R,{onClick:b},{default:t(()=>[...n[9]||(n[9]=[p("取消",-1)])]),_:1}),l.value>0?(D(),z(R,{key:0,onClick:X},{default:t(()=>[...n[10]||(n[10]=[p("上一步",-1)])]),_:1})):A("",!0),l.value<2?(D(),z(R,{key:1,type:"primary",onClick:H,disabled:!ae.value},{default:t(()=>[...n[11]||(n[11]=[p(" 下一步 ",-1)])]),_:1},8,["disabled"])):A("",!0),l.value===2?(D(),z(R,{key:2,type:"primary",onClick:le,disabled:x.value.length===0,loading:U.value},{default:t(()=>[...n[12]||(n[12]=[p(" 确认导入 ",-1)])]),_:1},8,["disabled","loading"])):A("",!0)])]),default:t(()=>[a("div",at,[e(m,{active:l.value,"finish-status":"success",class:"import-steps"},{default:t(()=>[e(M,{title:"下载模板",description:"下载Excel模板文件"}),e(M,{title:"填写数据",description:"按模板格式填写成员信息"}),e(M,{title:"上传文件",description:"上传填写好的Excel文件"}),e(M,{title:"确认导入",description:"预览并确认导入数据"})]),_:1},8,["active"]),a("div",st,[l.value===0?(D(),W("div",lt,[a("div",ot,[e(Z,{class:"info-icon"},{default:t(()=>[e(E(we))]),_:1}),n[3]||(n[3]=a("h3",null,"下载导入模板",-1)),n[4]||(n[4]=a("p",null,"请先下载Excel模板文件，按照模板格式填写成员信息",-1)),e(R,{type:"primary",icon:E(we),onClick:h},{default:t(()=>[...n[2]||(n[2]=[p(" 下载模板文件 ",-1)])]),_:1},8,["icon"])]),a("div",nt,[n[5]||(n[5]=a("h4",null,"模板格式说明：",-1)),e(s,{data:O.value,size:"small",border:""},{default:t(()=>[e(o,{prop:"userName",label:"姓名*",width:"100"}),e(o,{prop:"userId",label:"用户ID*",width:"100"}),e(o,{prop:"position",label:"职位*",width:"120"}),e(o,{prop:"joinDate",label:"加入日期",width:"120"}),e(o,{prop:"status",label:"状态",width:"80"})]),_:1},8,["data"]),n[6]||(n[6]=a("div",{class:"template-notes"},[a("p",null,[a("strong",null,"注意事项：")]),a("ul",null,[a("li",null,"带*号的字段为必填项"),a("li",null,"用户ID必须是系统中已存在的用户"),a("li",null,"加入日期格式：YYYY-MM-DD"),a("li",null,"状态只能填写：active（活跃）或 inactive（停用）")])],-1))])])):A("",!0),l.value===1?(D(),W("div",it,[a("div",rt,[e(y,{ref_key:"uploadRef",ref:w,class:"upload-demo",drag:"","auto-upload":!1,"on-change":G,"before-upload":T,accept:".xlsx,.xls",limit:1},{tip:t(()=>[...n[7]||(n[7]=[a("div",{class:"el-upload__tip"}," 只能上传xlsx/xls文件，且不超过10MB ",-1)])]),default:t(()=>[e(Z,{class:"el-icon--upload"},{default:t(()=>[e(E(Fe))]),_:1}),n[8]||(n[8]=a("div",{class:"el-upload__text"},[p(" 将Excel文件拖拽到此处，或"),a("em",null,"点击上传")],-1))]),_:1},512)])])):A("",!0),l.value===2?(D(),W("div",ut,[a("div",dt,[e(q,{title:`共解析到 ${g.value.length} 条数据，其中 ${x.value.length} 条有效，${C.value.length} 条有误`,type:C.value.length>0?"warning":"success","show-icon":"",closable:!1},null,8,["title","type"])]),e(te,{modelValue:L.value,"onUpdate:modelValue":n[0]||(n[0]=S=>L.value=S),class:"preview-tabs"},{default:t(()=>[e($,{label:"有效数据",name:"valid",badge:x.value.length},{default:t(()=>[e(s,{data:x.value,size:"small","max-height":"300"},{default:t(()=>[e(o,{prop:"userName",label:"姓名",width:"100"}),e(o,{prop:"userId",label:"用户ID",width:"100"}),e(o,{prop:"position",label:"职位",width:"120"}),e(o,{prop:"joinDate",label:"加入日期",width:"120"}),e(o,{prop:"status",label:"状态",width:"80"},{default:t(({row:S})=>[e(J,{type:S.status==="active"?"success":"danger",size:"small"},{default:t(()=>[p(_(S.status==="active"?"活跃":"停用"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1},8,["badge"]),C.value.length>0?(D(),z($,{key:0,label:"错误数据",name:"error",badge:C.value.length},{default:t(()=>[e(s,{data:C.value,size:"small","max-height":"300"},{default:t(()=>[e(o,{prop:"userName",label:"姓名",width:"100"}),e(o,{prop:"userId",label:"用户ID",width:"100"}),e(o,{prop:"position",label:"职位",width:"120"}),e(o,{prop:"joinDate",label:"加入日期",width:"120"}),e(o,{prop:"status",label:"状态",width:"80"}),e(o,{prop:"error",label:"错误信息","min-width":"200"},{default:t(({row:S})=>[e(ee,{type:"danger",size:"small"},{default:t(()=>[p(_(S.error),1)]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1},8,["badge"])):A("",!0)]),_:1},8,["modelValue"])])):A("",!0)])])]),_:1},8,["modelValue"])}}}),pt=ce(mt,[["__scopeId","data-v-35677cb0"]]),_t={class:"department-members-container"},vt={class:"page-header"},ft={class:"header-left"},bt={class:"title-section"},gt={class:"page-title"},ht={class:"department-info"},Dt={class:"level-info"},wt={key:0,class:"manager-info"},yt={class:"action-buttons"},It={class:"stats-section"},Vt={class:"stat-card"},kt={class:"stat-icon total"},Nt={class:"stat-content"},xt={class:"stat-number"},Mt={class:"stat-card"},St={class:"stat-icon active"},jt={class:"stat-content"},Ct={class:"stat-number"},$t={class:"stat-card"},Et={class:"stat-icon positions"},Ut={class:"stat-content"},zt={class:"stat-number"},Bt={class:"stat-card"},Yt={class:"stat-icon recent"},Ft={class:"stat-content"},Tt={class:"stat-number"},Rt={class:"search-section"},qt={class:"table-section"},At={class:"member-info"},Lt={class:"member-details"},Ot={class:"member-name"},Pt={class:"member-id"},Jt={class:"action-buttons"},Kt=de({__name:"DepartmentMembers",setup(v){const f=$e(),r=Ee(),F=Ye(r),k=me(),j=I(f.params.id),N=I(""),l=I(""),w=I(""),g=I(!1),L=I(null),U=I(!1),O=I(!1),x=Y(()=>k.getDepartmentById(j.value)),C=Y(()=>k.getDepartmentMembers(j.value)),ae=Y(()=>C.value.filter(o=>o.status==="active")),b=Y(()=>{const o=C.value.map(s=>s.position);return[...new Set(o)]}),c=Y(()=>{const o=new Date;return o.setMonth(o.getMonth()-1),C.value.filter(s=>new Date(s.joinDate)>=o).length}),h=Y(()=>{let o=C.value;if(N.value){const s=N.value.toLowerCase();o=o.filter(y=>y.userName.toLowerCase().includes(s)||y.userId.toLowerCase().includes(s))}return l.value&&(o=o.filter(s=>s.status===l.value)),w.value&&(o=o.filter(s=>s.position===w.value)),o}),T=()=>{F.push("/system/departments")},G=o=>new Date(o).toLocaleDateString("zh-CN"),P=o=>{const s=new Date(o),q=Math.abs(new Date().getTime()-s.getTime());return Math.ceil(q/(1e3*60*60*24))},se=()=>{},H=()=>{},X=()=>{N.value="",l.value="",w.value="",V.success("数据已刷新")},le=()=>{L.value=null,U.value=!1,g.value=!0},i=o=>{L.value=o,U.value=!0,g.value=!0},n=o=>oe(this,null,function*(){try{const s=o.status==="active"?"inactive":"active";o.status=s,V.success(`成员已${s==="active"?"启用":"停用"}`)}catch(s){V.error("操作失败")}}),M=o=>oe(this,null,function*(){try{yield k.removeDepartmentMember(o.id),V.success("成员已移除")}catch(s){V.error("移除失败")}}),m=()=>{O.value=!0},Z=()=>{g.value=!1,V.success(U.value?"成员信息已更新":"成员已添加")},R=()=>{O.value=!1,V.success("批量导入成功")};return ie(()=>f.params.id,o=>{o&&(j.value=o)},{immediate:!0}),Ue(()=>{x.value||(V.error("部门不存在"),F.push("/system/departments"))}),(o,s)=>{var pe,_e,ve;const y=d("el-button"),q=d("el-tag"),J=d("el-icon"),$=d("el-col"),ee=d("el-row"),te=d("el-input"),B=d("el-option"),S=d("el-select"),K=d("el-avatar"),Q=d("el-table-column"),ye=d("el-popconfirm"),Ie=d("el-table"),Ve=ze("loading");return D(),W("div",_t,[a("div",vt,[a("div",ft,[e(y,{icon:E(Te),onClick:T,class:"back-btn"},{default:t(()=>[...s[5]||(s[5]=[p("返回",-1)])]),_:1},8,["icon"]),a("div",bt,[a("h2",gt,_((pe=x.value)==null?void 0:pe.name)+" - 成员配置",1),a("div",ht,[e(q,{type:"primary",size:"small"},{default:t(()=>{var u;return[p(_((u=x.value)==null?void 0:u.code),1)]}),_:1}),a("span",Dt,_((_e=x.value)==null?void 0:_e.level)+"级部门",1),(ve=x.value)!=null&&ve.managerName?(D(),W("span",wt," 负责人："+_(x.value.managerName),1)):A("",!0)])])]),a("div",yt,[e(y,{type:"primary",icon:E(Re),onClick:le,class:"add-btn"},{default:t(()=>[...s[6]||(s[6]=[p(" 添加成员 ",-1)])]),_:1},8,["icon"]),e(y,{type:"success",icon:E(qe),onClick:m,class:"import-btn"},{default:t(()=>[...s[7]||(s[7]=[p(" 批量导入 ",-1)])]),_:1},8,["icon"])])]),a("div",It,[e(ee,{gutter:20},{default:t(()=>[e($,{span:6},{default:t(()=>[a("div",Vt,[a("div",kt,[e(J,null,{default:t(()=>[e(E(Ae))]),_:1})]),a("div",Nt,[a("div",xt,_(C.value.length),1),s[8]||(s[8]=a("div",{class:"stat-label"},"总成员数",-1))])])]),_:1}),e($,{span:6},{default:t(()=>[a("div",Mt,[a("div",St,[e(J,null,{default:t(()=>[e(E(Le))]),_:1})]),a("div",jt,[a("div",Ct,_(ae.value.length),1),s[9]||(s[9]=a("div",{class:"stat-label"},"活跃成员",-1))])])]),_:1}),e($,{span:6},{default:t(()=>[a("div",$t,[a("div",Et,[e(J,null,{default:t(()=>[e(E(Oe))]),_:1})]),a("div",Ut,[a("div",zt,_(b.value.length),1),s[10]||(s[10]=a("div",{class:"stat-label"},"职位类型",-1))])])]),_:1}),e($,{span:6},{default:t(()=>[a("div",Bt,[a("div",Yt,[e(J,null,{default:t(()=>[e(E(Pe))]),_:1})]),a("div",Ft,[a("div",Tt,_(c.value),1),s[11]||(s[11]=a("div",{class:"stat-label"},"本月新增",-1))])])]),_:1})]),_:1})]),a("div",Rt,[e(ee,{gutter:20,align:"middle"},{default:t(()=>[e($,{span:8},{default:t(()=>[e(te,{modelValue:N.value,"onUpdate:modelValue":s[0]||(s[0]=u=>N.value=u),placeholder:"搜索成员姓名或用户ID","prefix-icon":E(Je),clearable:"",onInput:se},null,8,["modelValue","prefix-icon"])]),_:1}),e($,{span:6},{default:t(()=>[e(S,{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=u=>l.value=u),placeholder:"成员状态",clearable:"",onChange:H},{default:t(()=>[e(B,{label:"全部",value:""}),e(B,{label:"活跃",value:"active"}),e(B,{label:"停用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),e($,{span:6},{default:t(()=>[e(S,{modelValue:w.value,"onUpdate:modelValue":s[2]||(s[2]=u=>w.value=u),placeholder:"职位筛选",clearable:"",onChange:H},{default:t(()=>[e(B,{label:"全部",value:""}),(D(!0),W(re,null,ue(b.value,u=>(D(),z(B,{key:u,label:u,value:u},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e($,{span:4},{default:t(()=>[e(y,{icon:E(Ke),onClick:X,class:"refresh-btn"},{default:t(()=>[...s[12]||(s[12]=[p(" 刷新 ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1})]),a("div",qt,[Be((D(),z(Ie,{data:h.value,class:"members-table"},{default:t(()=>[e(Q,{prop:"userName",label:"成员姓名","min-width":"120"},{default:t(({row:u})=>[a("div",At,[e(K,{size:32,src:u.userAvatar,class:"member-avatar"},{default:t(()=>[p(_(u.userName.charAt(0)),1)]),_:2},1032,["src"]),a("div",Lt,[a("div",Ot,_(u.userName),1),a("div",Pt,"ID: "+_(u.userId),1)])])]),_:1}),e(Q,{prop:"position",label:"职位",width:"150"},{default:t(({row:u})=>[e(q,{type:"info",size:"small"},{default:t(()=>[p(_(u.position),1)]),_:2},1024)]),_:1}),e(Q,{prop:"joinDate",label:"加入时间",width:"120"},{default:t(({row:u})=>[p(_(G(u.joinDate)),1)]),_:1}),e(Q,{prop:"status",label:"状态",width:"100",align:"center"},{default:t(({row:u})=>[e(q,{type:u.status==="active"?"success":"danger",size:"small"},{default:t(()=>[p(_(u.status==="active"?"活跃":"停用"),1)]),_:2},1032,["type"])]),_:1}),e(Q,{label:"在职天数",width:"100",align:"center"},{default:t(({row:u})=>[p(_(P(u.joinDate))+"天 ",1)]),_:1}),e(Q,{label:"操作",width:"200",fixed:"right"},{default:t(({row:u})=>[a("div",Jt,[e(y,{size:"small",type:"primary",link:"",onClick:fe=>i(u)},{default:t(()=>[...s[13]||(s[13]=[p(" 编辑 ",-1)])]),_:1},8,["onClick"]),e(y,{size:"small",type:u.status==="active"?"warning":"success",link:"",onClick:fe=>n(u)},{default:t(()=>[p(_(u.status==="active"?"停用":"启用"),1)]),_:2},1032,["type","onClick"]),e(ye,{title:"确定要移除这个成员吗？",onConfirm:fe=>M(u)},{reference:t(()=>[e(y,{size:"small",type:"danger",link:""},{default:t(()=>[...s[14]||(s[14]=[p(" 移除 ",-1)])]),_:1})]),_:1},8,["onConfirm"])])]),_:1})]),_:1},8,["data"])),[[Ve,E(k).loading]])]),e(tt,{modelValue:g.value,"onUpdate:modelValue":s[3]||(s[3]=u=>g.value=u),member:L.value,"department-id":j.value,"is-edit":U.value,onSuccess:Z},null,8,["modelValue","member","department-id","is-edit"]),e(pt,{modelValue:O.value,"onUpdate:modelValue":s[4]||(s[4]=u=>O.value=u),"department-id":j.value,onSuccess:R},null,8,["modelValue","department-id"])])}}}),ea=ce(Kt,[["__scopeId","data-v-70a985c7"]]);export{ea as default};
