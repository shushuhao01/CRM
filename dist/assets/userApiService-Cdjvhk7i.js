import{D as t,g as s}from"./index-BGtT17ll.js";import"./vendor-BtukhyiH.js";import"./elementPlus-DxaqjplL.js";import"./utils-DfI7e5Rl.js";class e{static instance;api;constructor(){this.api=t}static getInstance(){return e.instance||(e.instance=new e),e.instance}async getUsers(t={}){try{const e=await s.get("/users",t);return console.log(`[UserAPI] 获取用户列表成功，共 ${e.data.total} 个用户`),{data:e.data.items||e.data||[],total:e.data.total||0,page:e.data.page||1,limit:e.data.limit||20,totalPages:e.data.totalPages||1}}catch(e){throw console.error("[UserAPI] 获取用户列表失败:",e),e}}async getUserList(t={}){try{const s=await this.getUsers(t);return{data:s.data,total:s.total}}catch(s){throw console.error("[UserAPI] 获取用户列表失败:",s),s}}async getUserById(t){try{const s=await this.api.get(`/users/${t}`);return console.log(`[UserAPI] 获取用户详情成功: ${s.username}`),s}catch(s){throw console.error(`[UserAPI] 获取用户详情失败 (ID: ${t}):`,s),s}}async createUser(t){try{const e=await s.post("/users",t);return console.log(`[UserAPI] 创建用户成功: ${e.username}`),e}catch(e){throw console.error("[UserAPI] 生产环境：API创建用户失败",e),e}}async updateUser(t,s){try{const e=String(t);console.log(`[UserAPI] 调用更新用户API，ID: ${e}`);const r=await this.api.put(`/users/${e}`,s);return console.log(`[UserAPI] 更新用户成功: ${r.username}`),r}catch(e){throw console.error(`[UserAPI] 生产环境：API更新用户失败 (ID: ${t})`,e),e}}async deleteUser(t){try{const s=String(t);await this.api.delete(`/users/${s}`),console.log(`[UserAPI] 删除用户成功 (ID: ${s})`)}catch(s){throw console.error(`[UserAPI] 生产环境：API删除用户失败 (ID: ${t})`,s),s}}async deleteUsers(t){try{await this.api.batch("/users/batch-delete",t.map(t=>({action:"delete",id:t}))),console.log(`[UserAPI] 批量删除用户成功，共 ${t.length} 个`)}catch(s){throw console.error("[UserAPI] 批量删除用户失败:",s),s}}async batchDeleteUsers(t){try{for(const s of t)await this.deleteUser(s);console.log(`[UserAPI] 批量删除用户成功，共 ${t.length} 个`)}catch(s){throw console.error("[UserAPI] 批量删除用户失败:",s),s}}async batchUpdateUserStatus(t,s){try{for(const e of t)await this.updateUserStatus(e,s);console.log(`[UserAPI] 批量更新用户状态成功，共 ${t.length} 个`)}catch(e){throw console.error("[UserAPI] 批量更新用户状态失败:",e),e}}async resetPassword(t){try{await this.api.post(`/users/${t.userId}/reset-password`,{newPassword:t.newPassword}),console.log(`[UserAPI] 重置密码成功 (ID: ${t.userId})`)}catch(s){throw console.error(`[UserAPI] 重置密码失败 (ID: ${t.userId}):`,s),s}}async toggleUserStatus(t,s){try{const e=await this.api.patch(`/users/${t}/status`,{status:s});return console.log(`[UserAPI] 用户状态更新成功 (ID: ${t}, Status: ${s})`),e}catch(e){throw console.error(`[UserAPI] 用户状态更新失败 (ID: ${t}):`,e),e}}async updateUserStatus(t,e){try{const r=String(t),a=await s.patch(`/users/${r}/status`,{status:e});return console.log(`[UserAPI] 用户状态更新成功 (ID: ${r}, Status: ${e})`),a}catch(r){throw console.error(`[UserAPI] 用户状态更新失败 (ID: ${t}):`,r),r}}async updateEmploymentStatus(t,e){try{const r=await s.patch(`/users/${t}/employment-status`,{employmentStatus:e});return console.log(`[UserAPI] 用户在职状态更新成功 (ID: ${t}, Status: ${e})`),r}catch(r){throw console.error(`[UserAPI] 用户在职状态更新失败 (ID: ${t}):`,r),r}}async getUserStatistics(){try{const t=await this.api.get("/users/statistics");return console.log("[UserAPI] 获取用户统计信息成功:",t),t}catch(t){throw console.error("[UserAPI] 获取用户统计信息失败:",t),t}}async searchUsers(t,s=10){try{const e=await this.api.get("/users/search",{q:t,limit:s});return console.log(`[UserAPI] 搜索用户成功，找到 ${e.length} 个结果`),e}catch(e){throw console.error("[UserAPI] 搜索用户失败:",e),e}}async checkUsernameAvailability(t){try{return(await this.api.get("/users/check-username",{username:t})).available}catch(s){throw console.error("[UserAPI] 检查用户名可用性失败:",s),s}}async checkEmailAvailability(t){try{return(await this.api.get("/users/check-email",{email:t})).available}catch(s){throw console.error("[UserAPI] 检查邮箱可用性失败:",s),s}}async uploadAvatar(t,s){try{const e=await this.api.upload(`/users/${t}/avatar`,s);return console.log(`[UserAPI] 头像上传成功 (ID: ${t})`),e.url}catch(e){throw console.error(`[UserAPI] 头像上传失败 (ID: ${t}):`,e),e}}async getUserOperationLogs(t,s={}){try{const e=await this.api.paginate(`/users/${t}/operation-logs`,s);return console.log(`[UserAPI] 获取用户操作日志成功 (ID: ${t})`),e}catch(e){throw console.error(`[UserAPI] 获取用户操作日志失败 (ID: ${t}):`,e),e}}async exportUsers(t={}){try{const s=await this.api.get("/users/export",t,{responseType:"blob"});return console.log("[UserAPI] 导出用户数据成功"),s}catch(s){throw console.error("[UserAPI] 导出用户数据失败:",s),s}}async importUsers(t){try{const s=await this.api.upload("/users/import",t);return console.log(`[UserAPI] 导入用户数据成功，成功: ${s.success}，失败: ${s.failed}`),s}catch(s){throw console.error("[UserAPI] 导入用户数据失败:",s),s}}}const r=e.getInstance();export{e as UserApiService,r as userApiService};
