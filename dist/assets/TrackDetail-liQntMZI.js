var S=(M,b,_)=>new Promise((h,m)=>{var v=p=>{try{f(_.next(p))}catch(y){m(y)}},t=p=>{try{f(_.throw(p))}catch(y){m(y)}},f=p=>p.done?h(p.value):Promise.resolve(p.value).then(v,t);f((_=_.apply(M,b)).next())});import{l as G,az as K,aC as W,r as C,Z as X,c as Y,z as ee,ag as d,aq as se,m as k,p as g,q as e,U as i,u as T,T as o,O as a,S as w,P as te,F as oe,a9 as ae,M as ne,Q as N,J as ie}from"./vendor-D8Vxqhr-.js";import{a3 as re,r as le,a9 as ce,as as de,ad as pe,E as x}from"./elementPlus-Bmwh7Rh8.js";import{_ as ue}from"./settings-CuxbDWOu.js";import"./utils-ywHRn0uI.js";const _e={class:"track-detail"},me={class:"page-header"},ve={class:"header-left"},fe={class:"header-info"},ge={class:"header-meta"},he={class:"tracking-no"},ye={class:"header-actions"},ke={class:"info-grid"},we={class:"info-item"},Te={class:"value"},be={class:"info-item"},Ce={class:"value"},Ne={class:"info-item"},xe={class:"value"},Me={class:"info-item"},Pe={class:"value"},De={class:"info-item"},Ae={class:"value"},Se={class:"info-item"},Ee={class:"value"},Fe={class:"info-item"},ze={class:"value"},Be={class:"info-item"},$e={class:"value"},qe={class:"card-header"},Ie={class:"track-count"},Re={class:"track-timeline"},Ue={class:"track-item"},Ve={class:"track-description"},Oe={key:0,class:"track-location"},je={key:1,class:"track-operator"},He={class:"progress-info"},Je={class:"progress-text"},Le={class:"time-info"},Qe={class:"time-item"},Ze={class:"value"},Ge={key:0,class:"time-item"},Ke={class:"value"},We={class:"time-item"},Xe={class:"value"},Ye={class:"contact-info"},es={class:"contact-item"},ss={class:"value"},ts={class:"contact-item"},os={class:"value"},as={class:"contact-item"},ns=G({__name:"TrackDetail",setup(M){const b=K(),_=W(),h=C(!1),m=new Set,v=C(!1),t=X({trackingNo:"",companyName:"",companyCode:"",senderName:"",senderAddress:"",receiverName:"",receiverAddress:"",shipTime:"",estimatedTime:"",status:"",serviceType:"",servicePhone:"",complaintPhone:"",website:""}),f=C([]),p=n=>({pending:"info",picked_up:"warning",in_transit:"primary",out_for_delivery:"warning",delivered:"success",exception:"danger",returned:"info"})[n]||"info",y=n=>({pending:"待发货",picked_up:"已揽收",in_transit:"运输中",out_for_delivery:"派送中",delivered:"已签收",exception:"异常",returned:"已退回"})[n]||"未知状态",E=n=>({success:"success",warning:"warning",danger:"danger",info:"primary"})[n]||"primary",F=()=>({pending:0,picked_up:20,in_transit:60,out_for_delivery:80,delivered:100,exception:50,returned:0})[t.status]||0,z=()=>({pending:"#909399",picked_up:"#E6A23C",in_transit:"#409EFF",out_for_delivery:"#E6A23C",delivered:"#67C23A",exception:"#F56C6C",returned:"#909399"})[t.status]||"#909399",B=()=>y(t.status),$=()=>{if(!t.shipTime)return"-";const n=new Date(t.shipTime),r=new Date().getTime()-n.getTime(),c=Math.floor(r/(1e3*60*60*24)),l=Math.floor(r%(1e3*60*60*24)/(1e3*60*60));return c>0?`${c}天${l}小时`:`${l}小时`},q=()=>{if(!t.estimatedTime)return"-";const n=new Date(t.estimatedTime),s=new Date,r=n.getTime()-s.getTime();if(r<=0)return"已超时";const c=Math.floor(r/(1e3*60*60*24)),l=Math.floor(r%(1e3*60*60*24)/(1e3*60*60));return c>0?`${c}天${l}小时`:`${l}小时`},I=()=>{b.back()},R=()=>{P()},U=()=>{const n=window.location.href;navigator.clipboard.writeText(n).then(()=>{x.success("链接已复制到剪贴板")}).catch(()=>{x.error("复制失败，请手动复制链接")})},V=()=>{window.print()},P=()=>S(this,null,function*(){if(!v.value){h.value=!0;try{const n=_.params.trackingNo||_.query.trackingNo,s=_.query.company;if(yield new Promise(r=>{const c=setTimeout(()=>{m.delete(c),r(void 0)},1e3);m.add(c)}),v.value)return;Object.assign(t,{trackingNo:n||"SF1234567890123",companyName:"顺丰速运",companyCode:s||"SF",senderName:"北京总仓",senderAddress:"北京市朝阳区建国路88号",receiverName:"张三",receiverAddress:"上海市浦东新区陆家嘴环路1000号",shipTime:"2024-01-10 09:30:00",estimatedTime:"2024-01-12 18:00:00",status:"delivered",serviceType:"顺丰特快",servicePhone:"95338",complaintPhone:"400-889-5338",website:"https://www.sf-express.com"}),f.value=[{time:"2024-01-12 14:30:00",status:"已签收",description:"您的快件已由本人签收，感谢使用顺丰速运",location:"上海市浦东新区",operator:"张配送员",type:"success"},{time:"2024-01-12 09:15:00",status:"派送中",description:"快件正在派送途中，配送员将尽快与您联系",location:"上海市浦东新区营业点",operator:"张配送员",type:"warning"},{time:"2024-01-12 06:20:00",status:"到达目的地",description:"快件已到达目的地分拣中心",location:"上海浦东分拣中心",type:"info"},{time:"2024-01-11 22:45:00",status:"运输中",description:"快件正在从北京运往上海",location:"北京分拣中心",type:"info"},{time:"2024-01-11 15:30:00",status:"已发出",description:"快件已从北京分拣中心发出",location:"北京分拣中心",type:"info"},{time:"2024-01-10 09:30:00",status:"已揽收",description:"顺丰速运已收取快件",location:"北京市朝阳区营业点",operator:"李收件员",type:"info"}]}catch(n){v.value||x.error("加载物流信息失败")}finally{v.value||(h.value=!1)}}});return Y(()=>{P()}),ee(()=>{v.value=!0,m.forEach(n=>clearTimeout(n)),m.clear()}),(n,s)=>{const r=d("el-button"),c=d("el-tag"),l=d("el-card"),O=d("el-icon"),j=d("el-timeline-item"),H=d("el-timeline"),D=d("el-col"),J=d("el-progress"),L=d("el-link"),Q=d("el-row"),Z=se("loading");return g(),k("div",_e,[e("div",me,[e("div",ve,[i(r,{onClick:I,icon:T(re),circle:""},null,8,["icon"]),e("div",fe,[s[0]||(s[0]=e("h2",null,"物流跟踪详情",-1)),e("div",ge,[e("span",he,o(t.trackingNo),1),i(c,{type:p(t.status),size:"large"},{default:a(()=>[w(o(y(t.status)),1)]),_:1},8,["type"])])])]),e("div",ye,[i(r,{onClick:R,icon:T(le),loading:h.value},{default:a(()=>[...s[1]||(s[1]=[w(" 刷新轨迹 ",-1)])]),_:1},8,["icon","loading"]),i(r,{onClick:U,icon:T(ce)},{default:a(()=>[...s[2]||(s[2]=[w(" 分享 ",-1)])]),_:1},8,["icon"]),i(r,{onClick:V,icon:T(de)},{default:a(()=>[...s[3]||(s[3]=[w(" 打印 ",-1)])]),_:1},8,["icon"])])]),i(Q,{gutter:20},{default:a(()=>[i(D,{span:16},{default:a(()=>[i(l,{class:"info-card"},{header:a(()=>[...s[4]||(s[4]=[e("div",{class:"card-header"},[e("span",null,"基本信息")],-1)])]),default:a(()=>[e("div",ke,[e("div",we,[s[5]||(s[5]=e("span",{class:"label"},"物流单号：",-1)),e("span",Te,o(t.trackingNo),1)]),e("div",be,[s[6]||(s[6]=e("span",{class:"label"},"物流公司：",-1)),e("span",Ce,o(t.companyName),1)]),e("div",Ne,[s[7]||(s[7]=e("span",{class:"label"},"发件人：",-1)),e("span",xe,o(t.senderName),1)]),e("div",Me,[s[8]||(s[8]=e("span",{class:"label"},"收件人：",-1)),e("span",Pe,o(t.receiverName),1)]),e("div",De,[s[9]||(s[9]=e("span",{class:"label"},"发件地址：",-1)),e("span",Ae,o(t.senderAddress),1)]),e("div",Se,[s[10]||(s[10]=e("span",{class:"label"},"收件地址：",-1)),e("span",Ee,o(t.receiverAddress),1)]),e("div",Fe,[s[11]||(s[11]=e("span",{class:"label"},"发货时间：",-1)),e("span",ze,o(t.shipTime),1)]),e("div",Be,[s[12]||(s[12]=e("span",{class:"label"},"预计送达：",-1)),e("span",$e,o(t.estimatedTime),1)])])]),_:1}),i(l,{class:"track-card"},{header:a(()=>[e("div",qe,[s[13]||(s[13]=e("span",null,"物流轨迹",-1)),e("span",Ie,"共 "+o(f.value.length)+" 条记录",1)])]),default:a(()=>[te((g(),k("div",Re,[i(H,null,{default:a(()=>[(g(!0),k(oe,null,ae(f.value,(u,A)=>(g(),ne(j,{key:A,timestamp:u.time,type:E(u.type),size:A===0?"large":"normal",placement:"top"},{default:a(()=>[e("div",Ue,[e("div",{class:ie(["track-status",u.type])},o(u.status),3),e("div",Ve,o(u.description),1),u.location?(g(),k("div",Oe,[i(O,null,{default:a(()=>[i(T(pe))]),_:1}),w(" "+o(u.location),1)])):N("",!0),u.operator?(g(),k("div",je," 操作员："+o(u.operator),1)):N("",!0)])]),_:2},1032,["timestamp","type","size"]))),128))]),_:1})])),[[Z,h.value]])]),_:1})]),_:1}),i(D,{span:8},{default:a(()=>[i(l,{class:"status-card"},{header:a(()=>[...s[14]||(s[14]=[e("div",{class:"card-header"},[e("span",null,"配送进度")],-1)])]),default:a(()=>[e("div",He,[i(J,{percentage:F(),color:z(),"stroke-width":8,"text-inside":""},null,8,["percentage","color"]),e("div",Je,o(B()),1)])]),_:1}),i(l,{class:"time-card"},{header:a(()=>[...s[15]||(s[15]=[e("div",{class:"card-header"},[e("span",null,"时效信息")],-1)])]),default:a(()=>[e("div",Le,[e("div",Qe,[s[16]||(s[16]=e("span",{class:"label"},"已用时长：",-1)),e("span",Ze,o($()),1)]),t.status!=="delivered"?(g(),k("div",Ge,[s[17]||(s[17]=e("span",{class:"label"},"预计剩余：",-1)),e("span",Ke,o(q()),1)])):N("",!0),e("div",We,[s[18]||(s[18]=e("span",{class:"label"},"服务标准：",-1)),e("span",Xe,o(t.serviceType||"标准快递"),1)])])]),_:1}),i(l,{class:"contact-card"},{header:a(()=>[...s[19]||(s[19]=[e("div",{class:"card-header"},[e("span",null,"联系信息")],-1)])]),default:a(()=>[e("div",Ye,[e("div",es,[s[20]||(s[20]=e("span",{class:"label"},"客服电话：",-1)),e("span",ss,o(t.servicePhone||"400-800-8888"),1)]),e("div",ts,[s[21]||(s[21]=e("span",{class:"label"},"投诉电话：",-1)),e("span",os,o(t.complaintPhone||"400-800-9999"),1)]),e("div",as,[s[22]||(s[22]=e("span",{class:"label"},"官方网站：",-1)),i(L,{href:t.website,target:"_blank",type:"primary"},{default:a(()=>[w(o(t.website||"www.express.com"),1)]),_:1},8,["href"])])])]),_:1})]),_:1})]),_:1})])}}}),ps=ue(ns,[["__scopeId","data-v-4f1491f1"]]);export{ps as default};
