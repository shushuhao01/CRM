var kt=Object.defineProperty,Ct=Object.defineProperties;var St=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var Vt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable;var Pe=(x,y,g)=>y in x?kt(x,y,{enumerable:!0,configurable:!0,writable:!0,value:g}):x[y]=g,Ae=(x,y)=>{for(var g in y||(y={}))Vt.call(y,g)&&Pe(x,g,y[g]);if(xe)for(var g of xe(y))xt.call(y,g)&&Pe(x,g,y[g]);return x},Te=(x,y)=>Ct(x,St(y));var C=(x,y,g)=>new Promise((Z,q)=>{var G=P=>{try{O(g.next(P))}catch(T){q(T)}},L=P=>{try{O(g.throw(P))}catch(T){q(T)}},O=P=>P.done?Z(P.value):Promise.resolve(P.value).then(G,L);O((g=g.apply(x,y)).next())});import{u as Pt,X as At,W as Re,_ as Tt}from"./settings-CuxbDWOu.js";import{r as j}from"./roleApiService-BtjPyNo7.js";import{a0 as Rt,F as Dt,l as Ut,p as De,i as $t,s as Bt,r as zt,T as Ft,K as Lt,e as Ot,f as Et,aN as It,aO as jt,E as u,b as Y}from"./elementPlus-Bmwh7Rh8.js";import{l as Kt,r as f,Z as de,e as K,c as Mt,ag as c,aq as qt,m as Nt,p as w,q as o,U as a,O as i,u as k,T as S,M as b,Q as V,S as d,P as Ht,R as Zt}from"./vendor-D8Vxqhr-.js";import"./utils-ywHRn0uI.js";const Gt={class:"role-management"},Qt={class:"page-header"},Wt={class:"header-left"},Xt={class:"stats-section"},Yt={class:"stat-content"},Jt={class:"stat-icon primary"},ea={class:"stat-info"},ta={class:"stat-number primary"},aa={class:"stat-content"},ia={class:"stat-icon success"},na={class:"stat-info"},sa={class:"stat-number success"},oa={class:"stat-content"},da={class:"stat-icon warning"},la={class:"stat-info"},ra={class:"stat-number warning"},ca={class:"header-actions"},ma={class:"table-header"},pa={class:"table-actions"},ua={class:"pagination-container"},ya={class:"dialog-footer"},va={class:"permission-setting"},fa={class:"role-info"},ga={class:"permission-tree"},ha={class:"tree-node"},_a={class:"dialog-footer"},wa={class:"permission-manage"},ba={class:"manage-header"},ka={class:"dialog-footer"},Ca=Kt({__name:"Role",setup(x){const y=Pt(),g=f(!1),Z=f(!1),q=f(!1),G=f(!1),L=f(!1),O=f(!1),P=f(!1),T=f(!1),M=f(!1),J=f(!1),R=f([]),N=f(null),Q=f([]),W=f({total:0,active:0,permissions:0}),E=de({name:"",status:"",createTimeRange:[]}),v=de({id:"",name:"",code:"",status:"active",description:""}),h=de({id:"",parentId:"",name:"",code:"",type:"menu",path:"",icon:"",sort:0,status:"active"}),fe=f([]),$=f([]),ee=f([]),le=f([]),B=de({page:1,size:20,total:0}),Ue={children:"children",label:"name"},$e={name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],code:[{required:!0,message:"请输入角色编码",trigger:"blur"},{pattern:/^[A-Z_]+$/,message:"角色编码只能包含大写字母和下划线",trigger:"blur"}]},Be={name:[{required:!0,message:"请输入权限名称",trigger:"blur"}],code:[{required:!0,message:"请输入权限编码",trigger:"blur"}],type:[{required:!0,message:"请选择权限类型",trigger:"change"}]},re=f(),ge=f(),I=f(),ze=K(()=>M.value?"编辑角色":"新增角色"),Fe=K(()=>J.value?"编辑权限":"新增权限"),Le=K(()=>y.isAdmin),te=K(()=>y.isAdmin),ce=K(()=>y.isAdmin),Oe=K(()=>y.isAdmin),Ee=K(()=>y.isAdmin),he=K(()=>y.isAdmin),Ie=t=>({menu:"primary",button:"success",api:"warning"})[t]||"",je=()=>{M.value=!1,be(),L.value=!0},Ke=t=>{M.value=!0,Object.assign(v,{id:t.id,name:t.name,code:t.code,status:t.status,description:t.description}),L.value=!0},Me=t=>{N.value=t,Q.value=t.permissions||[],O.value=!0},qe=()=>{ue(),P.value=!0},Ne=t=>{u.info(`查看角色"${t.name}"的用户列表功能开发中...`)},He=t=>{u.info(`查看角色"${t.name}"的权限列表功能开发中...`)},Ze=(t,e)=>{switch(t){case"copy":Ge(e);break;case"toggle":Qe(e);break;case"delete":We(e);break}},Ge=t=>{M.value=!1,Object.assign(v,{id:"",name:`${t.name}_副本`,code:`${t.code}_COPY`,status:t.status,description:t.description}),L.value=!0},Qe=t=>C(this,null,function*(){const e=t.status==="active"?"禁用":"启用";try{yield Y.confirm(`确定要${e}角色"${t.name}"吗？`,"确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const s=t.status==="active"?"inactive":"active";yield j.updateRole(t.id,Te(Ae({},t),{status:s})),t.status=s,u.success(`${e}成功`),yield H()}catch(s){s!=="cancel"&&(console.error("切换角色状态失败:",s),u.error(`${e}失败，请重试`))}}),We=t=>C(this,null,function*(){try{yield Y.confirm(`确定要删除角色"${t.name}"吗？删除后不可恢复！`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),yield j.deleteRole(t.id),u.success("删除成功"),z(),H()}catch(e){e.message&&e.message!=="cancel"&&(console.error("删除角色失败:",e),u.error("删除失败"))}}),Xe=()=>C(this,null,function*(){try{yield Y.confirm(`确定要删除选中的 ${R.value.length} 个角色吗？删除后不可恢复！`,"确认批量删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t=R.value.map(e=>e.id);yield j.batchDeleteRoles(t),u.success("批量删除成功"),R.value=[],z(),H()}catch(t){t.message&&t.message!=="cancel"&&(console.error("批量删除角色失败:",t),u.error("批量删除失败"))}}),_e=t=>C(this,null,function*(){const e=t==="active"?"启用":"禁用";try{yield Y.confirm(`确定要${e}选中的 ${R.value.length} 个角色吗？`,`确认批量${e}`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const s=R.value.map(r=>r.id);yield j.batchUpdateRoleStatus(s,t),u.success(`批量${e}成功`),R.value=[],z(),H()}catch(s){s!=="cancel"&&(console.error("批量更新角色状态失败:",s),u.error(`批量${e}失败，请重试`))}}),we=()=>{B.page=1,z()},Ye=()=>{Object.assign(E,{name:"",status:"",createTimeRange:[]}),we()},Je=t=>{R.value=t},et=t=>{B.size=t,z()},tt=t=>{B.page=t,z()},at=(t,e)=>{var l,m;const s=((l=I.value)==null?void 0:l.getCheckedKeys())||[],r=((m=I.value)==null?void 0:m.getHalfCheckedKeys())||[];e?ae(t.id,$.value).forEach(A=>{s.includes(A)||s.push(A)}):pt(t.id,$.value).some(F=>s.includes(F))||ae(t.id,$.value).forEach(ie=>{if(!ut(ie,$.value).some(D=>D!==t.id&&s.includes(D))){const D=s.indexOf(ie);D>-1&&s.splice(D,1)}}),Q.value=[...s,...r],console.log("权限选择变化:",{permission:t.name,checked:e,totalSelected:Q.value.length})},it=()=>{if(I.value){const t=[],e=s=>{s.forEach(r=>{t.push(r.id),r.children&&e(r.children)})};e($.value),I.value.setExpandedKeys(t),u.success("已展开所有权限节点")}},nt=()=>{I.value&&(I.value.setExpandedKeys([]),u.success("已收起所有权限节点"))},st=()=>{J.value=!1,ke(),T.value=!0},ot=t=>{J.value=!0,Object.assign(h,{id:t.id,parentId:t.parentId,name:t.name,code:t.code,type:t.type,path:t.path,icon:t.icon,sort:t.sort,status:t.status}),T.value=!0},dt=t=>C(this,null,function*(){try{yield Y.confirm(`确定要删除权限"${t.name}"吗？删除后不可恢复！`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),yield new Promise(e=>setTimeout(e,500)),u.success("删除成功"),ue()}catch(e){}}),lt=()=>C(this,null,function*(){var t;try{yield(t=re.value)==null?void 0:t.validate(),Z.value=!0,M.value?(yield j.updateRole(v.id,{name:v.name,code:v.code,description:v.description,status:v.status}),u.success("角色更新成功")):(yield j.createRole({name:v.name,code:v.code,description:v.description,status:v.status}),u.success("角色创建成功")),me(),z(),H()}catch(e){console.error("角色操作失败:",e),u.error(M.value?"角色更新失败":"角色创建失败")}finally{Z.value=!1}}),rt=()=>C(this,null,function*(){var t;try{q.value=!0;const e=(t=I.value)==null?void 0:t.getCheckedKeys();if(!N.value){u.error("未选择角色");return}yield At.saveRolePermissions(N.value.id,e||[]),u.success("权限设置成功"),pe(),z()}catch(e){console.error("权限设置失败:",e),u.error("权限设置失败")}finally{q.value=!1}}),ct=()=>C(this,null,function*(){var t;try{yield(t=ge.value)==null?void 0:t.validate(),G.value=!0,yield new Promise(e=>setTimeout(e,1e3)),u.success(J.value?"权限更新成功":"权限创建成功"),T.value=!1,ke(),ue()}catch(e){console.error("表单验证失败:",e)}finally{G.value=!1}}),me=()=>{var t;L.value=!1,(t=re.value)==null||t.clearValidate(),be()},pe=()=>{O.value=!1,N.value=null,Q.value=[]},be=()=>{Object.assign(v,{id:"",name:"",code:"",status:"active",description:""})},ke=()=>{Object.assign(h,{id:"",parentId:"",name:"",code:"",type:"menu",path:"",icon:"",sort:0,status:"active"})},H=()=>C(this,null,function*(){try{const t=yield j.getRoleStats();W.value={total:t.total||0,active:t.active||0,permissions:t.permissions||0}}catch(t){console.error("加载角色统计失败:",t),u.error("加载统计数据失败"),W.value={total:0,active:0,permissions:0}}}),z=()=>C(this,null,function*(){try{g.value=!0;const t=yield j.getRoles();fe.value=t.map(e=>({id:e.id,name:e.name,code:e.code,status:e.status,userCount:e.userCount||0,permissionCount:e.permissionCount||0,description:e.description||"",createTime:e.createdAt?new Date(e.createdAt).toLocaleString():"",permissions:e.permissions||[]})),B.total=t.length}catch(t){console.error("加载角色列表失败:",t),u.error("加载角色列表失败")}finally{g.value=!1}}),mt=()=>C(this,null,function*(){try{const t=Re.getAllPermissions();$.value=t,console.log("权限树加载成功")}catch(t){console.error("加载权限树失败:",t),$.value=[{id:"system",name:"系统管理",icon:"Setting",type:"menu",children:[{id:"system.department",name:"部门管理",icon:"OfficeBuilding",type:"menu",children:[{id:"system.department.view",name:"查看部门",type:"action"},{id:"system.department.create",name:"新增部门",type:"action"},{id:"system.department.edit",name:"编辑部门",type:"action"},{id:"system.department.delete",name:"删除部门",type:"action"},{id:"system.department.manage",name:"管理部门",type:"action"}]},{id:"system.user",name:"用户管理",icon:"User",type:"menu",children:[{id:"system.user.view",name:"查看用户",type:"action"},{id:"system.user.create",name:"新增用户",type:"action"},{id:"system.user.edit",name:"编辑用户",type:"action"},{id:"system.user.delete",name:"删除用户",type:"action"},{id:"system.user.resetPassword",name:"重置密码",type:"action"},{id:"system.user.setPermissions",name:"权限设置",type:"action"},{id:"system.user.viewLogs",name:"操作日志",type:"action"}]},{id:"system.role",name:"角色权限",icon:"UserFilled",type:"menu",children:[{id:"system.role.view",name:"查看角色",type:"action"},{id:"system.role.create",name:"新增角色",type:"action"},{id:"system.role.edit",name:"编辑角色",type:"action"},{id:"system.role.delete",name:"删除角色",type:"action"},{id:"system.role.setPermissions",name:"设置权限",type:"action"}]},{id:"system.permission",name:"权限管理",icon:"Lock",type:"menu",children:[{id:"system.permission.view",name:"查看权限",type:"action"},{id:"system.permission.manage",name:"权限管理",type:"action"},{id:"system.permission.roleManage",name:"角色管理",type:"action"},{id:"system.permission.sensitivePermission",name:"敏感权限",type:"action"},{id:"system.permission.customerServiceManage",name:"客服管理",type:"action"}]},{id:"system.superAdmin",name:"超管面板",icon:"Crown",type:"menu",children:[{id:"system.superAdmin.view",name:"查看面板",type:"action"},{id:"system.superAdmin.editPermissions",name:"编辑权限",type:"action"},{id:"system.superAdmin.viewDetails",name:"查看详情",type:"action"},{id:"system.superAdmin.resetPassword",name:"重置密码",type:"action"},{id:"system.superAdmin.memberManage",name:"成员管理",type:"action"},{id:"system.superAdmin.permissionDetails",name:"权限详情",type:"action"}]},{id:"system.customerService",name:"客服管理",icon:"Headset",type:"menu",children:[{id:"system.customerService.view",name:"查看客服",type:"action"},{id:"system.customerService.manage",name:"管理客服",type:"action"},{id:"system.customerService.setPermissions",name:"设置权限",type:"action"},{id:"system.customerService.enableAll",name:"全部启用",type:"action"},{id:"system.customerService.disableAll",name:"全部禁用",type:"action"}]},{id:"system.message",name:"消息管理",icon:"ChatDotSquare",type:"menu",children:[{id:"system.message.view",name:"查看消息",type:"action"},{id:"system.message.send",name:"发送消息",type:"action"},{id:"system.message.delete",name:"删除消息",type:"action"},{id:"system.message.manage",name:"消息管理",type:"action"}]},{id:"system.settings",name:"系统设置",icon:"Tools",type:"menu",children:[{id:"system.settings.view",name:"查看设置",type:"action"},{id:"system.settings.edit",name:"编辑设置",type:"action"},{id:"system.settings.backup",name:"数据备份",type:"action"},{id:"system.settings.restore",name:"数据恢复",type:"action"}]}]},{id:"customer",name:"客户管理",icon:"Avatar",type:"menu",children:[{id:"customer.list",name:"客户列表",icon:"List",type:"menu",children:[{id:"customer.list.view",name:"查看客户",type:"action"},{id:"customer.list.export",name:"导出客户",type:"action"},{id:"customer.list.import",name:"导入客户",type:"action"},{id:"customer.list.edit",name:"编辑客户",type:"action"},{id:"customer.list.delete",name:"删除客户",type:"action"},{id:"customer.list.assign",name:"分配客户",type:"action"},{id:"customer.list.batchOperation",name:"批量操作",type:"action"}]},{id:"customer.add",name:"新增客户",icon:"Plus",type:"menu",children:[{id:"customer.add.create",name:"创建客户",type:"action"}]},{id:"customer.tags",name:"客户标签",icon:"PriceTag",type:"menu",children:[{id:"customer.tags.view",name:"查看标签",type:"action"},{id:"customer.tags.create",name:"新增标签",type:"action"},{id:"customer.tags.edit",name:"编辑标签",type:"action"},{id:"customer.tags.delete",name:"删除标签",type:"action"},{id:"customer.tags.assign",name:"分配标签",type:"action"}]},{id:"customer.groups",name:"客户分组",icon:"Collection",type:"menu",children:[{id:"customer.groups.view",name:"查看分组",type:"action"},{id:"customer.groups.create",name:"新增分组",type:"action"},{id:"customer.groups.edit",name:"编辑分组",type:"action"},{id:"customer.groups.delete",name:"删除分组",type:"action"},{id:"customer.groups.manage",name:"管理分组",type:"action"}]}]},{id:"order",name:"订单管理",icon:"Document",type:"menu",children:[{id:"order.list",name:"订单列表",icon:"List",type:"menu",children:[{id:"order.list.view",name:"查看订单",type:"action"},{id:"order.list.export",name:"导出订单",type:"action"},{id:"order.list.edit",name:"编辑订单",type:"action"},{id:"order.list.delete",name:"删除订单",type:"action"},{id:"order.list.cancel",name:"取消订单",type:"action"},{id:"order.list.batchOperation",name:"批量操作",type:"action"}]},{id:"order.add",name:"新增订单",icon:"Plus",type:"menu",children:[{id:"order.add.create",name:"创建订单",type:"action"}]},{id:"order.audit",name:"订单审核",icon:"DocumentChecked",type:"menu",children:[{id:"order.audit.view",name:"查看审核",type:"action"},{id:"order.audit.approve",name:"通过审核",type:"action"},{id:"order.audit.reject",name:"拒绝审核",type:"action"},{id:"order.audit.revoke",name:"撤销审核",type:"action"},{id:"order.audit.batchAudit",name:"批量审核",type:"action"}]},{id:"order.audit",name:"订单审核",icon:"CircleCheck",type:"menu",children:[{id:"order.audit.view",name:"查看待审核订单",type:"action"},{id:"order.audit.approve",name:"审核通过",type:"action"},{id:"order.audit.reject",name:"审核拒绝",type:"action"},{id:"order.audit.batch",name:"批量审核",type:"action"}]}]},{id:"service",name:"服务管理",icon:"Headset",type:"menu",children:[{id:"service.ticket",name:"工单管理",icon:"Tickets",type:"menu",children:[{id:"service.ticket.view",name:"查看工单",type:"action"},{id:"service.ticket.create",name:"创建工单",type:"action"},{id:"service.ticket.edit",name:"编辑工单",type:"action"},{id:"service.ticket.delete",name:"删除工单",type:"action"},{id:"service.ticket.assign",name:"分配工单",type:"action"},{id:"service.ticket.close",name:"关闭工单",type:"action"},{id:"service.ticket.export",name:"导出工单",type:"action"}]},{id:"service.chat",name:"在线客服",icon:"ChatDotRound",type:"menu",children:[{id:"service.chat.view",name:"查看对话",type:"action"},{id:"service.chat.reply",name:"回复消息",type:"action"},{id:"service.chat.transfer",name:"转接客服",type:"action"},{id:"service.chat.history",name:"查看历史",type:"action"},{id:"service.chat.settings",name:"客服设置",type:"action"}]},{id:"service.knowledge",name:"知识库",icon:"Collection",type:"menu",children:[{id:"service.knowledge.view",name:"查看知识库",type:"action"},{id:"service.knowledge.create",name:"创建文档",type:"action"},{id:"service.knowledge.edit",name:"编辑文档",type:"action"},{id:"service.knowledge.delete",name:"删除文档",type:"action"},{id:"service.knowledge.category",name:"分类管理",type:"action"},{id:"service.knowledge.publish",name:"发布文档",type:"action"}]},{id:"service.call",name:"通话管理",icon:"Phone",type:"menu",children:[{id:"service.call.view",name:"查看通话记录",type:"action"},{id:"service.call.make",name:"发起通话",type:"action"},{id:"service.call.record",name:"录音管理",type:"action"},{id:"service.call.statistics",name:"通话统计",type:"action"}]},{id:"service.sms",name:"短信管理",icon:"Message",type:"menu",children:[{id:"service.sms.view",name:"查看短信记录",type:"action"},{id:"service.sms.send",name:"发送短信",type:"action"},{id:"service.sms.template",name:"模板管理",type:"action"},{id:"service.sms.batch",name:"批量发送",type:"action"},{id:"service.sms.statistics",name:"短信统计",type:"action"}]}]},{id:"performance",name:"业绩统计",icon:"TrendCharts",type:"menu",children:[{id:"performance.personal",name:"个人业绩",icon:"User",type:"menu",children:[{id:"performance.personal.view",name:"查看个人业绩",type:"action"},{id:"performance.personal.export",name:"导出个人数据",type:"action"}]},{id:"performance.team",name:"团队业绩",icon:"UserFilled",type:"menu",children:[{id:"performance.team.view",name:"查看团队业绩",type:"action"},{id:"performance.team.export",name:"导出团队数据",type:"action"},{id:"performance.team.compare",name:"业绩对比",type:"action"}]},{id:"performance.analysis",name:"业绩分析",icon:"DataAnalysis",type:"menu",children:[{id:"performance.analysis.view",name:"查看分析报告",type:"action"},{id:"performance.analysis.trend",name:"趋势分析",type:"action"},{id:"performance.analysis.forecast",name:"业绩预测",type:"action"}]},{id:"performance.share",name:"业绩分享",icon:"Share",type:"menu",children:[{id:"performance.share.view",name:"查看分享",type:"action"},{id:"performance.share.create",name:"创建分享",type:"action"},{id:"performance.share.manage",name:"管理分享",type:"action"}]}]},{id:"logistics",name:"物流管理",icon:"Van",type:"menu",children:[{id:"logistics.list",name:"物流列表",icon:"List",type:"menu",children:[{id:"logistics.list.view",name:"查看物流列表",type:"action"},{id:"logistics.list.export",name:"导出物流数据",type:"action"}]},{id:"logistics.track",name:"物流跟踪",icon:"Position",type:"menu",children:[{id:"logistics.track.view",name:"查看跟踪信息",type:"action"},{id:"logistics.track.update",name:"更新跟踪状态",type:"action"}]},{id:"logistics.companies",name:"物流公司",icon:"OfficeBuilding",type:"menu",children:[{id:"logistics.companies.view",name:"查看物流公司",type:"action"},{id:"logistics.companies.create",name:"添加物流公司",type:"action"},{id:"logistics.companies.edit",name:"编辑物流公司",type:"action"},{id:"logistics.companies.delete",name:"删除物流公司",type:"action"}]},{id:"logistics.shipping",name:"发货列表",icon:"Box",type:"menu",children:[{id:"logistics.shipping.view",name:"查看发货列表",type:"action"},{id:"logistics.shipping.create",name:"创建发货单",type:"action"},{id:"logistics.shipping.edit",name:"编辑发货单",type:"action"},{id:"logistics.shipping.batchExport",name:"批量导出",type:"action"}]},{id:"logistics.status",name:"状态更新",icon:"Refresh",type:"menu",children:[{id:"logistics.status.view",name:"查看状态",type:"action"},{id:"logistics.status.update",name:"更新状态",type:"action"},{id:"logistics.status.batch",name:"批量更新",type:"action"}]}]},{id:"afterSales",name:"售后管理",icon:"Tools",type:"menu",children:[{id:"afterSales.list",name:"售后订单",icon:"List",type:"menu",children:[{id:"afterSales.list.view",name:"查看售后订单",type:"action"},{id:"afterSales.list.export",name:"导出售后数据",type:"action"}]},{id:"afterSales.add",name:"新建售后",icon:"Plus",type:"menu",children:[{id:"afterSales.add.create",name:"创建售后单",type:"action"},{id:"afterSales.add.batch",name:"批量创建",type:"action"}]},{id:"afterSales.detail",name:"售后详情",icon:"View",type:"menu",children:[{id:"afterSales.detail.view",name:"查看售后详情",type:"action"},{id:"afterSales.detail.edit",name:"编辑售后单",type:"action"},{id:"afterSales.detail.process",name:"处理售后",type:"action"}]},{id:"afterSales.data",name:"售后数据",icon:"DataAnalysis",type:"menu",children:[{id:"afterSales.data.view",name:"查看售后数据",type:"action"},{id:"afterSales.data.analysis",name:"售后分析",type:"action"},{id:"afterSales.data.report",name:"售后报告",type:"action"}]}]},{id:"data",name:"资料管理",icon:"FolderOpened",type:"menu",children:[{id:"data.list",name:"资料列表",icon:"List",type:"menu",children:[{id:"data.list.view",name:"查看资料列表",type:"action"},{id:"data.list.export",name:"导出资料",type:"action"},{id:"data.list.import",name:"导入资料",type:"action"},{id:"data.list.assign",name:"分配资料",type:"action"}]},{id:"data.search",name:"客户查询",icon:"Search",type:"menu",children:[{id:"data.search.basic",name:"基础查询",type:"action"},{id:"data.search.advanced",name:"高级查询",type:"action"},{id:"data.search.export",name:"导出查询结果",type:"action"}]},{id:"data.recycle",name:"回收站",icon:"Delete",type:"menu",children:[{id:"data.recycle.view",name:"查看回收站",type:"action"},{id:"data.recycle.restore",name:"恢复数据",type:"action"},{id:"data.recycle.delete",name:"彻底删除",type:"action"}]}]},{id:"product",name:"商品管理",icon:"Goods",type:"menu",children:[{id:"product.list",name:"商品列表",icon:"List",type:"menu",children:[{id:"product.list.view",name:"查看商品",type:"action"},{id:"product.list.export",name:"导出商品",type:"action"},{id:"product.list.edit",name:"编辑商品",type:"action"},{id:"product.list.delete",name:"删除商品",type:"action"},{id:"product.list.batchOperation",name:"批量操作",type:"action"},{id:"product.list.priceAdjust",name:"价格调整",type:"action"}]},{id:"product.add",name:"新增商品",icon:"Plus",type:"menu",children:[{id:"product.add.create",name:"创建商品",type:"action"},{id:"product.add.batchAdd",name:"批量新增",type:"action"}]},{id:"product.category",name:"商品分类",icon:"Collection",type:"menu",children:[{id:"product.category.view",name:"查看分类",type:"action"},{id:"product.category.create",name:"新增分类",type:"action"},{id:"product.category.edit",name:"编辑分类",type:"action"},{id:"product.category.delete",name:"删除分类",type:"action"},{id:"product.category.manage",name:"管理分类",type:"action"}]},{id:"product.inventory",name:"库存管理",icon:"Box",type:"menu",children:[{id:"product.inventory.view",name:"查看库存",type:"action"},{id:"product.inventory.adjust",name:"调整库存",type:"action"},{id:"product.inventory.inbound",name:"入库操作",type:"action"},{id:"product.inventory.outbound",name:"出库操作",type:"action"},{id:"product.inventory.transfer",name:"转移库存",type:"action"},{id:"product.inventory.alert",name:"预警设置",type:"action"}]},{id:"product.analytics",name:"商品分析",icon:"DataAnalysis",type:"menu",children:[{id:"product.analytics.view",name:"查看分析",type:"action"},{id:"product.analytics.sales",name:"销售分析",type:"action"},{id:"product.analytics.profit",name:"利润分析",type:"action"},{id:"product.analytics.trend",name:"趋势分析",type:"action"},{id:"product.analytics.exportReport",name:"导出报表",type:"action"}]}]},{id:"data",name:"资料管理",icon:"FolderOpened",type:"menu",children:[{id:"data.list",name:"资料列表",icon:"List",type:"menu",children:[{id:"data.list.view",name:"查看资料列表",type:"action"},{id:"data.list.export",name:"导出资料",type:"action"},{id:"data.list.import",name:"导入资料",type:"action"},{id:"data.list.assign",name:"分配资料",type:"action"}]},{id:"data.search",name:"客户查询",icon:"Search",type:"menu",children:[{id:"data.search.basic",name:"基础查询",type:"action"},{id:"data.search.advanced",name:"高级查询",type:"action"},{id:"data.search.export",name:"导出查询结果",type:"action"}]},{id:"data.recycle",name:"回收站",icon:"Delete",type:"menu",children:[{id:"data.recycle.view",name:"查看回收站",type:"action"},{id:"data.recycle.restore",name:"恢复数据",type:"action"},{id:"data.recycle.delete",name:"彻底删除",type:"action"}]}]},{id:"performance",name:"业绩统计",icon:"TrendCharts",type:"menu",children:[{id:"performance.personal",name:"个人业绩",icon:"User",type:"menu",children:[{id:"performance.personal.view",name:"查看个人业绩",type:"action"},{id:"performance.personal.export",name:"导出个人数据",type:"action"}]},{id:"performance.team",name:"团队业绩",icon:"UserFilled",type:"menu",children:[{id:"performance.team.view",name:"查看团队业绩",type:"action"},{id:"performance.team.export",name:"导出团队数据",type:"action"},{id:"performance.team.compare",name:"业绩对比",type:"action"}]},{id:"performance.analysis",name:"业绩分析",icon:"DataAnalysis",type:"menu",children:[{id:"performance.analysis.view",name:"查看分析报告",type:"action"},{id:"performance.analysis.trend",name:"趋势分析",type:"action"},{id:"performance.analysis.forecast",name:"业绩预测",type:"action"}]},{id:"performance.share",name:"业绩分享",icon:"Share",type:"menu",children:[{id:"performance.share.view",name:"查看分享",type:"action"},{id:"performance.share.create",name:"创建分享",type:"action"},{id:"performance.share.manage",name:"管理分享",type:"action"}]}]},{id:"afterSales",name:"售后管理",icon:"Tools",type:"menu",children:[{id:"afterSales.list",name:"售后订单",icon:"List",type:"menu",children:[{id:"afterSales.list.view",name:"查看售后订单",type:"action"},{id:"afterSales.list.export",name:"导出售后数据",type:"action"}]},{id:"afterSales.add",name:"新建售后",icon:"Plus",type:"menu",children:[{id:"afterSales.add.create",name:"创建售后单",type:"action"},{id:"afterSales.add.batch",name:"批量创建",type:"action"}]},{id:"afterSales.detail",name:"售后详情",icon:"View",type:"menu",children:[{id:"afterSales.detail.view",name:"查看售后详情",type:"action"},{id:"afterSales.detail.edit",name:"编辑售后单",type:"action"},{id:"afterSales.detail.process",name:"处理售后",type:"action"}]},{id:"afterSales.data",name:"售后数据",icon:"DataAnalysis",type:"menu",children:[{id:"afterSales.data.view",name:"查看售后数据",type:"action"},{id:"afterSales.data.analysis",name:"售后分析",type:"action"},{id:"afterSales.data.report",name:"售后报告",type:"action"}]}]},{id:"logistics",name:"物流管理",icon:"Van",type:"menu",children:[{id:"logistics.list",name:"物流列表",icon:"List",type:"menu",children:[{id:"logistics.list.view",name:"查看物流列表",type:"action"},{id:"logistics.list.export",name:"导出物流数据",type:"action"}]},{id:"logistics.track",name:"物流跟踪",icon:"Position",type:"menu",children:[{id:"logistics.track.view",name:"查看跟踪信息",type:"action"},{id:"logistics.track.update",name:"更新跟踪状态",type:"action"}]},{id:"logistics.companies",name:"物流公司",icon:"OfficeBuilding",type:"menu",children:[{id:"logistics.companies.view",name:"查看物流公司",type:"action"},{id:"logistics.companies.create",name:"添加物流公司",type:"action"},{id:"logistics.companies.edit",name:"编辑物流公司",type:"action"},{id:"logistics.companies.delete",name:"删除物流公司",type:"action"}]},{id:"logistics.shipping",name:"发货列表",icon:"Box",type:"menu",children:[{id:"logistics.shipping.view",name:"查看发货列表",type:"action"},{id:"logistics.shipping.create",name:"创建发货单",type:"action"},{id:"logistics.shipping.edit",name:"编辑发货单",type:"action"},{id:"logistics.shipping.batchExport",name:"批量导出",type:"action"}]},{id:"logistics.status",name:"状态更新",icon:"Refresh",type:"menu",children:[{id:"logistics.status.view",name:"查看状态",type:"action"},{id:"logistics.status.update",name:"更新状态",type:"action"},{id:"logistics.status.batch",name:"批量更新",type:"action"}]}]}]}finally{le.value=ye($.value)}}),ue=()=>C(this,null,function*(){try{const t=Re.getAllPermissions();ee.value=t,console.log("所有权限加载成功")}catch(t){console.error("加载所有权限失败:",t),ee.value=[{id:"system",name:"系统管理",code:"system",type:"menu",path:"/system",icon:"Setting",sort:1,status:"active",children:[{id:"system.user",name:"用户管理",code:"system.user",type:"menu",path:"/system/user",icon:"User",sort:1,status:"active",children:[{id:"system.user.view",name:"查看用户",code:"system.user.view",type:"action",sort:1,status:"active"},{id:"system.user.create",name:"创建用户",code:"system.user.create",type:"action",sort:2,status:"active"},{id:"system.user.edit",name:"编辑用户",code:"system.user.edit",type:"action",sort:3,status:"active"},{id:"system.user.delete",name:"删除用户",code:"system.user.delete",type:"action",sort:4,status:"active"}]},{id:"system.role",name:"角色管理",code:"system.role",type:"menu",path:"/system/role",icon:"UserFilled",sort:2,status:"active",children:[{id:"system.role.view",name:"查看角色",code:"system.role.view",type:"action",sort:1,status:"active"},{id:"system.role.create",name:"创建角色",code:"system.role.create",type:"action",sort:2,status:"active"},{id:"system.role.edit",name:"编辑角色",code:"system.role.edit",type:"action",sort:3,status:"active"},{id:"system.role.delete",name:"删除角色",code:"system.role.delete",type:"action",sort:4,status:"active"}]},{id:"system.permission",name:"权限管理",code:"system.permission",type:"menu",path:"/system/permission",icon:"Lock",sort:3,status:"active",children:[{id:"system.permission.view",name:"查看权限",code:"system.permission.view",type:"action",sort:1,status:"active"},{id:"system.permission.assign",name:"分配权限",code:"system.permission.assign",type:"action",sort:2,status:"active"}]}]},{id:"customer",name:"客户管理",code:"customer",type:"menu",path:"/customer",icon:"Avatar",sort:2,status:"active",children:[{id:"customer.list",name:"客户列表",code:"customer.list",type:"menu",path:"/customer/list",icon:"List",sort:1,status:"active",children:[{id:"customer.list.view",name:"查看客户列表",code:"customer.list.view",type:"action",sort:1,status:"active"},{id:"customer.list.export",name:"导出客户数据",code:"customer.list.export",type:"action",sort:2,status:"active"}]},{id:"customer.detail",name:"客户详情",code:"customer.detail",type:"menu",path:"/customer/detail",icon:"View",sort:2,status:"active",children:[{id:"customer.detail.view",name:"查看客户详情",code:"customer.detail.view",type:"action",sort:1,status:"active"},{id:"customer.detail.edit",name:"编辑客户信息",code:"customer.detail.edit",type:"action",sort:2,status:"active"}]},{id:"customer.manage",name:"客户操作",code:"customer.manage",type:"menu",icon:"Operation",sort:3,status:"active",children:[{id:"customer.manage.create",name:"新增客户",code:"customer.manage.create",type:"action",sort:1,status:"active"},{id:"customer.manage.edit",name:"编辑客户",code:"customer.manage.edit",type:"action",sort:2,status:"active"},{id:"customer.manage.delete",name:"删除客户",code:"customer.manage.delete",type:"action",sort:3,status:"active"},{id:"customer.manage.assign",name:"分配客户",code:"customer.manage.assign",type:"action",sort:4,status:"active"}]}]},{id:"order",name:"订单管理",code:"order",type:"menu",path:"/order",icon:"Document",sort:3,status:"active",children:[{id:"order.list",name:"订单列表",code:"order.list",type:"menu",path:"/order/list",icon:"List",sort:1,status:"active",children:[{id:"order.list.view",name:"查看订单列表",code:"order.list.view",type:"action",sort:1,status:"active"},{id:"order.list.export",name:"导出订单数据",code:"order.list.export",type:"action",sort:2,status:"active"}]},{id:"order.detail",name:"订单详情",code:"order.detail",type:"menu",path:"/order/detail",icon:"View",sort:2,status:"active",children:[{id:"order.detail.view",name:"查看订单详情",code:"order.detail.view",type:"action",sort:1,status:"active"},{id:"order.detail.edit",name:"编辑订单信息",code:"order.detail.edit",type:"action",sort:2,status:"active"}]},{id:"order.manage",name:"订单操作",code:"order.manage",type:"menu",icon:"Operation",sort:3,status:"active",children:[{id:"order.manage.create",name:"新增订单",code:"order.manage.create",type:"action",sort:1,status:"active"},{id:"order.manage.edit",name:"编辑订单",code:"order.manage.edit",type:"action",sort:2,status:"active"},{id:"order.manage.delete",name:"删除订单",code:"order.manage.delete",type:"action",sort:3,status:"active"},{id:"order.manage.approve",name:"审批订单",code:"order.manage.approve",type:"action",sort:4,status:"active"}]}]},{id:"data",name:"数据管理",code:"data",type:"menu",path:"/data",icon:"DataAnalysis",sort:4,status:"active",children:[{id:"data.analysis",name:"数据分析",code:"data.analysis",type:"menu",path:"/data/analysis",icon:"TrendCharts",sort:1,status:"active",children:[{id:"data.analysis.view",name:"查看数据分析",code:"data.analysis.view",type:"action",sort:1,status:"active"},{id:"data.analysis.export",name:"导出分析报告",code:"data.analysis.export",type:"action",sort:2,status:"active"}]},{id:"data.report",name:"报表管理",code:"data.report",type:"menu",path:"/data/report",icon:"Document",sort:2,status:"active",children:[{id:"data.report.view",name:"查看报表",code:"data.report.view",type:"action",sort:1,status:"active"},{id:"data.report.create",name:"创建报表",code:"data.report.create",type:"action",sort:2,status:"active"},{id:"data.report.edit",name:"编辑报表",code:"data.report.edit",type:"action",sort:3,status:"active"}]}]}],le.value=ye(ee.value)}}),ye=t=>t.map(e=>({id:e.id,name:e.name,children:e.children?ye(e.children):void 0})),ae=(t,e,s=[])=>{for(const r of e)if(r.children){if(r.children.some(l=>l.id===t))return s.push(r.id),ae(r.id,e,s);if(ae(t,r.children,s).length>0)return s.push(r.id),s}return s},pt=(t,e)=>{const s=[],r=l=>{for(const m of l){if(m.id===t&&m.children){const p=A=>{A.forEach(F=>{s.push(F.id),F.children&&p(F.children)})};p(m.children);return}m.children&&r(m.children)}};return r(e),s},ut=(t,e)=>{const s=[],r=l=>{for(const m of l){if(m.id===t&&m.children){m.children.forEach(p=>{s.push(p.id)});return}m.children&&r(m.children)}};return r(e),s};return Mt(()=>{H(),z(),mt()}),(t,e)=>{const s=c("el-icon"),r=c("el-card"),l=c("el-button"),m=c("el-input"),p=c("el-form-item"),A=c("el-option"),F=c("el-select"),ie=c("el-date-picker"),ne=c("el-form"),_=c("el-table-column"),D=c("el-tag"),Ce=c("el-link"),ve=c("el-dropdown-item"),yt=c("el-dropdown-menu"),vt=c("el-dropdown"),Se=c("el-table"),ft=c("el-pagination"),se=c("el-radio"),Ve=c("el-radio-group"),oe=c("el-dialog"),gt=c("el-divider"),ht=c("el-tree"),_t=c("el-tree-select"),wt=c("el-input-number"),bt=qt("loading");return w(),Nt("div",Gt,[o("div",Qt,[o("div",Wt,[e[30]||(e[30]=o("h2",null,"角色权限管理",-1)),o("div",Xt,[a(r,{class:"stat-card primary",shadow:"hover"},{default:i(()=>[o("div",Yt,[o("div",Jt,[a(s,null,{default:i(()=>[a(k(Rt))]),_:1})]),o("div",ea,[o("div",ta,S(W.value.total),1),e[24]||(e[24]=o("div",{class:"stat-title"},"角色总数",-1)),e[25]||(e[25]=o("div",{class:"stat-desc"},"系统中所有角色数量",-1))])])]),_:1}),a(r,{class:"stat-card success",shadow:"hover"},{default:i(()=>[o("div",aa,[o("div",ia,[a(s,null,{default:i(()=>[a(k(Dt))]),_:1})]),o("div",na,[o("div",sa,S(W.value.active),1),e[26]||(e[26]=o("div",{class:"stat-title"},"启用角色",-1)),e[27]||(e[27]=o("div",{class:"stat-desc"},"当前启用的角色数量",-1))])])]),_:1}),a(r,{class:"stat-card warning",shadow:"hover"},{default:i(()=>[o("div",oa,[o("div",da,[a(s,null,{default:i(()=>[a(k(Ut))]),_:1})]),o("div",la,[o("div",ra,S(W.value.permissions),1),e[28]||(e[28]=o("div",{class:"stat-title"},"权限总数",-1)),e[29]||(e[29]=o("div",{class:"stat-desc"},"系统中所有权限数量",-1))])])]),_:1})])]),o("div",ca,[Le.value?(w(),b(l,{key:0,onClick:je,type:"primary",icon:k(De)},{default:i(()=>[...e[31]||(e[31]=[d(" 新增角色 ",-1)])]),_:1},8,["icon"])):V("",!0),Oe.value?(w(),b(l,{key:1,onClick:qe,icon:k($t)},{default:i(()=>[...e[32]||(e[32]=[d(" 权限管理 ",-1)])]),_:1},8,["icon"])):V("",!0)])]),a(r,{class:"search-card"},{default:i(()=>[a(ne,{model:E,inline:""},{default:i(()=>[a(p,{label:"角色名称"},{default:i(()=>[a(m,{modelValue:E.name,"onUpdate:modelValue":e[0]||(e[0]=n=>E.name=n),placeholder:"请输入角色名称",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),a(p,{label:"状态"},{default:i(()=>[a(F,{modelValue:E.status,"onUpdate:modelValue":e[1]||(e[1]=n=>E.status=n),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:i(()=>[a(A,{label:"启用",value:"active"}),a(A,{label:"禁用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"创建时间"},{default:i(()=>[a(ie,{modelValue:E.createTimeRange,"onUpdate:modelValue":e[2]||(e[2]=n=>E.createTimeRange=n),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),a(p,null,{default:i(()=>[a(l,{onClick:we,type:"primary",icon:k(Bt)},{default:i(()=>[...e[33]||(e[33]=[d(" 搜索 ",-1)])]),_:1},8,["icon"]),a(l,{onClick:Ye,icon:k(zt)},{default:i(()=>[...e[34]||(e[34]=[d(" 重置 ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),a(r,{class:"table-card"},{header:i(()=>[o("div",ma,[e[38]||(e[38]=o("span",null,"角色列表",-1)),o("div",pa,[ce.value?(w(),b(l,{key:0,onClick:Xe,disabled:!R.value.length,type:"danger",size:"small",icon:k(Lt)},{default:i(()=>[...e[35]||(e[35]=[d(" 批量删除 ",-1)])]),_:1},8,["disabled","icon"])):V("",!0),he.value?(w(),b(l,{key:1,onClick:e[3]||(e[3]=n=>_e("active")),disabled:!R.value.length,size:"small",icon:k(Ot)},{default:i(()=>[...e[36]||(e[36]=[d(" 批量启用 ",-1)])]),_:1},8,["disabled","icon"])):V("",!0),he.value?(w(),b(l,{key:2,onClick:e[4]||(e[4]=n=>_e("inactive")),disabled:!R.value.length,size:"small",icon:k(Et)},{default:i(()=>[...e[37]||(e[37]=[d(" 批量禁用 ",-1)])]),_:1},8,["disabled","icon"])):V("",!0)])])]),default:i(()=>[Ht((w(),b(Se,{data:fe.value,onSelectionChange:Je,style:{width:"100%"}},{default:i(()=>[a(_,{type:"selection",width:"55"}),a(_,{prop:"name",label:"角色名称",width:"150"}),a(_,{prop:"code",label:"角色编码",width:"150"}),a(_,{label:"状态",width:"100"},{default:i(({row:n})=>[a(D,{type:n.status==="active"?"success":"danger",size:"small"},{default:i(()=>[d(S(n.status==="active"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),a(_,{label:"用户数量",width:"100"},{default:i(({row:n})=>[a(Ce,{onClick:U=>Ne(n),type:"primary"},{default:i(()=>[d(S(n.userCount),1)]),_:2},1032,["onClick"])]),_:1}),a(_,{label:"权限数量",width:"100"},{default:i(({row:n})=>[a(Ce,{onClick:U=>He(n),type:"primary"},{default:i(()=>[d(S(n.permissionCount),1)]),_:2},1032,["onClick"])]),_:1}),a(_,{prop:"description",label:"描述","show-overflow-tooltip":""}),a(_,{prop:"createTime",label:"创建时间",width:"160"}),a(_,{label:"操作",width:"200",fixed:"right"},{default:i(({row:n})=>[te.value?(w(),b(l,{key:0,onClick:U=>Ke(n),type:"primary",size:"small",link:""},{default:i(()=>[...e[39]||(e[39]=[d(" 编辑 ",-1)])]),_:1},8,["onClick"])):V("",!0),Ee.value?(w(),b(l,{key:1,onClick:U=>Me(n),type:"primary",size:"small",link:""},{default:i(()=>[...e[40]||(e[40]=[d(" 权限设置 ",-1)])]),_:1},8,["onClick"])):V("",!0),te.value||ce.value?(w(),b(vt,{key:2,onCommand:U=>Ze(U,n)},{dropdown:i(()=>[a(yt,null,{default:i(()=>[te.value?(w(),b(ve,{key:0,command:"copy"},{default:i(()=>[...e[42]||(e[42]=[d(" 复制角色 ",-1)])]),_:1})):V("",!0),te.value?(w(),b(ve,{key:1,command:"toggle"},{default:i(()=>[d(S(n.status==="active"?"禁用":"启用"),1)]),_:2},1024)):V("",!0),ce.value?(w(),b(ve,{key:2,command:"delete",divided:"",class:"danger-item"},{default:i(()=>[...e[43]||(e[43]=[d(" 删除 ",-1)])]),_:1})):V("",!0)]),_:2},1024)]),default:i(()=>[a(l,{type:"primary",size:"small",link:""},{default:i(()=>[e[41]||(e[41]=d(" 更多",-1)),a(s,{class:"el-icon--right"},{default:i(()=>[a(k(Ft))]),_:1})]),_:1})]),_:2},1032,["onCommand"])):V("",!0)]),_:1})]),_:1},8,["data"])),[[bt,g.value]]),o("div",ua,[a(ft,{"current-page":B.page,"onUpdate:currentPage":e[5]||(e[5]=n=>B.page=n),"page-size":B.size,"onUpdate:pageSize":e[6]||(e[6]=n=>B.size=n),"page-sizes":[10,20,50,100],total:B.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:et,onCurrentChange:tt},null,8,["current-page","page-size","total"])])]),_:1}),a(oe,{modelValue:L.value,"onUpdate:modelValue":e[11]||(e[11]=n=>L.value=n),title:ze.value,width:"600px","before-close":me},{footer:i(()=>[o("span",ya,[a(l,{onClick:me},{default:i(()=>[...e[46]||(e[46]=[d("取消",-1)])]),_:1}),a(l,{onClick:lt,type:"primary",loading:Z.value},{default:i(()=>[...e[47]||(e[47]=[d(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:i(()=>[a(ne,{ref_key:"roleFormRef",ref:re,model:v,rules:$e,"label-width":"100px"},{default:i(()=>[a(p,{label:"角色名称",prop:"name"},{default:i(()=>[a(m,{modelValue:v.name,"onUpdate:modelValue":e[7]||(e[7]=n=>v.name=n),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),a(p,{label:"角色编码",prop:"code"},{default:i(()=>[a(m,{modelValue:v.code,"onUpdate:modelValue":e[8]||(e[8]=n=>v.code=n),placeholder:"请输入角色编码",disabled:M.value},null,8,["modelValue","disabled"])]),_:1}),a(p,{label:"状态",prop:"status"},{default:i(()=>[a(Ve,{modelValue:v.status,"onUpdate:modelValue":e[9]||(e[9]=n=>v.status=n)},{default:i(()=>[a(se,{value:"active"},{default:i(()=>[...e[44]||(e[44]=[d("启用",-1)])]),_:1}),a(se,{value:"inactive"},{default:i(()=>[...e[45]||(e[45]=[d("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"描述",prop:"description"},{default:i(()=>[a(m,{modelValue:v.description,"onUpdate:modelValue":e[10]||(e[10]=n=>v.description=n),type:"textarea",rows:3,placeholder:"请输入角色描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),a(oe,{modelValue:O.value,"onUpdate:modelValue":e[12]||(e[12]=n=>O.value=n),title:"权限设置",width:"800px","before-close":pe},{footer:i(()=>[o("span",_a,[a(l,{onClick:pe},{default:i(()=>[...e[48]||(e[48]=[d("取消",-1)])]),_:1}),a(l,{onClick:rt,type:"primary",loading:q.value},{default:i(()=>[...e[49]||(e[49]=[d(" 保存权限 ",-1)])]),_:1},8,["loading"])])]),default:i(()=>{var n,U;return[o("div",va,[o("div",fa,[o("h4",null,"角色："+S((n=N.value)==null?void 0:n.name),1),o("p",null,S((U=N.value)==null?void 0:U.description),1)]),a(gt),o("div",ga,[a(ht,{ref_key:"permissionTreeRef",ref:I,data:$.value,props:Ue,"show-checkbox":"","node-key":"id","default-checked-keys":Q.value,onCheck:at},{default:i(({node:Sa,data:X})=>[o("span",ha,[X.icon?(w(),b(s,{key:0,class:"node-icon"},{default:i(()=>[(w(),b(Zt(X.icon)))]),_:2},1024)):V("",!0),o("span",null,S(X.name),1),X.type?(w(),b(D,{key:1,size:"small",class:"node-tag"},{default:i(()=>[d(S(X.type),1)]),_:2},1024)):V("",!0)])]),_:1},8,["data","default-checked-keys"])])])]}),_:1},8,["modelValue"]),a(oe,{modelValue:P.value,"onUpdate:modelValue":e[13]||(e[13]=n=>P.value=n),title:"权限管理",width:"1000px"},{default:i(()=>[o("div",wa,[o("div",ba,[a(l,{onClick:st,type:"primary",icon:k(De)},{default:i(()=>[...e[50]||(e[50]=[d(" 新增权限 ",-1)])]),_:1},8,["icon"]),a(l,{onClick:it,icon:k(It)},{default:i(()=>[...e[51]||(e[51]=[d(" 展开全部 ",-1)])]),_:1},8,["icon"]),a(l,{onClick:nt,icon:k(jt)},{default:i(()=>[...e[52]||(e[52]=[d(" 收起全部 ",-1)])]),_:1},8,["icon"])]),a(Se,{data:ee.value,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},style:{width:"100%","margin-top":"20px"}},{default:i(()=>[a(_,{prop:"name",label:"权限名称",width:"200"}),a(_,{prop:"code",label:"权限编码",width:"200"}),a(_,{label:"类型",width:"100"},{default:i(({row:n})=>[a(D,{type:Ie(n.type),size:"small"},{default:i(()=>[d(S(n.type),1)]),_:2},1032,["type"])]),_:1}),a(_,{prop:"path",label:"路径","show-overflow-tooltip":""}),a(_,{label:"状态",width:"80"},{default:i(({row:n})=>[a(D,{type:n.status==="active"?"success":"danger",size:"small"},{default:i(()=>[d(S(n.status==="active"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),a(_,{label:"操作",width:"150"},{default:i(({row:n})=>[a(l,{onClick:U=>ot(n),type:"primary",size:"small",link:""},{default:i(()=>[...e[53]||(e[53]=[d(" 编辑 ",-1)])]),_:1},8,["onClick"]),a(l,{onClick:U=>dt(n),type:"danger",size:"small",link:""},{default:i(()=>[...e[54]||(e[54]=[d(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue"]),a(oe,{modelValue:T.value,"onUpdate:modelValue":e[23]||(e[23]=n=>T.value=n),title:Fe.value,width:"500px"},{footer:i(()=>[o("span",ka,[a(l,{onClick:e[22]||(e[22]=n=>T.value=!1)},{default:i(()=>[...e[57]||(e[57]=[d("取消",-1)])]),_:1}),a(l,{onClick:ct,type:"primary",loading:G.value},{default:i(()=>[...e[58]||(e[58]=[d(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:i(()=>[a(ne,{ref_key:"permissionFormRef",ref:ge,model:h,rules:Be,"label-width":"100px"},{default:i(()=>[a(p,{label:"上级权限",prop:"parentId"},{default:i(()=>[a(_t,{modelValue:h.parentId,"onUpdate:modelValue":e[14]||(e[14]=n=>h.parentId=n),data:le.value,props:{label:"name",value:"id"},placeholder:"请选择上级权限",clearable:"","check-strictly":""},null,8,["modelValue","data"])]),_:1}),a(p,{label:"权限名称",prop:"name"},{default:i(()=>[a(m,{modelValue:h.name,"onUpdate:modelValue":e[15]||(e[15]=n=>h.name=n),placeholder:"请输入权限名称"},null,8,["modelValue"])]),_:1}),a(p,{label:"权限编码",prop:"code"},{default:i(()=>[a(m,{modelValue:h.code,"onUpdate:modelValue":e[16]||(e[16]=n=>h.code=n),placeholder:"请输入权限编码"},null,8,["modelValue"])]),_:1}),a(p,{label:"权限类型",prop:"type"},{default:i(()=>[a(F,{modelValue:h.type,"onUpdate:modelValue":e[17]||(e[17]=n=>h.type=n),placeholder:"请选择权限类型"},{default:i(()=>[a(A,{label:"菜单",value:"menu"}),a(A,{label:"按钮",value:"button"}),a(A,{label:"接口",value:"api"})]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"路径",prop:"path"},{default:i(()=>[a(m,{modelValue:h.path,"onUpdate:modelValue":e[18]||(e[18]=n=>h.path=n),placeholder:"请输入路径"},null,8,["modelValue"])]),_:1}),a(p,{label:"图标",prop:"icon"},{default:i(()=>[a(m,{modelValue:h.icon,"onUpdate:modelValue":e[19]||(e[19]=n=>h.icon=n),placeholder:"请输入图标名称"},null,8,["modelValue"])]),_:1}),a(p,{label:"排序",prop:"sort"},{default:i(()=>[a(wt,{modelValue:h.sort,"onUpdate:modelValue":e[20]||(e[20]=n=>h.sort=n),min:0,placeholder:"排序"},null,8,["modelValue"])]),_:1}),a(p,{label:"状态",prop:"status"},{default:i(()=>[a(Ve,{modelValue:h.status,"onUpdate:modelValue":e[21]||(e[21]=n=>h.status=n)},{default:i(()=>[a(se,{value:"active"},{default:i(()=>[...e[55]||(e[55]=[d("启用",-1)])]),_:1}),a(se,{value:"inactive"},{default:i(()=>[...e[56]||(e[56]=[d("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Da=Tt(Ca,[["__scopeId","data-v-0e236f32"]]);export{Da as default};
