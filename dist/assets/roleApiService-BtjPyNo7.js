var a=(i,o,t)=>new Promise((s,e)=>{var d=n=>{try{c(t.next(n))}catch(l){e(l)}},u=n=>{try{c(t.throw(n))}catch(l){e(l)}},c=n=>n.done?s(n.value):Promise.resolve(n.value).then(d,u);c((t=t.apply(i,o)).next())});import{b as r}from"./settings-CuxbDWOu.js";class p{getRoles(){return a(this,null,function*(){var o,t,s;try{console.log("[RoleAPI] 开始获取角色列表...");const e=yield r.get("/roles");return console.log("[RoleAPI] 获取角色列表成功:",e),e.data.roles||[]}catch(e){return console.warn("[RoleAPI] API获取失败，使用默认角色数据"),console.warn("[RoleAPI] 错误详情:",{message:e==null?void 0:e.message,status:(o=e==null?void 0:e.response)==null?void 0:o.status,statusText:(t=e==null?void 0:e.response)==null?void 0:t.statusText,data:(s=e==null?void 0:e.response)==null?void 0:s.data}),this.getDefaultRoles()}})}getRoleById(o){return a(this,null,function*(){try{const t=yield r.get(`/roles/${o}`);return console.log(`[RoleAPI] 获取角色详情成功: ${o}`),t.data}catch(t){throw console.error(`[RoleAPI] 获取角色详情失败: ${o}`,t),t}})}createRole(o){return a(this,null,function*(){try{const t=yield r.post("/roles",o);return console.log("[RoleAPI] 创建角色成功"),t.data}catch(t){throw console.error("[RoleAPI] 创建角色失败",t),t}})}updateRole(o){return a(this,null,function*(){try{const t=yield r.put(`/roles/${o.id}`,o);return console.log(`[RoleAPI] 更新角色成功: ${o.id}`),t.data}catch(t){throw console.error(`[RoleAPI] 更新角色失败: ${o.id}`,t),t}})}deleteRole(o){return a(this,null,function*(){try{yield r.delete(`/roles/${o}`),console.log(`[RoleAPI] 删除角色成功: ${o}`)}catch(t){throw console.error(`[RoleAPI] 删除角色失败: ${o}`,t),t}})}batchDeleteRoles(o){return a(this,null,function*(){try{yield r.post("/roles/batch-delete",{ids:o}),console.log("[RoleAPI] 批量删除角色成功")}catch(t){throw console.error("[RoleAPI] 批量删除角色失败",t),t}})}batchUpdateRoleStatus(o,t){return a(this,null,function*(){try{yield r.post("/roles/batch-status",{ids:o,status:t}),console.log("[RoleAPI] 批量更新角色状态成功")}catch(s){throw console.error("[RoleAPI] 批量更新角色状态失败",s),s}})}getRoleStats(){return a(this,null,function*(){var o,t,s;try{console.log("[RoleAPI] 开始获取角色统计...");const e=yield r.get("/roles/stats");return console.log("[RoleAPI] 获取角色统计成功:",e),e.data}catch(e){return console.warn("[RoleAPI] 获取角色统计失败，使用默认数据"),console.warn("[RoleAPI] 错误详情:",{message:e==null?void 0:e.message,status:(o=e==null?void 0:e.response)==null?void 0:o.status,statusText:(t=e==null?void 0:e.response)==null?void 0:t.statusText,data:(s=e==null?void 0:e.response)==null?void 0:s.data}),this.getDefaultRoleStats()}})}getDefaultRoles(){return[{id:"1",name:"超级管理员",code:"SUPER_ADMIN",description:"系统超级管理员，拥有所有权限",color:"danger",level:1,status:"active",permissions:["*"],createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",name:"管理员",code:"ADMIN",description:"系统管理员，拥有大部分管理权限",color:"warning",level:2,status:"active",permissions:["system:manage","user:manage","department:manage"],createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",name:"经理",code:"MANAGER",description:"部门经理，拥有部门管理权限",color:"primary",level:3,status:"active",permissions:["department:manage","user:view","customer:manage","order:manage"],createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"4",name:"销售员",code:"SALES",description:"销售人员，负责客户和订单管理",color:"success",level:4,status:"active",permissions:["customer:manage","order:create","order:view"],createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"5",name:"客服",code:"CUSTOMER_SERVICE",description:"客户服务人员，负责客户支持",color:"info",level:5,status:"active",permissions:["customer:view","order:view","support:manage"],createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}]}getDefaultRoleStats(){return{total:6,active:5,inactive:1,byLevel:{1:1,2:1,3:1,4:2,5:1},distribution:[{name:"超级管理员",count:1,percentage:16.7},{name:"管理员",count:1,percentage:16.7},{name:"经理",count:1,percentage:16.7},{name:"销售员",count:2,percentage:33.3},{name:"客服",count:1,percentage:16.7}]}}}const R=new p;export{R as r};
