import{g as e,A as s}from"./index-DkAJPKqn.js";const t=()=>{const e=window.location.hostname;return e.includes("abc789.cn")||e.includes("vercel.app")||e.includes("netlify.app")||e.includes("railway.app")||!e.includes("localhost")&&!e.includes("127.0.0.1")},a={getList:async a=>{if(t())try{return console.log("[CustomerTagApi] 生产环境：调用真实API"),await e.get(s.CUSTOMERS.TAGS.LIST,a)}catch(c){throw console.error("[CustomerTagApi] API调用失败:",c),c}try{const e=localStorage.getItem("customer_tags");let s=e?JSON.parse(e):[];a?.name&&(s=s.filter(e=>e.name.toLowerCase().includes(a.name.toLowerCase()))),a?.status&&(s=s.filter(e=>e.status===a.status));const t=a?.page||1,c=a?.pageSize||20,r=(t-1)*c,o=r+c;return{data:{list:s.slice(r,o),total:s.length,page:t,pageSize:c},code:200,message:"success",success:!0}}catch(c){return console.error("获取标签列表失败:",c),{data:{list:[],total:0,page:1,pageSize:20},code:500,message:"获取标签列表失败",success:!1}}},create:async a=>{if(t())try{return console.log("[CustomerTagApi] 生产环境：创建标签"),await e.post(s.CUSTOMERS.TAGS.CREATE,a)}catch(c){throw console.error("[CustomerTagApi] 创建标签失败:",c),c}try{const e=localStorage.getItem("customer_tags"),s=e?JSON.parse(e):[],t={...a,id:Date.now().toString(),createTime:(new Date).toLocaleString("zh-CN"),customerCount:0};return s.unshift(t),localStorage.setItem("customer_tags",JSON.stringify(s)),{data:t,code:200,message:"success",success:!0}}catch(c){return console.error("创建标签失败:",c),{data:null,code:500,message:"创建标签失败",success:!1}}},update:async(a,c)=>{if(t())try{return console.log("[CustomerTagApi] 生产环境：更新标签"),await e.put(s.CUSTOMERS.TAGS.UPDATE(a),c)}catch(r){throw console.error("[CustomerTagApi] 更新标签失败:",r),r}try{const e=localStorage.getItem("customer_tags"),s=e?JSON.parse(e):[],t=s.findIndex(e=>e.id===a);return-1===t?{data:null,code:404,message:"标签不存在",success:!1}:(s[t]={...s[t],...c},localStorage.setItem("customer_tags",JSON.stringify(s)),{data:s[t],code:200,message:"success",success:!0})}catch(r){return console.error("更新标签失败:",r),{data:null,code:500,message:"更新标签失败",success:!1}}},delete:async a=>{if(t())try{return console.log("[CustomerTagApi] 生产环境：删除标签"),await e.delete(s.CUSTOMERS.TAGS.DELETE(a))}catch(c){throw console.error("[CustomerTagApi] 删除标签失败:",c),c}try{const e=localStorage.getItem("customer_tags"),s=(e?JSON.parse(e):[]).filter(e=>e.id!==a);return localStorage.setItem("customer_tags",JSON.stringify(s)),{data:null,code:200,message:"success",success:!0}}catch(c){return console.error("删除标签失败:",c),{data:null,code:500,message:"删除标签失败",success:!1}}},getDetail:async a=>{if(t())try{return console.log("[CustomerTagApi] 生产环境：获取标签详情"),await e.get(s.CUSTOMERS.TAGS.DETAIL(a))}catch(c){throw console.error("[CustomerTagApi] 获取标签详情失败:",c),c}try{const e=localStorage.getItem("customer_tags"),s=(e?JSON.parse(e):[]).find(e=>e.id===a);return s?{data:s,code:200,message:"success",success:!0}:{data:null,code:404,message:"标签不存在",success:!1}}catch(c){return console.error("获取标签详情失败:",c),{data:null,code:500,message:"获取标签详情失败",success:!1}}},getActiveList:async()=>{if(t())try{return console.log("[CustomerTagApi] 生产环境：获取启用标签列表"),await e.get(s.CUSTOMERS.TAGS.LIST,{status:"active"})}catch(a){throw console.error("[CustomerTagApi] 获取启用标签列表失败:",a),a}try{const e=localStorage.getItem("customer_tags"),s=e?JSON.parse(e):[];return{data:s.filter(e=>"active"===e.status),code:200,message:"success",success:!0}}catch(a){return console.error("获取启用标签列表失败:",a),{data:[],code:500,message:"获取启用标签列表失败",success:!1}}}};export{a as c};
