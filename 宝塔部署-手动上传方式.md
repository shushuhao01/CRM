# 宝塔部署 - 手动上传方式（备选）

如果服务器无法使用 Git，可以使用手动上传方式。

---

## 步骤 1：下载项目到本地

### 方式一：下载 ZIP 包
1. 访问：https://github.com/shushuhao01/CRM
2. 点击绿色按钮 **Code**
3. 点击 **Download ZIP**
4. 解压到本地

### 方式二：使用 Git 克隆到本地
```bash
git clone https://github.com/shushuhao01/CRM.git
```

---

## 步骤 2：压缩项目

### Windows 系统
1. 右键项目文件夹
2. 选择"发送到" → "压缩(zipped)文件夹"
3. 或使用 7-Zip、WinRAR 压缩

### Linux/Mac 系统
```bash
cd CRM
tar -czf CRM.tar.gz .
```

**注意**：压缩时**不要包含** `node_modules` 目录（太大了）

---

## 步骤 3：上传到服务器

### 使用宝塔面板上传
1. 登录宝塔面板
2. 点击左侧 **文件**
3. 进入 `/www/wwwroot` 目录
4. 点击 **上传**
5. 选择压缩包上传
6. 上传完成后，点击压缩包 → **解压**
7. 解压到 `CRM` 目录

### 使用 FTP 上传
1. 使用 FileZilla 等 FTP 工具
2. 连接到服务器
3. 上传到 `/www/wwwroot/CRM`

---

## 步骤 4：SSH 连接并部署

即使是手动上传，也需要 SSH 执行部署命令：

```bash
# 1. SSH 连接（使用宝塔终端或 SSH 客户端）
ssh root@你的服务器IP

# 2. 进入项目目录
cd /www/wwwroot/CRM

# 3. 给脚本执行权限
chmod +x deploy.sh

# 4. 执行部署
./deploy.sh
```

---

## 步骤 5：配置 Nginx

参考《宝塔部署-SSH方式.md》中的步骤 5。

---

## 为什么还需要 SSH？

即使手动上传了代码，仍需要 SSH 执行以下操作：

1. **安装依赖**：`npm install`
2. **构建项目**：`npm run build`
3. **启动服务**：`pm2 start`

这些操作**无法**通过宝塔面板的图形界面完成。

---

## 简化方案：使用宝塔终端

如果不想用 SSH 客户端，可以直接使用宝塔面板的终端：

1. 登录宝塔面板
2. 点击左侧 **终端**
3. 在终端中执行命令

这样就不需要额外的 SSH 工具了！

---

## 对比：Git vs 手动上传

| 方式 | 优点 | 缺点 |
|------|------|------|
| **Git 克隆** | ✅ 快速<br>✅ 可更新<br>✅ 完整 | ❌ 需要 Git |
| **手动上传** | ✅ 不需要 Git<br>✅ 可视化 | ❌ 慢<br>❌ 更新麻烦 |

**推荐**：优先使用 Git 克隆方式。

---

## 更新代码

### Git 方式（推荐）
```bash
cd /www/wwwroot/CRM
git pull
./deploy.sh
```

### 手动上传方式
1. 下载最新代码
2. 压缩
3. 上传覆盖
4. SSH 执行 `./deploy.sh`

---

## 常见问题

### Q: 上传的压缩包太大怎么办？
A: 删除 `node_modules` 目录后再压缩。部署时会自动安装依赖。

### Q: 解压后文件权限不对？
```bash
cd /www/wwwroot/CRM
chmod -R 755 .
chmod +x deploy.sh
```

### Q: 没有 SSH 权限怎么办？
A: 联系服务器管理员开通 SSH 权限，或使用宝塔面板的"终端"功能。

---

## 一键命令（上传后执行）

```bash
cd /www/wwwroot/CRM && \
chmod +x deploy.sh && \
./deploy.sh
```

---

## 技术支持

GitHub Issues: https://github.com/shushuhao01/CRM/issues
