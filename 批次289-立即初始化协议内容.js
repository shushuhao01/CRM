// 🔥 批次289：立即初始化协议内容（用户提供的内容 + 精美排版）
// 在浏览器控制台运行此脚本

console.log('🚀 开始初始化协议内容...\n')

// 协议列表数据
const agreementList = [
  {
    id: 1,
    title: '用户使用协议',
    type: 'user',
    content: `<div style="font-family: 'Microsoft YaHei', 'PingFang SC', sans-serif; line-height: 1.8; color: #333; padding: 20px;">
<h1 style="text-align: center; color: #409eff; font-size: 28px; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 3px solid #409eff; font-weight: bold;">用户使用协议</h1>

<p style="text-indent: 2em; margin-bottom: 20px; font-size: 15px; color: #606266;">
  欢迎使用本CRM客户管理系统（以下简称<span style="color: #409eff; font-weight: bold;">"本系统"</span>）。在使用本系统之前，请您<span style="color: #409eff; font-weight: bold;">仔细阅读并充分理解</span>本协议的全部内容。
</p>

<h2 style="color: #409eff; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #409eff; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">一、协议的接受</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  1.1 本协议是您与本系统运营方之间关于使用本系统服务所订立的协议。
</p>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  1.2 您点击<span style="color: #409eff; font-weight: bold;">"同意"</span>按钮即表示您<span style="color: #409eff; font-weight: bold;">完全接受</span>本协议的全部条款。
</p>

<h2 style="color: #409eff; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #409eff; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">二、服务内容</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  2.1 本系统为企业提供<span style="color: #409eff; font-weight: bold;">客户关系管理服务</span>，包括但不限于：
</p>
<ul style="margin-left: 3em; margin-bottom: 15px; list-style: none;">
  <li style="margin-bottom: 10px; padding: 8px 12px; background: #f0f9ff; border-radius: 4px;">📊 客户信息管理</li>
  <li style="margin-bottom: 10px; padding: 8px 12px; background: #f0f9ff; border-radius: 4px;">📦 订单管理</li>
  <li style="margin-bottom: 10px; padding: 8px 12px; background: #f0f9ff; border-radius: 4px;">📈 业绩统计</li>
  <li style="margin-bottom: 10px; padding: 8px 12px; background: #f0f9ff; border-radius: 4px;">📉 数据分析</li>
  <li style="margin-bottom: 10px; padding: 8px 12px; background: #f0f9ff; border-radius: 4px;">👥 团队协作</li>
</ul>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  2.2 本系统保留随时修改或中断服务而不需通知用户的权利。
</p>

<h2 style="color: #409eff; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #409eff; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">三、用户权利和义务</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  <span style="color: #409eff; font-weight: bold; font-size: 16px;">3.1 用户权利：</span>
</p>
<ul style="margin-left: 3em; margin-bottom: 20px; list-style: none;">
  <li style="margin-bottom: 10px; padding: 8px 12px; background: #f0f9ff; border-radius: 4px;">✅ 使用本系统提供的各项功能</li>
  <li style="margin-bottom: 10px; padding: 8px 12px; background: #f0f9ff; border-radius: 4px;">✅ 管理自己的客户数据</li>
  <li style="margin-bottom: 10px; padding: 8px 12px; background: #f0f9ff; border-radius: 4px;">✅ 查看业绩统计报表</li>
  <li style="margin-bottom: 10px; padding: 8px 12px; background: #f0f9ff; border-radius: 4px;">✅ 获得技术支持服务</li>
</ul>

<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  <span style="color: #e6a23c; font-weight: bold; font-size: 16px;">3.2 用户义务：</span>
</p>
<div style="background: #fef0f0; border-left: 4px solid #f56c6c; padding: 15px 20px; margin: 15px 0; border-radius: 4px;">
  <p style="margin-bottom: 12px; color: #f56c6c; font-weight: bold; font-size: 16px;">⚠️ 重要提示：</p>
  <ul style="margin-left: 2em; list-style: none;">
    <li style="margin-bottom: 10px; color: #f56c6c; font-weight: bold;">❌ 遵守国家法律法规</li>
    <li style="margin-bottom: 10px; color: #f56c6c; font-weight: bold;">❌ 不得利用本系统从事违法活动</li>
    <li style="margin-bottom: 10px; color: #f56c6c; font-weight: bold;">❌ 妥善保管账号密码</li>
    <li style="margin-bottom: 10px; color: #f56c6c; font-weight: bold;">❌ 对账号下的所有行为负责</li>
    <li style="margin-bottom: 10px; color: #f56c6c; font-weight: bold;">❌ 不得恶意攻击系统</li>
    <li style="margin-bottom: 10px; color: #f56c6c; font-weight: bold;">❌ 不得泄露客户隐私信息</li>
  </ul>
</div>

<h2 style="color: #409eff; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #409eff; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">四、数据安全</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  4.1 本系统采用<span style="color: #409eff; font-weight: bold;">行业标准的安全措施</span>保护用户数据。
</p>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  4.2 用户应定期备份重要数据，本系统不对数据丢失承担责任。
</p>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  4.3 未经授权访问、使用、修改或破坏系统数据的行为将<span style="color: #f56c6c; font-weight: bold;">承担法律责任</span>。
</p>

<h2 style="color: #409eff; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #409eff; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">五、知识产权</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  5.1 本系统的所有内容，包括但不限于<span style="color: #409eff; font-weight: bold;">文字、图片、软件、程序</span>等，均受知识产权法保护。
</p>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  5.2 未经许可，用户不得复制、传播、修改本系统的任何内容。
</p>

<h2 style="color: #409eff; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #409eff; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">六、免责声明</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  6.1 本系统不对因以下原因导致的损失承担责任：
</p>
<ul style="margin-left: 3em; margin-bottom: 15px; list-style: none;">
  <li style="margin-bottom: 8px; color: #909399;">• 不可抗力因素</li>
  <li style="margin-bottom: 8px; color: #909399;">• 网络故障</li>
  <li style="margin-bottom: 8px; color: #909399;">• 用户操作不当</li>
  <li style="margin-bottom: 8px; color: #909399;">• 第三方侵权行为</li>
</ul>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  6.2 本系统提供的数据分析结果仅供参考，不构成任何投资建议。
</p>

<h2 style="color: #409eff; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #409eff; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">七、协议的变更</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  7.1 本系统有权随时修改本协议条款。
</p>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  7.2 协议变更后，继续使用本系统即视为<span style="color: #409eff; font-weight: bold;">接受新协议</span>。
</p>

<h2 style="color: #409eff; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #409eff; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">八、争议解决</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  8.1 本协议的解释、效力及纠纷的解决，适用<span style="color: #409eff; font-weight: bold;">中华人民共和国法律</span>。
</p>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  8.2 若发生争议，双方应友好协商解决；协商不成的，可向本系统所在地人民法院提起诉讼。
</p>

<h2 style="color: #409eff; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #409eff; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">九、其他</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  9.1 本协议自用户点击同意之日起生效。
</p>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8;">
  9.2 如本协议中的任何条款无论因何种原因完全或部分无效或不具有执行力，本协议的其余条款仍应有效并且有约束力。
</p>

<div style="text-align: center; margin-top: 40px; padding: 20px; background: #f0f9ff; border-radius: 8px;">
  <p style="color: #409eff; font-weight: bold; font-size: 16px; margin-bottom: 10px;">📅 最后更新日期</p>
  <p style="color: #606266; font-size: 15px;">2025年11月22日</p>
</div>
</div>`,
    enabled: true,
    wordCount: 0,
    summary: '',
    updateTime: new Date().toISOString()
  },
  {
    id: 2,
    title: '隐私协议',
    type: 'privacy',
    content: `<div style="font-family: 'Microsoft YaHei', 'PingFang SC', sans-serif; line-height: 1.8; color: #333; padding: 20px;">
<h1 style="text-align: center; color: #67C23A; font-size: 28px; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 3px solid #67C23A; font-weight: bold;">隐私协议</h1>

<div style="background: #f0f9ff; border-left: 4px solid #409eff; padding: 20px; margin: 20px 0; border-radius: 4px;">
  <p style="color: #606266; font-size: 15px; line-height: 1.8; margin: 0;">
    ℹ️ <span style="color: #409eff; font-weight: bold;">提示：</span>隐私协议内容待补充，请提供隐私协议内容后，我们将为您进行精美排版。
  </p>
</div>

<h2 style="color: #67C23A; font-size: 21px; margin: 30px 0 15px; padding-left: 12px; border-left: 4px solid #67C23A; background: #f0f9ff; padding: 10px 12px; font-weight: bold;">隐私协议框架（待填充）</h2>
<p style="text-indent: 2em; margin-bottom: 12px; line-height: 1.8; color: #909399;">
  本部分将包含完整的隐私保护条款，包括数据收集、使用、存储、保护等内容...
</p>

<div style="text-align: center; margin-top: 40px; padding: 20px; background: #f0f9ff; border-radius: 8px;">
  <p style="color: #67C23A; font-weight: bold; font-size: 16px; margin-bottom: 10px;">📅 最后更新日期</p>
  <p style="color: #606266; font-size: 15px;">待补充</p>
</div>
</div>`,
    enabled: true,
    wordCount: 0,
    summary: '',
    updateTime: new Date().toISOString()
  }
]

// 计算字数和概述
function calculateWordCountAndSummary(content) {
  // 移除HTML标签
  const text = content.replace(/<[^>]+>/g, '').replace(/\s+/g, ' ').trim()
  const wordCount = text.length

  // 生成概述（前100个字符）
  const summary = text.substring(0, 100) + (text.length > 100 ? '...' : '')

  return { wordCount, summary }
}

// 更新协议列表的字数和概述
agreementList.forEach(agreement => {
  const { wordCount, summary } = calculateWordCountAndSummary(agreement.content)
  agreement.wordCount = wordCount
  agreement.summary = summary
})

// 保存到 localStorage
try {
  localStorage.setItem('crm_agreement_list', JSON.stringify(agreementList))
  console.log('✅ 协议列表已保存到 localStorage')
  console.log('📊 协议数量:', agreementList.length)

  agreementList.forEach((agreement, index) => {
    console.log(`\n${index + 1}. ${agreement.title}`)
    console.log(`   类型: ${agreement.type}`)
    console.log(`   字数: ${agreement.wordCount}`)
    console.log(`   状态: ${agreement.enabled ? '已启用' : '已禁用'}`)
    console.log(`   概述: ${agreement.summary}`)
  })

  console.log('\n✅ 初始化完成！')
  console.log('📝 用户使用协议已填充精美排版内容')
  console.log('⏳ 隐私协议等待您提供内容')
  console.log('\n🔄 请刷新页面查看效果')

} catch (error) {
  console.error('❌ 保存失败:', error)
}
